{"version":3,"file":"index.js","sources":["../src/helpers/common_constants.jsx","../src/components/IntentComponent/intent_modal.jsx","../src/assets/icon_trash.jsx","../src/components/IntentComponent/utterance/input.jsx","../src/components/IntentComponent/utterance/utterance.jsx","../src/components/IntentComponent/intent_utterances.jsx","../src/helpers/validations.jsx","../src/components/IntentComponent/intent_details.jsx","../src/index.js"],"sourcesContent":["export const getRandomColor = () => {\n\tvar letters = \"0123456789ABCDEF\";\n\tvar color = \"#\";\n\n\tfor (var i = 0; i < 6; i++) {\n\t\tcolor += letters[Math.floor(Math.random() * 16)];\n\t}\n\treturn color;\n};\n\nexport const getColor = (index) => {\n\tlet arr = [\n\t\t\"#56ebd3\",\n\t\t\"#fbacf6\",\n\t\t\"#9ee786\",\n\t\t\"#e4b5ff\",\n\t\t\"#c2e979\",\n\t\t\"#20d8fd\",\n\t\t\"#e8d25c\",\n\t\t\"#42edec\",\n\t\t\"#f3c46f\",\n\t\t\"#5cefba\",\n\t\t\"#e8de7a\",\n\t\t\"#7ee8c0\",\n\t\t\"#e8d98c\",\n\t\t\"#88e99a\",\n\t\t\"#cfdd73\",\n\t\t\"#8be8ad\",\n\t\t\"#dff799\",\n\t\t\"#b5eaa1\",\n\t\t\"#c2d681\",\n\t\t\"#b5e287\",\n\t];\n\n\treturn arr[index % arr.length]\n};\n","import React, { useState, useEffect, useRef } from 'react';\nimport useOnclickOutside from 'react-cool-onclickoutside';\nimport TextInput from 'react-autocomplete-input';\nimport 'react-autocomplete-input/dist/bundle.css';\n\nfunction Modal(props) {\n\tconst [ entities, setEntities ] = useState(props.entities);\n\tconst [ allEntities, setAllEntities ] = useState(props.entities);\n\tconst [ entitiesNames, setEntitiesNames ] = useState([]);\n\tconst input = useRef();\n\n\tconst modalRef = useOnclickOutside(() => {\n\t\tprops.setModal(false);\n\t\tprops.setSelection(null);\n\t});\n\n\tconst filterEntities = (term) => {\n\t\tlet arr = [ ...allEntities ];\n\t\tlet filteredArr = arr.filter(\n\t\t\t(item) => item.name && item.name.toLowerCase().includes(term.trim().toLowerCase())\n\t\t);\n\n\t\tsetEntities(filteredArr);\n\t};\n\n\tuseEffect(\n\t\t() => {\n\t\t\tlet arr = entities\n\t\t\t\t.map((item) => {\n\t\t\t\t\treturn item.name;\n\t\t\t\t})\n\t\t\t\t.filter((item) => item);\n\t\t\t//console.log(arr)\n\t\t\tsetEntitiesNames(arr);\n\t\t},\n\t\t[ entities ]\n\t);\n\n\tconst makeEntities = (items) => {\n\t\tconst handleDefaultParam = (param) => {\n\t\t\tif (param.includes('.')) {\n\t\t\t\treturn param.split('.').pop();\n\t\t\t} else {\n\t\t\t\treturn param.split('@').pop();\n\t\t\t}\n\t\t};\n\t\tif (items) {\n\t\t\treturn items.map((item, i) => {\n\t\t\t\treturn (\n\t\t\t\t\t<button\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t\tlet type = '@' + item.name;\n\t\t\t\t\t\t\tlet slotValue = item.name;\n\n\t\t\t\t\t\t\tconst getParamValues = () => {\n\t\t\t\t\t\t\t\tlet found = props.paramValues.find(obj => obj.type === type);\n\t\t\t\t\t\t\t\tif (found) {\n\t\t\t\t\t\t\t\t\treturn found.slot_value\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn handleDefaultParam(slotValue)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tprops.setModal(false);\n\t\t\t\t\t\t\tprops.selection.item.setAttribute('data-type', type);\n\t\t\t\t\t\t\tprops.selection.item.setAttribute('data-slot-value', getParamValues());\n\t\t\t\t\t\t\tprops.mapNodesToModel(\n\t\t\t\t\t\t\t\tdocument.querySelector('.item--active [contenteditable=\"true\"]').childNodes,\n\t\t\t\t\t\t\t\tprops.active\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tprops.setSelection(null);\n\t\t\t\t\t\t\tprops.setStateChange(!props.stateChange);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span role=\"img\">@{item.name}</span>\n\t\t\t\t\t</button>\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tif (entities) {\n\t\treturn (\n\t\t\t<div id=\"dropdown-modal\" className={`dropdown ${props.modal && 'dropdown--active'}`} ref={modalRef}>\n\t\t\t\t<div className=\"dropdown__search-wrap\">\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tComponent=\"input\"\n\t\t\t\t\t\ttrigger=\"\"\n\t\t\t\t\t\toptions={entitiesNames}\n\t\t\t\t\t\tspaceRemovers={[]}\n\t\t\t\t\t\tmatchAny={true}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tfilterEntities(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tref={input}\n\t\t\t\t\t\tclassName=\"dropdown__search editor-input\"\n\t\t\t\t\t\tplaceholder=\"Filter entities\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"dropdown__inner\">{entities && makeEntities(entities)}</div>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\treturn null;\n\t}\n}\n\nexport { Modal };\n","import React from 'react';\n\nfunction IconTrash() {\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n\t\t\t<g fill=\"none\" fill-rule=\"evenodd\" stroke=\"#1A1A1A\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n\t\t\t\t<path d=\"M2.4 6.5v7c0 1.105.835 2 1.867 2h7.466c1.032 0 1.867-.895 1.867-2v-7M1.467 3.5h13.066M6.133 3.5v-3h3.734v3M8 7.5v5M10.8 7.5v5M5.2 7.5v5\" />\n\t\t\t</g>\n\t\t</svg>\n\t);\n}\n\nexport { IconTrash };\n","import { times } from 'lodash';\nimport React from 'react';\nimport ContentEditable from 'react-contenteditable';\nimport reactHtmlParser from 'react-html-parser';\n\nclass Input extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tmodel: this.props.model\n\t\t};\n\n\t\tthis.text = React.createRef('');\n\t\tthis.handleSelection = this.handleSelection.bind(this);\n\t\tthis.handleModal = this.handleModal.bind(this);\n\t}\n\n\tshouldComponentUpdate(nextProps) {\n\t\tif (\n\t\t\tnextProps.utterances.length !== this.props.utterances.length ||\n\t\t\tthis.props.stateChange !== nextProps.stateChange ||\n\t\t\tnextProps.active !== this.props.active\n\t\t) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn this.props.model.length === 0;\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tconsole.log(this.props.active, prevProps.active);\n\t\tif (this.props.active !== prevProps.active || (this.props.active && !this.text.current.length)) {\n\t\t\tthis.text.current && this.text.current.focus();\n\t\t}\n\t}\n\n\thandleModal(selection, relativePos) {\n\t\tdocument.querySelector('#dropdown-modal').style.left = `${relativePos.left + 24}px`;\n\t\tdocument.querySelector('#dropdown-modal').style.top = `${relativePos.top + 2 * 24}px`;\n\t\tthis.props.setModal(true);\n\t\tthis.props.setSelection({ item: selection, index: this.props.index });\n\t}\n\n\thandleSelection(e) {\n\t\tfunction unwrap(node) {\n\t\t\tnode.replaceWith(...node.childNodes);\n\t\t}\n\n\t\tlet selection = window.getSelection().getRangeAt(0);\n\t\tif (selection.toString()) {\n\t\t\tlet textNode = document.createTextNode(selection.toString());\n\t\t\tlet selectedText = selection.extractContents();\n\t\t\tlet span = document.createElement('span');\n\t\t\tlet nested = span.querySelectorAll('*');\n\n\t\t\tspan.appendChild(textNode);\n\t\t\tspan.setAttribute('class', 'highlight');\n\t\t\tspan.textContent = span.textContent.trim();\n\t\t\tselection.insertNode(span);\n\n\t\t\te.target.childNodes.forEach((child) => {\n\t\t\t\tif (child.dataset && !child.dataset.type && child !== span) {\n\t\t\t\t\tchild.replaceWith(child.textContent);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t/* nested.forEach((item) => {\n\t\t\t\tunwrap(item);\n\t\t\t}); */\n\n\t\t\tif (span.parentNode.tagName === 'SPAN') {\n\t\t\t\tspan.parentNode.outerHTML = span.parentNode.innerHTML;\n\t\t\t}\n\n\t\t\tlet parentPos = document.querySelector('.convo-details').getBoundingClientRect();\n\t\t\tlet childPos = span.getBoundingClientRect();\n\n\t\t\tlet relativePos = {\n\t\t\t\ttop: childPos.top - parentPos.top,\n\t\t\t\tleft: childPos.left - parentPos.left\n\t\t\t};\n\n\t\t\tthis.handleModal(span, relativePos);\n\t\t}\n\t}\n\n\trender() {\n\t\tif (this.props.model) {\n\t\t\tlet mappedModel = this.props.model.filter((item) => item.text.trim().length);\n\n\t\t\tmappedModel = this.props.model.map((item, index) => {\n\t\t\t\tif (item.type) {\n\t\t\t\t\treturn `<span data-token=\"true\" style=\"background:${item.color}\" data-slot-value=\"${item.slot_value}\" data-type=\"${item.type}\" class=\"highlight\">${item.text.trim()}</span>`;\n\t\t\t\t} else {\n\t\t\t\t\treturn item.text;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst disableNewlines = (evt) => {\n\t\t\t\tconst keyCode = evt.keyCode || evt.which;\n\n\t\t\t\tif (keyCode === 13) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tthis.props.focusOnExpressionInput();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (this.props.active) {\n\t\t\t\treturn (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<div className=\"item__input\">\n\t\t\t\t\t\t\t<ContentEditable\n\t\t\t\t\t\t\t\tinnerRef={this.text}\n\t\t\t\t\t\t\t\thtml={`${mappedModel.join(' ')} `}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\tif (e.target.getAttribute('data-token')) {\n\t\t\t\t\t\t\t\t\t\tthis.handleModal(e.target, e);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonKeyPress={(e) => {\n\t\t\t\t\t\t\t\t\tdisableNewlines(e);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonMouseUp={(e) => {\n\t\t\t\t\t\t\t\t\tthis.handleSelection(e);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tlet nodes = e.currentTarget.childNodes;\n\t\t\t\t\t\t\t\t\tnodes = nodes.forEach((item) => {\n\t\t\t\t\t\t\t\t\t\tif (!item.textContent.trim().length && item.tagName === 'SPAN') {\n\t\t\t\t\t\t\t\t\t\t\titem.remove();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tthis.props.mapNodesToModel(e.currentTarget.childNodes, this.props.index);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"item__input item__input--readonly\">\n\t\t\t\t\t\t<div style={{ opacity: mappedModel.join(' ').trim().length ? '1' : '0.5' }}>\n\t\t\t\t\t\t\t{mappedModel.join(' ').trim().length ? (\n\t\t\t\t\t\t\t\treactHtmlParser(mappedModel.join(' '))\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t'Input text'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\treturn <div />;\n\t\t}\n\t}\n}\n\nexport default Input;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { IconTrash } from '../../../assets/icon_trash.jsx';\nimport Input from './input.jsx';\nimport { Component } from 'react';\nimport _ from 'lodash';\n\nconst Utterance = (props) => {\n\tconst [remove, setRemove] = useState(false);\n\tconst [valid, setValid] = useState(true);\n\n\tconst wrapper = useRef(null);\n\tconst removeBtn = useRef(null);\n\n\tlet data = props.data;\n\n\tuseEffect(() => {\n\t\tlet slotValues = props.data.model.map(item => item.slot_value).filter(item => item);\n\t\tlet invalidValues = slotValues.filter(item => !item.match(/^[A-Za-z](_*[A-Za-z])*_*$/));\n\n\t\tlet term = props.data.model.map(item => item.text).join(' ');\n\t\tlet reg = /^[a-zA-Z][a-zA-Z\\s]*$/;\n\n\t\tif (reg.test(term) && !invalidValues.length) {\n\t\t\tsetValid(true);\n\t\t} else {\n\t\t\tsetValid(false);\n\t\t}\n\t}, [props.data.model]);\n\n\treturn (\n\t\t<li\n\t\t\tdata-valid={`${valid}`}\n\t\t\tref={wrapper}\n\t\t\tkey={data.index}\n\t\t\tclassName={`item item--intent ${data.active ? 'item--active' : ''} ${remove\n\t\t\t\t? 'item--remove'\n\t\t\t\t: ''} ${valid ? 'item--valid' : 'item--error'}`}\n\t\t\tonClick={() => {\n\t\t\t\tdata.handleActive(data.index);\n\t\t\t}}\n\t\t>\n\t\t\t{!valid && <legend class=\"item__error\">Utterances shall begin with alphabetic characters from a to Z. The untterance may not contain other characters then alphabetic characters. The utterance shall not contain any numbers at all.</legend>}\n\t\t\t<div className=\"item__main\">\n\t\t\t\t<Input\n\t\t\t\t\tmodel={data.model}\n\t\t\t\t\tindex={data.index}\n\t\t\t\t\tutterances={data.utterances}\n\t\t\t\t\tsetUtterances={data.setUtterances}\n\t\t\t\t\tmodal={data.modal}\n\t\t\t\t\tsetModal={data.setModal}\n\t\t\t\t\tsetSelection={data.setSelection}\n\t\t\t\t\tselection={data.selection}\n\t\t\t\t\tmapNodesToModel={data.mapNodesToModel}\n\t\t\t\t\tactive={data.active}\n\t\t\t\t\taddNewValue={data.addNewValue}\n\t\t\t\t\tstateChange={data.stateChange}\n\t\t\t\t\tfocusOnExpressionInput={data.focusOnExpressionInput}\n\t\t\t\t\twrapper={wrapper}\n\t\t\t\t/>\n\t\t\t\t<div className=\"item__buttons\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn--remove btn--remove--main\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tref={removeBtn}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tsetRemove(true)\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tdata.removeFromUtterances(data.index);\n\t\t\t\t\t\t\t\tsetRemove(false);\n\t\t\t\t\t\t\t}, 220);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconTrash />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{data.model && data.model.filter((item) => item.type).length ? (\n\t\t\t\t<ul className=\"model\" style={{display: `${data.active ? 'block' : 'none'}`}}>\n\t\t\t\t\t<header>\n\t\t\t\t\t\t<div>Parameter Name</div>\n\t\t\t\t\t\t<div>Entity</div>\n\t\t\t\t\t\t<div>Resolved Value</div>\n\t\t\t\t\t</header>\n\t\t\t\t\t{data.model.map((item, i) => {\n\t\t\t\t\t\tif (item.type) {\n\t\t\t\t\t\t\tlet slotValue = item.slot_value;\n\t\t\t\t\t\t\tlet type = item.type;\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li key={i}>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclassName=\"editor-input\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tdefaultValue={slotValue}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\tlet arr = [...data.utterances];\n\t\t\t\t\t\t\t\t\t\t\tarr[data.index].model[i].slot_value = e.target.value;\n\t\t\t\t\t\t\t\t\t\t\tdata.setUtterances(arr);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Set parameter name\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<span className=\"highlight\" style={{ background: item.color }}>\n\t\t\t\t\t\t\t\t\t\t\t{type}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div>{item.text}</div>\n\t\t\t\t\t\t\t\t\t<div className=\"item__buttons\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn--remove\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault(e);\n\t\t\t\t\t\t\t\t\t\t\t\tdata.removeFromModel(data.index, i);\n\t\t\t\t\t\t\t\t\t\t\t\tdata.setStateChange(!data.stateChange);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<IconTrash />\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t) : (\n\t\t\t\t\t<React.Fragment />\n\t\t\t\t)}\n\t\t</li>\n\t);\n}\n\nexport default Utterance;\n","import React, { useState, useEffect } from 'react';\nimport { getColor } from '../../helpers/common_constants.jsx';\nimport { Modal } from './intent_modal.jsx';\nimport Utterance from './utterance/utterance.jsx';\n\nconst List = React.memo(function List(props) {\n\tconst [ modal, setModal ] = useState(false);\n\tconst [ modalPosition, setModalPosition ] = useState(null);\n\tconst [ selection, setSelection ] = useState(null);\n\tconst [ update, setUpdate ] = useState(false);\n\tconst [ stateChange, setStateChange ] = useState(false);\n\tconst [ paramValues, setParamValues ] = useState(null);\n\tconst intents = props.intents;\n\n\tuseEffect(\n\t\t() => {\n\t\t\t// get every item type & slot value pair from utterances array\n\t\t\tlet arr = props.utterances\n\t\t\t\t.map((item) => item.model)\n\t\t\t\t.flat()\n\t\t\t\t.filter((item) => item.slot_value)\n\t\t\t\t.map((item) => ({ type: item.type, slot_value: item.slot_value }));\n\n\n\t\t\t// remove duplicate pairs \n\t\t\tlet uniq = arr.filter((v, i, a) => a.findIndex((t) => t.slot_value === v.slot_value) === i);\n\t\t\tsetParamValues(uniq);\n\t\t},\n\t\t[ props.utterances ]\n\t);\n\n\tconst handleActive = (index) => {\n\t\tprops.setActive(index);\n\t};\n\n\tconst mapNodesToModel = (items, index) => {\n\t\tlet arr = Array.from(items).filter((item) => item.textContent.trim().length);\n\n\t\tlet i = 0;\n\t\tarr = arr.map((item) => {\n\t\t\tif (item.tagName === 'SPAN' || (item.nodeName === '#text' && item.textContent.trim().length)) {\n\t\t\t\tlet type = item.dataset && item.dataset.type && item.dataset.type.length ? item.dataset.type : null;\n\t\t\t\tif (type) {\n\t\t\t\t\ti++;\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttext: item.textContent.trim(),\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\tslot_value: item.dataset.slotValue\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn { text: item.textContent.trim() };\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\n\t\tarr = arr.filter((item) => item);\n\n\t\tconsole.log('arr', arr);\n\n\t\tlet values = [ ...props.utterances ];\n\t\tvalues[index] = { raw: arr.map((item) => item.text).join(' '), model: arr };\n\t\tprops.setUtterances(values);\n\t};\n\n\tconst makeItems = (items) => {\n\t\treturn items.map((item, index) => {\n\t\t\tlet model = item.model.map((val) => {\n\t\t\t\treturn { ...val, color: getColor(val.text.length) };\n\t\t\t});\n\n\t\t\tlet data = {\n\t\t\t\tindex: index,\n\t\t\t\tactive: index === props.active,\n\t\t\t\tmodel: model,\n\t\t\t\tutterances: props.utterances,\n\t\t\t\tsetUtterances: props.setUtterances,\n\t\t\t\thandleActive: handleActive,\n\t\t\t\tmodal: modal,\n\t\t\t\tsetModal: setModal,\n\t\t\t\tsetModalPosition: setModalPosition,\n\t\t\t\tselection: selection,\n\t\t\t\tsetSelection: setSelection,\n\t\t\t\taddNewValue: props.addNewValue,\n\t\t\t\tstateChange: stateChange,\n\t\t\t\tsetStateChange: setStateChange,\n\t\t\t\tremoveFromUtterances: removeFromUtterances,\n\t\t\t\tremoveFromModel: props.removeFromModel,\n\t\t\t\tmapNodesToModel: mapNodesToModel,\n\t\t\t\tfocusOnExpressionInput: props.focusOnExpressionInput,\n\t\t\t};\n\n\t\t\treturn <Utterance key={index} data={data} errors={props.errors} />;\n\t\t});\n\t};\n\n\tconst removeFromUtterances = (index) => {\n\t\tlet arr = [ ...props.utterances ];\n\t\tif (index !== -1) {\n\t\t\tarr.splice(index, 1);\n\t\t\tconsole.log('new arr after delete', arr);\n\t\t\tprops.setUtterances(arr);\n\t\t\tprops.setActive(null);\n\t\t}\n\t};\n\n\tconsole.log(selection);\n\n\tif (props.utterances) {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<ul>{makeItems(props.utterances)}</ul>\n\t\t\t\t<Modal\n\t\t\t\t\tsetModal={setModal}\n\t\t\t\t\tmodal={modal}\n\t\t\t\t\tmodalPosition={modalPosition}\n\t\t\t\t\tselection={selection}\n\t\t\t\t\tsetSelection={setSelection}\n\t\t\t\t\tactive={props.active}\n\t\t\t\t\tutterances={props.utterances}\n\t\t\t\t\tsetUtterances={props.setUtterances}\n\t\t\t\t\tsetUpdate={setUpdate}\n\t\t\t\t\tupdate={update}\n\t\t\t\t\tmapNodesToModel={mapNodesToModel}\n\t\t\t\t\tstateChange={stateChange}\n\t\t\t\t\tsetStateChange={setStateChange}\n\t\t\t\t\tentities={props.entities.flat()}\n\t\t\t\t\tparamValues={paramValues}\n\t\t\t\t\tsetParamValues={setParamValues}\n\t\t\t\t/>\n\t\t\t</React.Fragment>\n\t\t);\n\t} else {\n\t\treturn null;\n\t}\n});\n\nexport { List };\n","export const validateInput = (elem, term, regex, message) => {\n  let reg = new RegExp(regex);\n  if (reg.test(term)) {\n    elem.setCustomValidity('');\n  } else {\n    elem.setCustomValidity(message);\n  }\n  elem.reportValidity();\n\n  return reg.test(term);\n};\n","import React, { useState, useEffect } from 'react';\nimport { List as Utterances } from './intent_utterances.jsx';\nimport '../../App.scss';\nimport { useRef } from 'react';\nimport { validateInput } from '../../helpers/validations.jsx';\n\nfunction IntentDetails(props) {\n  const [intent, setIntent] = useState(props.intent);\n  const entities = props.entities;\n  const systemEntities = props.systemEntities;\n\n  const [name, setName] = useState('');\n  const [utterances, setUtterances] = useState([]);\n  const [active, setActive] = useState(null);\n  const [newExpression, setNewExpression] = useState(null);\n  const [nameValid, setNameValid] = useState(true);\n\n  const newExpressionInput = useRef(null);\n\n  let errors = Array.from(document.querySelectorAll('[data-valid=\"false\"]'));\n\n\n  const focusOnExpressionInput = () => {\n    newExpressionInput.current.focus();\n    newExpressionInput.current.value = '';\n    setActive(null);\n  };\n\n  // add new value to value array\n  function addNewValue() {\n    let arr = [...utterances];\n    let newUtterance = {\n      raw: newExpression ? newExpression : '',\n      model: [{ text: newExpression ? newExpression : '' }],\n    };\n    arr = [newUtterance, ...arr];\n    setUtterances(arr);\n    setActive(0);\n  }\n\n  const removeFromModel = (utteranceIndex, index) => {\n    let arr = [...utterances];\n    let model = arr[utteranceIndex].model;\n    model[index] = {\n      text: model[index].text,\n    };\n\n    setUtterances(arr);\n  };\n\n  // check if data is passed in props\n  useEffect(() => {\n    if (intent) {\n      setName(intent.name);\n      setUtterances(intent.utterances);\n    }\n  }, [intent]);\n\n  useEffect(() => {\n\n    console.log('errors --->', errors.length < 1)\n    if (name && utterances) {\n      props.onUpdate({\n        ...intent,\n        name: name,\n        utterances: utterances,\n      }, errors.length < 1);\n    }\n  }, [name, utterances]);\n\n  if (intent) {\n    return (\n      <div className=\"convo-details\">\n        <section className=\"layout--editor-content\">\n          <div>\n            {/* Entity name value */}\n            <div className=\"margin--30--large\">\n              <h3 className=\"margin--10--large\">Intent name</h3>\n              <form\n                onSubmit={e => {\n                  e.preventDefault();\n                }}\n              >\n                <input\n                  data-valid={`${nameValid}`}\n                  type=\"text\"\n                  defaultValue={name ? name : ''}\n                  placeholder=\"Intent name\"\n                  className=\"editor-input input--item-name\"\n                  onChange={e => {\n                    let message =\n                      'Intent names shall begin with alphabetic characters from a to Z. The intent name may contain 1 underscore per word. Intent names shall not contain any numbers at all.';\n                    let valid = validateInput(\n                      e.target,\n                      e.target.value,\n                      '^[A-Za-z](_?[A-Za-z])*_?$',\n                      message\n                    );\n\n                    setNameValid(valid);\n                    setName(e.target.value);\n                  }}\n                  required\n                />\n              </form>\n            </div>\n            {/* Entity words */}\n            <div className=\"margin--50--large\">\n              <h3 className=\"margin--10--large\">Utterances</h3>\n              <div className=\"margin--24--large\">\n                <form\n                  onSubmit={e => {\n                    e.preventDefault();\n                    if (newExpression) {\n                      addNewValue();\n                      setNewExpression(null);\n                      newExpressionInput.current.value = '';\n                    }\n                  }}\n                >\n                  <input\n                    type=\"text\"\n                    className=\"editor-input input--add-field\"\n                    placeholder=\"Enter reference value\"\n                    onChange={e => setNewExpression(e.target.value)}\n                    ref={newExpressionInput}\n                    onFocus={() => {\n                      setActive(null);\n                    }}\n                  />\n                </form>\n                <Utterances\n                  addNewValue={addNewValue}\n                  active={active}\n                  setActive={setActive}\n                  utterances={utterances}\n                  setUtterances={setUtterances}\n                  removeFromModel={removeFromModel}\n                  entities={[entities, ...systemEntities]}\n                  focusOnExpressionInput={focusOnExpressionInput}\n                  errors={errors}\n                />\n              </div>\n            </div>\n          </div>\n        </section>\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nexport default IntentDetails;\n","import React from 'react'\nimport IntentDetails from './components/IntentComponent/intent_details'\nimport styles from './styles.module.css'\n\nexport const ExampleComponent = ({ text }) => {\n  return <div className={styles.test}>Example Component: {text}</div>\n}\n\nexport const IntentEditor = (props) => {\n  return <IntentDetails intent={''} entities={[]} systemEntities={[]} onUpdate={() => {console.log('update')}} />\n}"],"names":["getColor","index","arr","length","Modal","props","useState","entities","setEntities","allEntities","entitiesNames","setEntitiesNames","input","useRef","modalRef","useOnclickOutside","setModal","setSelection","filterEntities","term","filteredArr","filter","item","name","toLowerCase","includes","trim","useEffect","map","makeEntities","items","handleDefaultParam","param","split","pop","i","React","e","preventDefault","type","slotValue","getParamValues","found","paramValues","find","obj","slot_value","selection","setAttribute","mapNodesToModel","document","querySelector","childNodes","active","setStateChange","stateChange","modal","IconTrash","Input","state","model","text","createRef","handleSelection","bind","handleModal","shouldComponentUpdate","nextProps","utterances","componentDidUpdate","prevProps","console","log","current","focus","relativePos","style","left","top","window","getSelection","getRangeAt","toString","textNode","createTextNode","selectedText","extractContents","span","createElement","nested","querySelectorAll","appendChild","textContent","insertNode","target","forEach","child","dataset","replaceWith","parentNode","tagName","outerHTML","innerHTML","parentPos","getBoundingClientRect","childPos","render","mappedModel","color","disableNewlines","evt","keyCode","which","focusOnExpressionInput","join","getAttribute","nodes","currentTarget","remove","opacity","reactHtmlParser","Component","Utterance","setRemove","valid","setValid","wrapper","removeBtn","data","slotValues","invalidValues","match","reg","test","handleActive","setUtterances","addNewValue","stopPropagation","setTimeout","removeFromUtterances","display","value","background","removeFromModel","List","memo","modalPosition","setModalPosition","update","setUpdate","setParamValues","flat","uniq","v","a","findIndex","t","setActive","Array","from","nodeName","values","raw","makeItems","val","errors","splice","validateInput","elem","regex","message","RegExp","setCustomValidity","reportValidity","IntentDetails","intent","systemEntities","setName","newExpression","setNewExpression","nameValid","setNameValid","newExpressionInput","newUtterance","utteranceIndex","onUpdate","Utterances","ExampleComponent","styles","IntentEditor"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUO,IAAMA,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD,EAAW;AAClC,MAAIC,GAAG,GAAG,CACT,SADS,EAET,SAFS,EAGT,SAHS,EAIT,SAJS,EAKT,SALS,EAMT,SANS,EAOT,SAPS,EAQT,SARS,EAST,SATS,EAUT,SAVS,EAWT,SAXS,EAYT,SAZS,EAaT,SAbS,EAcT,SAdS,EAeT,SAfS,EAgBT,SAhBS,EAiBT,SAjBS,EAkBT,SAlBS,EAmBT,SAnBS,EAoBT,SApBS,CAAV;AAuBA,SAAOA,GAAG,CAACD,KAAK,GAAGC,GAAG,CAACC,MAAb,CAAV;AACA,CAzBM;;ACLP,SAASC,KAAT,CAAeC,KAAf,EAAsB;AAAA,kBACaC,cAAQ,CAACD,KAAK,CAACE,QAAP,CADrB;AAAA,MACbA,QADa;AAAA,MACHC,WADG;;AAAA,mBAEmBF,cAAQ,CAACD,KAAK,CAACE,QAAP,CAF3B;AAAA,MAEbE,WAFa;;AAAA,mBAGuBH,cAAQ,CAAC,EAAD,CAH/B;AAAA,MAGbI,aAHa;AAAA,MAGEC,gBAHF;;AAIrB,MAAMC,KAAK,GAAGC,YAAM,EAApB;AAEA,MAAMC,QAAQ,GAAGC,iBAAiB,CAAC,YAAM;AACxCV,IAAAA,KAAK,CAACW,QAAN,CAAe,KAAf;AACAX,IAAAA,KAAK,CAACY,YAAN,CAAmB,IAAnB;AACA,GAHiC,CAAlC;;AAKA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,IAAD,EAAU;AAChC,QAAIjB,GAAG,aAAQO,WAAR,CAAP;AACA,QAAIW,WAAW,GAAGlB,GAAG,CAACmB,MAAJ,CACjB,UAACC,IAAD;AAAA,aAAUA,IAAI,CAACC,IAAL,IAAaD,IAAI,CAACC,IAAL,CAAUC,WAAV,GAAwBC,QAAxB,CAAiCN,IAAI,CAACO,IAAL,GAAYF,WAAZ,EAAjC,CAAvB;AAAA,KADiB,CAAlB;AAIAhB,IAAAA,WAAW,CAACY,WAAD,CAAX;AACA,GAPD;;AASAO,EAAAA,eAAS,CACR,YAAM;AACL,QAAIzB,GAAG,GAAGK,QAAQ,CAChBqB,GADQ,CACJ,UAACN,IAAD,EAAU;AACd,aAAOA,IAAI,CAACC,IAAZ;AACA,KAHQ,EAIRF,MAJQ,CAID,UAACC,IAAD;AAAA,aAAUA,IAAV;AAAA,KAJC,CAAV;AAMAX,IAAAA,gBAAgB,CAACT,GAAD,CAAhB;AACA,GATO,EAUR,CAAEK,QAAF,CAVQ,CAAT;;AAaA,MAAMsB,YAAY,GAAG,SAAfA,YAAe,CAACC,KAAD,EAAW;AAC/B,QAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAW;AACrC,UAAIA,KAAK,CAACP,QAAN,CAAe,GAAf,CAAJ,EAAyB;AACxB,eAAOO,KAAK,CAACC,KAAN,CAAY,GAAZ,EAAiBC,GAAjB,EAAP;AACA,OAFD,MAEO;AACN,eAAOF,KAAK,CAACC,KAAN,CAAY,GAAZ,EAAiBC,GAAjB,EAAP;AACA;AACD,KAND;;AAOA,QAAIJ,KAAJ,EAAW;AACV,aAAOA,KAAK,CAACF,GAAN,CAAU,UAACN,IAAD,EAAOa,CAAP,EAAa;AAC7B,4BACCC;AACC,UAAA,GAAG,EAAED,CADN;AAEC,UAAA,OAAO,EAAE,iBAACE,CAAD,EAAO;AACfA,YAAAA,CAAC,CAACC,cAAF;AAEA,gBAAIC,IAAI,GAAG,MAAMjB,IAAI,CAACC,IAAtB;AACA,gBAAIiB,SAAS,GAAGlB,IAAI,CAACC,IAArB;;AAEA,gBAAMkB,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC5B,kBAAIC,KAAK,GAAGrC,KAAK,CAACsC,WAAN,CAAkBC,IAAlB,CAAuB,UAAAC,GAAG;AAAA,uBAAIA,GAAG,CAACN,IAAJ,KAAaA,IAAjB;AAAA,eAA1B,CAAZ;;AACA,kBAAIG,KAAJ,EAAW;AACV,uBAAOA,KAAK,CAACI,UAAb;AACA,eAFD,MAEO;AACN,uBAAOf,kBAAkB,CAACS,SAAD,CAAzB;AACA;AACD,aAPD;;AASAnC,YAAAA,KAAK,CAACW,QAAN,CAAe,KAAf;AACAX,YAAAA,KAAK,CAAC0C,SAAN,CAAgBzB,IAAhB,CAAqB0B,YAArB,CAAkC,WAAlC,EAA+CT,IAA/C;AACAlC,YAAAA,KAAK,CAAC0C,SAAN,CAAgBzB,IAAhB,CAAqB0B,YAArB,CAAkC,iBAAlC,EAAqDP,cAAc,EAAnE;AACApC,YAAAA,KAAK,CAAC4C,eAAN,CACCC,QAAQ,CAACC,aAAT,CAAuB,wCAAvB,EAAiEC,UADlE,EAEC/C,KAAK,CAACgD,MAFP;AAIAhD,YAAAA,KAAK,CAACY,YAAN,CAAmB,IAAnB;AACAZ,YAAAA,KAAK,CAACiD,cAAN,CAAqB,CAACjD,KAAK,CAACkD,WAA5B;AACA;AA1BF,wBA4BCnB;AAAM,UAAA,IAAI,EAAC;AAAX,gBAAmBd,IAAI,CAACC,IAAxB,CA5BD,CADD;AAgCA,OAjCM,CAAP;AAkCA;AACD,GA5CD;;AA8CA,MAAIhB,QAAJ,EAAc;AACb,wBACC6B;AAAK,MAAA,EAAE,EAAC,gBAAR;AAAyB,MAAA,SAAS,iBAAc/B,KAAK,CAACmD,KAAN,IAAe,kBAA7B,CAAlC;AAAqF,MAAA,GAAG,EAAE1C;AAA1F,oBACCsB;AAAK,MAAA,SAAS,EAAC;AAAf,oBACCA,6BAAC,SAAD;AACC,MAAA,SAAS,EAAC,OADX;AAEC,MAAA,OAAO,EAAC,EAFT;AAGC,MAAA,OAAO,EAAE1B,aAHV;AAIC,MAAA,aAAa,EAAE,EAJhB;AAKC,MAAA,QAAQ,EAAE,IALX;AAMC,MAAA,QAAQ,EAAE,kBAAC2B,CAAD,EAAO;AAChBnB,QAAAA,cAAc,CAACmB,CAAD,CAAd;AACA,OARF;AASC,MAAA,GAAG,EAAEzB,KATN;AAUC,MAAA,SAAS,EAAC,+BAVX;AAWC,MAAA,WAAW,EAAC;AAXb,MADD,CADD,eAgBCwB;AAAK,MAAA,SAAS,EAAC;AAAf,OAAkC7B,QAAQ,IAAIsB,YAAY,CAACtB,QAAD,CAA1D,CAhBD,CADD;AAoBA,GArBD,MAqBO;AACN,WAAO,IAAP;AACA;AACD;;AC1GD,SAASkD,SAAT,GAAqB;AACpB,sBACCrB;AAAK,IAAA,KAAK,EAAC,4BAAX;AAAwC,IAAA,KAAK,EAAC,IAA9C;AAAmD,IAAA,MAAM,EAAC,IAA1D;AAA+D,IAAA,OAAO,EAAC;AAAvE,kBACCA;AAAG,IAAA,IAAI,EAAC,MAAR;AAAe,iBAAU,SAAzB;AAAmC,IAAA,MAAM,EAAC,SAA1C;AAAoD,sBAAe,OAAnE;AAA2E,uBAAgB;AAA3F,kBACCA;AAAM,IAAA,CAAC,EAAC;AAAR,IADD,CADD,CADD;AAOA;;ICLKsB;;;AACL,iBAAYrD,KAAZ,EAAmB;AAAA;;AAClB,wCAAMA,KAAN;AACA,UAAKsD,KAAL,GAAa;AACZC,MAAAA,KAAK,EAAE,MAAKvD,KAAL,CAAWuD;AADN,KAAb;AAIA,UAAKC,IAAL,GAAYzB,cAAK,CAAC0B,SAAN,CAAgB,EAAhB,CAAZ;AACA,UAAKC,eAAL,GAAuB,MAAKA,eAAL,CAAqBC,IAArB,+BAAvB;AACA,UAAKC,WAAL,GAAmB,MAAKA,WAAL,CAAiBD,IAAjB,+BAAnB;AARkB;AASlB;;;;SAEDE,wBAAA,+BAAsBC,SAAtB,EAAiC;AAChC,QACCA,SAAS,CAACC,UAAV,CAAqBjE,MAArB,KAAgC,KAAKE,KAAL,CAAW+D,UAAX,CAAsBjE,MAAtD,IACA,KAAKE,KAAL,CAAWkD,WAAX,KAA2BY,SAAS,CAACZ,WADrC,IAEAY,SAAS,CAACd,MAAV,KAAqB,KAAKhD,KAAL,CAAWgD,MAHjC,EAIE;AACD,aAAO,IAAP;AACA,KAND,MAMO;AACN,aAAO,KAAKhD,KAAL,CAAWuD,KAAX,CAAiBzD,MAAjB,KAA4B,CAAnC;AACA;AACD;;SAEDkE,qBAAA,4BAAmBC,SAAnB,EAA8B;AAC7BC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKnE,KAAL,CAAWgD,MAAvB,EAA+BiB,SAAS,CAACjB,MAAzC;;AACA,QAAI,KAAKhD,KAAL,CAAWgD,MAAX,KAAsBiB,SAAS,CAACjB,MAAhC,IAA2C,KAAKhD,KAAL,CAAWgD,MAAX,IAAqB,CAAC,KAAKQ,IAAL,CAAUY,OAAV,CAAkBtE,MAAvF,EAAgG;AAC/F,WAAK0D,IAAL,CAAUY,OAAV,IAAqB,KAAKZ,IAAL,CAAUY,OAAV,CAAkBC,KAAlB,EAArB;AACA;AACD;;SAEDT,cAAA,qBAAYlB,SAAZ,EAAuB4B,WAAvB,EAAoC;AACnCzB,IAAAA,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,EAA0CyB,KAA1C,CAAgDC,IAAhD,GAA0DF,WAAW,CAACE,IAAZ,GAAmB,EAA7E;AACA3B,IAAAA,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,EAA0CyB,KAA1C,CAAgDE,GAAhD,GAAyDH,WAAW,CAACG,GAAZ,GAAkB,IAAI,EAA/E;AACA,SAAKzE,KAAL,CAAWW,QAAX,CAAoB,IAApB;AACA,SAAKX,KAAL,CAAWY,YAAX,CAAwB;AAAEK,MAAAA,IAAI,EAAEyB,SAAR;AAAmB9C,MAAAA,KAAK,EAAE,KAAKI,KAAL,CAAWJ;AAArC,KAAxB;AACA;;SAED8D,kBAAA,yBAAgB1B,CAAhB,EAAmB;AAClB;AAIA,QAAIU,SAAS,GAAGgC,MAAM,CAACC,YAAP,GAAsBC,UAAtB,CAAiC,CAAjC,CAAhB;;AACA,QAAIlC,SAAS,CAACmC,QAAV,EAAJ,EAA0B;AACzB,UAAIC,QAAQ,GAAGjC,QAAQ,CAACkC,cAAT,CAAwBrC,SAAS,CAACmC,QAAV,EAAxB,CAAf;AACA,UAAIG,YAAY,GAAGtC,SAAS,CAACuC,eAAV,EAAnB;AACA,UAAIC,IAAI,GAAGrC,QAAQ,CAACsC,aAAT,CAAuB,MAAvB,CAAX;AACA,UAAIC,MAAM,GAAGF,IAAI,CAACG,gBAAL,CAAsB,GAAtB,CAAb;AAEAH,MAAAA,IAAI,CAACI,WAAL,CAAiBR,QAAjB;AACAI,MAAAA,IAAI,CAACvC,YAAL,CAAkB,OAAlB,EAA2B,WAA3B;AACAuC,MAAAA,IAAI,CAACK,WAAL,GAAmBL,IAAI,CAACK,WAAL,CAAiBlE,IAAjB,EAAnB;AACAqB,MAAAA,SAAS,CAAC8C,UAAV,CAAqBN,IAArB;AAEAlD,MAAAA,CAAC,CAACyD,MAAF,CAAS1C,UAAT,CAAoB2C,OAApB,CAA4B,UAACC,KAAD,EAAW;AACtC,YAAIA,KAAK,CAACC,OAAN,IAAiB,CAACD,KAAK,CAACC,OAAN,CAAc1D,IAAhC,IAAwCyD,KAAK,KAAKT,IAAtD,EAA4D;AAC3DS,UAAAA,KAAK,CAACE,WAAN,CAAkBF,KAAK,CAACJ,WAAxB;AACA;AACD,OAJD;;AAUA,UAAIL,IAAI,CAACY,UAAL,CAAgBC,OAAhB,KAA4B,MAAhC,EAAwC;AACvCb,QAAAA,IAAI,CAACY,UAAL,CAAgBE,SAAhB,GAA4Bd,IAAI,CAACY,UAAL,CAAgBG,SAA5C;AACA;;AAED,UAAIC,SAAS,GAAGrD,QAAQ,CAACC,aAAT,CAAuB,gBAAvB,EAAyCqD,qBAAzC,EAAhB;AACA,UAAIC,QAAQ,GAAGlB,IAAI,CAACiB,qBAAL,EAAf;AAEA,UAAI7B,WAAW,GAAG;AACjBG,QAAAA,GAAG,EAAE2B,QAAQ,CAAC3B,GAAT,GAAeyB,SAAS,CAACzB,GADb;AAEjBD,QAAAA,IAAI,EAAE4B,QAAQ,CAAC5B,IAAT,GAAgB0B,SAAS,CAAC1B;AAFf,OAAlB;AAKA,WAAKZ,WAAL,CAAiBsB,IAAjB,EAAuBZ,WAAvB;AACA;AACD;;SAED+B,SAAA,kBAAS;AAAA;;AACR,QAAI,KAAKrG,KAAL,CAAWuD,KAAf,EAAsB;AACrB,UAAI+C,WAAW,GAAG,KAAKtG,KAAL,CAAWuD,KAAX,CAAiBvC,MAAjB,CAAwB,UAACC,IAAD;AAAA,eAAUA,IAAI,CAACuC,IAAL,CAAUnC,IAAV,GAAiBvB,MAA3B;AAAA,OAAxB,CAAlB;AAEAwG,MAAAA,WAAW,GAAG,KAAKtG,KAAL,CAAWuD,KAAX,CAAiBhC,GAAjB,CAAqB,UAACN,IAAD,EAAOrB,KAAP,EAAiB;AACnD,YAAIqB,IAAI,CAACiB,IAAT,EAAe;AACd,mEAAoDjB,IAAI,CAACsF,KAAzD,6BAAoFtF,IAAI,CAACwB,UAAzF,uBAAmHxB,IAAI,CAACiB,IAAxH,+BAAmJjB,IAAI,CAACuC,IAAL,CAAUnC,IAAV,EAAnJ;AACA,SAFD,MAEO;AACN,iBAAOJ,IAAI,CAACuC,IAAZ;AACA;AACD,OANa,CAAd;;AAQA,UAAMgD,eAAe,GAAG,SAAlBA,eAAkB,CAACC,GAAD,EAAS;AAChC,YAAMC,OAAO,GAAGD,GAAG,CAACC,OAAJ,IAAeD,GAAG,CAACE,KAAnC;;AAEA,YAAID,OAAO,KAAK,EAAhB,EAAoB;AACnBD,UAAAA,GAAG,CAACxE,cAAJ;;AACA,UAAA,MAAI,CAACjC,KAAL,CAAW4G,sBAAX;AACA;AACD,OAPD;;AASA,UAAI,KAAK5G,KAAL,CAAWgD,MAAf,EAAuB;AACtB,4BACCjB,6BAACA,cAAD,CAAO,QAAP,qBACCA;AAAK,UAAA,SAAS,EAAC;AAAf,wBACCA,6BAAC,eAAD;AACC,UAAA,QAAQ,EAAE,KAAKyB,IADhB;AAEC,UAAA,IAAI,EAAK8C,WAAW,CAACO,IAAZ,CAAiB,GAAjB,CAAL,MAFL;AAGC,UAAA,OAAO,EAAE,iBAAC7E,CAAD,EAAO;AACf,gBAAIA,CAAC,CAACyD,MAAF,CAASqB,YAAT,CAAsB,YAAtB,CAAJ,EAAyC;AACxC,cAAA,MAAI,CAAClD,WAAL,CAAiB5B,CAAC,CAACyD,MAAnB,EAA2BzD,CAA3B;AACA;AACD,WAPF;AAQC,UAAA,UAAU,EAAE,oBAACA,CAAD,EAAO;AAClBwE,YAAAA,eAAe,CAACxE,CAAD,CAAf;AACA,WAVF;AAWC,UAAA,SAAS,EAAE,mBAACA,CAAD,EAAO;AACjB,YAAA,MAAI,CAAC0B,eAAL,CAAqB1B,CAArB;AACA,WAbF;AAcC,UAAA,QAAQ,EAAE,kBAACA,CAAD,EAAO;AAChB,gBAAI+E,KAAK,GAAG/E,CAAC,CAACgF,aAAF,CAAgBjE,UAA5B;AACAgE,YAAAA,KAAK,GAAGA,KAAK,CAACrB,OAAN,CAAc,UAACzE,IAAD,EAAU;AAC/B,kBAAI,CAACA,IAAI,CAACsE,WAAL,CAAiBlE,IAAjB,GAAwBvB,MAAzB,IAAmCmB,IAAI,CAAC8E,OAAL,KAAiB,MAAxD,EAAgE;AAC/D9E,gBAAAA,IAAI,CAACgG,MAAL;AACA;AACD,aAJO,CAAR;;AAKA,YAAA,MAAI,CAACjH,KAAL,CAAW4C,eAAX,CAA2BZ,CAAC,CAACgF,aAAF,CAAgBjE,UAA3C,EAAuD,MAAI,CAAC/C,KAAL,CAAWJ,KAAlE;AACA;AAtBF,UADD,CADD,CADD;AA8BA,OA/BD,MA+BO;AACN,4BACCmC;AAAK,UAAA,SAAS,EAAC;AAAf,wBACCA;AAAK,UAAA,KAAK,EAAE;AAAEmF,YAAAA,OAAO,EAAEZ,WAAW,CAACO,IAAZ,CAAiB,GAAjB,EAAsBxF,IAAtB,GAA6BvB,MAA7B,GAAsC,GAAtC,GAA4C;AAAvD;AAAZ,WACEwG,WAAW,CAACO,IAAZ,CAAiB,GAAjB,EAAsBxF,IAAtB,GAA6BvB,MAA7B,GACAqH,eAAe,CAACb,WAAW,CAACO,IAAZ,CAAiB,GAAjB,CAAD,CADf,GAGC,YAJH,CADD,CADD;AAWA;AACD,KAhED,MAgEO;AACN,0BAAO9E,yCAAP;AACA;AACD;;;EArJkBA,cAAK,CAACqF;;ACC1B,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACrH,KAAD,EAAW;AAAA,kBACAC,cAAQ,CAAC,KAAD,CADR;AAAA,MACrBgH,MADqB;AAAA,MACbK,SADa;;AAAA,mBAEFrH,cAAQ,CAAC,IAAD,CAFN;AAAA,MAErBsH,KAFqB;AAAA,MAEdC,QAFc;;AAI5B,MAAMC,OAAO,GAAGjH,YAAM,CAAC,IAAD,CAAtB;AACA,MAAMkH,SAAS,GAAGlH,YAAM,CAAC,IAAD,CAAxB;AAEA,MAAImH,IAAI,GAAG3H,KAAK,CAAC2H,IAAjB;AAEArG,EAAAA,eAAS,CAAC,YAAM;AACf,QAAIsG,UAAU,GAAG5H,KAAK,CAAC2H,IAAN,CAAWpE,KAAX,CAAiBhC,GAAjB,CAAqB,UAAAN,IAAI;AAAA,aAAIA,IAAI,CAACwB,UAAT;AAAA,KAAzB,EAA8CzB,MAA9C,CAAqD,UAAAC,IAAI;AAAA,aAAIA,IAAJ;AAAA,KAAzD,CAAjB;AACA,QAAI4G,aAAa,GAAGD,UAAU,CAAC5G,MAAX,CAAkB,UAAAC,IAAI;AAAA,aAAI,CAACA,IAAI,CAAC6G,KAAL,CAAW,2BAAX,CAAL;AAAA,KAAtB,CAApB;AAEA,QAAIhH,IAAI,GAAGd,KAAK,CAAC2H,IAAN,CAAWpE,KAAX,CAAiBhC,GAAjB,CAAqB,UAAAN,IAAI;AAAA,aAAIA,IAAI,CAACuC,IAAT;AAAA,KAAzB,EAAwCqD,IAAxC,CAA6C,GAA7C,CAAX;AACA,QAAIkB,GAAG,GAAG,uBAAV;;AAEA,QAAIA,GAAG,CAACC,IAAJ,CAASlH,IAAT,KAAkB,CAAC+G,aAAa,CAAC/H,MAArC,EAA6C;AAC5C0H,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACA,KAFD,MAEO;AACNA,MAAAA,QAAQ,CAAC,KAAD,CAAR;AACA;AACD,GAZQ,EAYN,CAACxH,KAAK,CAAC2H,IAAN,CAAWpE,KAAZ,CAZM,CAAT;AAcA,sBACCxB;AACC,uBAAewF,KADhB;AAEC,IAAA,GAAG,EAAEE,OAFN;AAGC,IAAA,GAAG,EAAEE,IAAI,CAAC/H,KAHX;AAIC,IAAA,SAAS,0BAAuB+H,IAAI,CAAC3E,MAAL,GAAc,cAAd,GAA+B,EAAtD,WAA4DiE,MAAM,GACxE,cADwE,GAExE,EAFM,WAEAM,KAAK,GAAG,aAAH,GAAmB,aAFxB,CAJV;AAOC,IAAA,OAAO,EAAE,mBAAM;AACdI,MAAAA,IAAI,CAACM,YAAL,CAAkBN,IAAI,CAAC/H,KAAvB;AACA;AATF,KAWE,CAAC2H,KAAD,iBAAUxF;AAAQ,aAAM;AAAd,sMAXZ,eAYCA;AAAK,IAAA,SAAS,EAAC;AAAf,kBACCA,6BAAC,KAAD;AACC,IAAA,KAAK,EAAE4F,IAAI,CAACpE,KADb;AAEC,IAAA,KAAK,EAAEoE,IAAI,CAAC/H,KAFb;AAGC,IAAA,UAAU,EAAE+H,IAAI,CAAC5D,UAHlB;AAIC,IAAA,aAAa,EAAE4D,IAAI,CAACO,aAJrB;AAKC,IAAA,KAAK,EAAEP,IAAI,CAACxE,KALb;AAMC,IAAA,QAAQ,EAAEwE,IAAI,CAAChH,QANhB;AAOC,IAAA,YAAY,EAAEgH,IAAI,CAAC/G,YAPpB;AAQC,IAAA,SAAS,EAAE+G,IAAI,CAACjF,SARjB;AASC,IAAA,eAAe,EAAEiF,IAAI,CAAC/E,eATvB;AAUC,IAAA,MAAM,EAAE+E,IAAI,CAAC3E,MAVd;AAWC,IAAA,WAAW,EAAE2E,IAAI,CAACQ,WAXnB;AAYC,IAAA,WAAW,EAAER,IAAI,CAACzE,WAZnB;AAaC,IAAA,sBAAsB,EAAEyE,IAAI,CAACf,sBAb9B;AAcC,IAAA,OAAO,EAAEa;AAdV,IADD,eAiBC1F;AAAK,IAAA,SAAS,EAAC;AAAf,kBACCA;AACC,IAAA,SAAS,EAAC,+BADX;AAEC,IAAA,IAAI,EAAC,QAFN;AAGC,IAAA,GAAG,EAAE2F,SAHN;AAIC,IAAA,OAAO,EAAE,iBAAC1F,CAAD,EAAO;AACfA,MAAAA,CAAC,CAACoG,eAAF;AACAd,MAAAA,SAAS,CAAC,IAAD,CAAT;AACAe,MAAAA,UAAU,CAAC,YAAM;AAChBV,QAAAA,IAAI,CAACW,oBAAL,CAA0BX,IAAI,CAAC/H,KAA/B;AACA0H,QAAAA,SAAS,CAAC,KAAD,CAAT;AACA,OAHS,EAGP,GAHO,CAAV;AAIA;AAXF,kBAaCvF,6BAAC,SAAD,OAbD,CADD,CAjBD,CAZD,EA+CE4F,IAAI,CAACpE,KAAL,IAAcoE,IAAI,CAACpE,KAAL,CAAWvC,MAAX,CAAkB,UAACC,IAAD;AAAA,WAAUA,IAAI,CAACiB,IAAf;AAAA,GAAlB,EAAuCpC,MAArD,gBACAiC;AAAI,IAAA,SAAS,EAAC,OAAd;AAAsB,IAAA,KAAK,EAAE;AAACwG,MAAAA,OAAO,QAAKZ,IAAI,CAAC3E,MAAL,GAAc,OAAd,GAAwB,MAA7B;AAAR;AAA7B,kBACCjB,0DACCA,2DADD,eAECA,mDAFD,eAGCA,2DAHD,CADD,EAME4F,IAAI,CAACpE,KAAL,CAAWhC,GAAX,CAAe,UAACN,IAAD,EAAOa,CAAP,EAAa;AAC5B,QAAIb,IAAI,CAACiB,IAAT,EAAe;AACd,UAAIC,SAAS,GAAGlB,IAAI,CAACwB,UAArB;AACA,UAAIP,IAAI,GAAGjB,IAAI,CAACiB,IAAhB;AACA,0BACCH;AAAI,QAAA,GAAG,EAAED;AAAT,sBACCC;AACC,QAAA,SAAS,EAAC,cADX;AAEC,QAAA,IAAI,EAAC,MAFN;AAGC,QAAA,YAAY,EAAEI,SAHf;AAIC,QAAA,QAAQ,EAAE,kBAACH,CAAD,EAAO;AAChB,cAAInC,GAAG,aAAO8H,IAAI,CAAC5D,UAAZ,CAAP;AACAlE,UAAAA,GAAG,CAAC8H,IAAI,CAAC/H,KAAN,CAAH,CAAgB2D,KAAhB,CAAsBzB,CAAtB,EAAyBW,UAAzB,GAAsCT,CAAC,CAACyD,MAAF,CAAS+C,KAA/C;AACAb,UAAAA,IAAI,CAACO,aAAL,CAAmBrI,GAAnB;AACA,SARF;AASC,QAAA,WAAW,EAAC;AATb,QADD,eAYCkC,uDACCA;AAAM,QAAA,SAAS,EAAC,WAAhB;AAA4B,QAAA,KAAK,EAAE;AAAE0G,UAAAA,UAAU,EAAExH,IAAI,CAACsF;AAAnB;AAAnC,SACErE,IADF,CADD,CAZD,eAiBCH,0CAAMd,IAAI,CAACuC,IAAX,CAjBD,eAkBCzB;AAAK,QAAA,SAAS,EAAC;AAAf,sBACCA;AACC,QAAA,SAAS,EAAC,aADX;AAEC,QAAA,OAAO,EAAE,iBAACC,CAAD,EAAO;AACfA,UAAAA,CAAC,CAACC,cAAF,CAAiBD,CAAjB;AACA2F,UAAAA,IAAI,CAACe,eAAL,CAAqBf,IAAI,CAAC/H,KAA1B,EAAiCkC,CAAjC;AACA6F,UAAAA,IAAI,CAAC1E,cAAL,CAAoB,CAAC0E,IAAI,CAACzE,WAA1B;AACA;AANF,sBAQCnB,6BAAC,SAAD,OARD,CADD,CAlBD,CADD;AAiCA;AACD,GAtCA,CANF,CADA,gBAgDCA,6BAACA,cAAD,CAAO,QAAP,OA/FH,CADD;AAoGA,CA3HD;;ACDA,IAAM4G,IAAI,GAAG5G,cAAK,CAAC6G,IAAN,CAAW,SAASD,IAAT,CAAc3I,KAAd,EAAqB;AAAA,kBAChBC,cAAQ,CAAC,KAAD,CADQ;AAAA,MACpCkD,KADoC;AAAA,MAC7BxC,QAD6B;;AAAA,mBAEAV,cAAQ,CAAC,IAAD,CAFR;AAAA,MAEpC4I,aAFoC;AAAA,MAErBC,gBAFqB;;AAAA,mBAGR7I,cAAQ,CAAC,IAAD,CAHA;AAAA,MAGpCyC,SAHoC;AAAA,MAGzB9B,YAHyB;;AAAA,mBAIdX,cAAQ,CAAC,KAAD,CAJM;AAAA,MAIpC8I,MAJoC;AAAA,MAI5BC,SAJ4B;;AAAA,mBAKJ/I,cAAQ,CAAC,KAAD,CALJ;AAAA,MAKpCiD,WALoC;AAAA,MAKvBD,cALuB;;AAAA,mBAMJhD,cAAQ,CAAC,IAAD,CANJ;AAAA,MAMpCqC,WANoC;AAAA,MAMvB2G,cANuB;AAS5C3H,EAAAA,eAAS,CACR,YAAM;AAEL,QAAIzB,GAAG,GAAGG,KAAK,CAAC+D,UAAN,CACRxC,GADQ,CACJ,UAACN,IAAD;AAAA,aAAUA,IAAI,CAACsC,KAAf;AAAA,KADI,EAER2F,IAFQ,GAGRlI,MAHQ,CAGD,UAACC,IAAD;AAAA,aAAUA,IAAI,CAACwB,UAAf;AAAA,KAHC,EAIRlB,GAJQ,CAIJ,UAACN,IAAD;AAAA,aAAW;AAAEiB,QAAAA,IAAI,EAAEjB,IAAI,CAACiB,IAAb;AAAmBO,QAAAA,UAAU,EAAExB,IAAI,CAACwB;AAApC,OAAX;AAAA,KAJI,CAAV;AAQA,QAAI0G,IAAI,GAAGtJ,GAAG,CAACmB,MAAJ,CAAW,UAACoI,CAAD,EAAItH,CAAJ,EAAOuH,CAAP;AAAA,aAAaA,CAAC,CAACC,SAAF,CAAY,UAACC,CAAD;AAAA,eAAOA,CAAC,CAAC9G,UAAF,KAAiB2G,CAAC,CAAC3G,UAA1B;AAAA,OAAZ,MAAsDX,CAAnE;AAAA,KAAX,CAAX;AACAmH,IAAAA,cAAc,CAACE,IAAD,CAAd;AACA,GAbO,EAcR,CAAEnJ,KAAK,CAAC+D,UAAR,CAdQ,CAAT;;AAiBA,MAAMkE,YAAY,GAAG,SAAfA,YAAe,CAACrI,KAAD,EAAW;AAC/BI,IAAAA,KAAK,CAACwJ,SAAN,CAAgB5J,KAAhB;AACA,GAFD;;AAIA,MAAMgD,eAAe,GAAG,SAAlBA,eAAkB,CAACnB,KAAD,EAAQ7B,KAAR,EAAkB;AACzC,QAAIC,GAAG,GAAG4J,KAAK,CAACC,IAAN,CAAWjI,KAAX,EAAkBT,MAAlB,CAAyB,UAACC,IAAD;AAAA,aAAUA,IAAI,CAACsE,WAAL,CAAiBlE,IAAjB,GAAwBvB,MAAlC;AAAA,KAAzB,CAAV;AAEA,AACAD,IAAAA,GAAG,GAAGA,GAAG,CAAC0B,GAAJ,CAAQ,UAACN,IAAD,EAAU;AACvB,UAAIA,IAAI,CAAC8E,OAAL,KAAiB,MAAjB,IAA4B9E,IAAI,CAAC0I,QAAL,KAAkB,OAAlB,IAA6B1I,IAAI,CAACsE,WAAL,CAAiBlE,IAAjB,GAAwBvB,MAArF,EAA8F;AAC7F,YAAIoC,IAAI,GAAGjB,IAAI,CAAC2E,OAAL,IAAgB3E,IAAI,CAAC2E,OAAL,CAAa1D,IAA7B,IAAqCjB,IAAI,CAAC2E,OAAL,CAAa1D,IAAb,CAAkBpC,MAAvD,GAAgEmB,IAAI,CAAC2E,OAAL,CAAa1D,IAA7E,GAAoF,IAA/F;;AACA,YAAIA,IAAJ,EAAU;AACTJ,AACA,iBAAO;AACN0B,YAAAA,IAAI,EAAEvC,IAAI,CAACsE,WAAL,CAAiBlE,IAAjB,EADA;AAENa,YAAAA,IAAI,EAAEA,IAFA;AAGNO,YAAAA,UAAU,EAAExB,IAAI,CAAC2E,OAAL,CAAazD;AAHnB,WAAP;AAKA,SAPD,MAOO;AACN,iBAAO;AAAEqB,YAAAA,IAAI,EAAEvC,IAAI,CAACsE,WAAL,CAAiBlE,IAAjB;AAAR,WAAP;AACA;AACD,OAZD,MAYO;AACN,eAAO,IAAP;AACA;AACD,KAhBK,CAAN;AAkBAxB,IAAAA,GAAG,GAAGA,GAAG,CAACmB,MAAJ,CAAW,UAACC,IAAD;AAAA,aAAUA,IAAV;AAAA,KAAX,CAAN;AAEAiD,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBtE,GAAnB;AAEA,QAAI+J,MAAM,aAAQ5J,KAAK,CAAC+D,UAAd,CAAV;AACA6F,IAAAA,MAAM,CAAChK,KAAD,CAAN,GAAgB;AAAEiK,MAAAA,GAAG,EAAEhK,GAAG,CAAC0B,GAAJ,CAAQ,UAACN,IAAD;AAAA,eAAUA,IAAI,CAACuC,IAAf;AAAA,OAAR,EAA6BqD,IAA7B,CAAkC,GAAlC,CAAP;AAA+CtD,MAAAA,KAAK,EAAE1D;AAAtD,KAAhB;AACAG,IAAAA,KAAK,CAACkI,aAAN,CAAoB0B,MAApB;AACA,GA7BD;;AA+BA,MAAME,SAAS,GAAG,SAAZA,SAAY,CAACrI,KAAD,EAAW;AAC5B,WAAOA,KAAK,CAACF,GAAN,CAAU,UAACN,IAAD,EAAOrB,KAAP,EAAiB;AACjC,UAAI2D,KAAK,GAAGtC,IAAI,CAACsC,KAAL,CAAWhC,GAAX,CAAe,UAACwI,GAAD,EAAS;AACnC,4BAAYA,GAAZ;AAAiBxD,UAAAA,KAAK,EAAE5G,QAAQ,CAACoK,GAAG,CAACvG,IAAJ,CAAS1D,MAAV;AAAhC;AACA,OAFW,CAAZ;AAIA,UAAI6H,IAAI,GAAG;AACV/H,QAAAA,KAAK,EAAEA,KADG;AAEVoD,QAAAA,MAAM,EAAEpD,KAAK,KAAKI,KAAK,CAACgD,MAFd;AAGVO,QAAAA,KAAK,EAAEA,KAHG;AAIVQ,QAAAA,UAAU,EAAE/D,KAAK,CAAC+D,UAJR;AAKVmE,QAAAA,aAAa,EAAElI,KAAK,CAACkI,aALX;AAMVD,QAAAA,YAAY,EAAEA,YANJ;AAOV9E,QAAAA,KAAK,EAAEA,KAPG;AAQVxC,QAAAA,QAAQ,EAAEA,QARA;AASVmI,QAAAA,gBAAgB,EAAEA,gBATR;AAUVpG,QAAAA,SAAS,EAAEA,SAVD;AAWV9B,QAAAA,YAAY,EAAEA,YAXJ;AAYVuH,QAAAA,WAAW,EAAEnI,KAAK,CAACmI,WAZT;AAaVjF,QAAAA,WAAW,EAAEA,WAbH;AAcVD,QAAAA,cAAc,EAAEA,cAdN;AAeVqF,QAAAA,oBAAoB,EAAEA,oBAfZ;AAgBVI,QAAAA,eAAe,EAAE1I,KAAK,CAAC0I,eAhBb;AAiBV9F,QAAAA,eAAe,EAAEA,eAjBP;AAkBVgE,QAAAA,sBAAsB,EAAE5G,KAAK,CAAC4G;AAlBpB,OAAX;AAqBA,0BAAO7E,6BAAC,SAAD;AAAW,QAAA,GAAG,EAAEnC,KAAhB;AAAuB,QAAA,IAAI,EAAE+H,IAA7B;AAAmC,QAAA,MAAM,EAAE3H,KAAK,CAACgK;AAAjD,QAAP;AACA,KA3BM,CAAP;AA4BA,GA7BD;;AA+BA,MAAM1B,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAC1I,KAAD,EAAW;AACvC,QAAIC,GAAG,aAAQG,KAAK,CAAC+D,UAAd,CAAP;;AACA,QAAInE,KAAK,KAAK,CAAC,CAAf,EAAkB;AACjBC,MAAAA,GAAG,CAACoK,MAAJ,CAAWrK,KAAX,EAAkB,CAAlB;AACAsE,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCtE,GAApC;AACAG,MAAAA,KAAK,CAACkI,aAAN,CAAoBrI,GAApB;AACAG,MAAAA,KAAK,CAACwJ,SAAN,CAAgB,IAAhB;AACA;AACD,GARD;;AAUAtF,EAAAA,OAAO,CAACC,GAAR,CAAYzB,SAAZ;;AAEA,MAAI1C,KAAK,CAAC+D,UAAV,EAAsB;AACrB,wBACChC,6BAACA,cAAD,CAAO,QAAP,qBACCA,yCAAK+H,SAAS,CAAC9J,KAAK,CAAC+D,UAAP,CAAd,CADD,eAEChC,6BAAC,KAAD;AACC,MAAA,QAAQ,EAAEpB,QADX;AAEC,MAAA,KAAK,EAAEwC,KAFR;AAGC,MAAA,aAAa,EAAE0F,aAHhB;AAIC,MAAA,SAAS,EAAEnG,SAJZ;AAKC,MAAA,YAAY,EAAE9B,YALf;AAMC,MAAA,MAAM,EAAEZ,KAAK,CAACgD,MANf;AAOC,MAAA,UAAU,EAAEhD,KAAK,CAAC+D,UAPnB;AAQC,MAAA,aAAa,EAAE/D,KAAK,CAACkI,aARtB;AASC,MAAA,SAAS,EAAEc,SATZ;AAUC,MAAA,MAAM,EAAED,MAVT;AAWC,MAAA,eAAe,EAAEnG,eAXlB;AAYC,MAAA,WAAW,EAAEM,WAZd;AAaC,MAAA,cAAc,EAAED,cAbjB;AAcC,MAAA,QAAQ,EAAEjD,KAAK,CAACE,QAAN,CAAegJ,IAAf,EAdX;AAeC,MAAA,WAAW,EAAE5G,WAfd;AAgBC,MAAA,cAAc,EAAE2G;AAhBjB,MAFD,CADD;AAuBA,GAxBD,MAwBO;AACN,WAAO,IAAP;AACA;AACD,CAnIY,CAAb;;ACLO,IAAMiB,aAAa,GAAG,SAAhBA,aAAgB,CAACC,IAAD,EAAOrJ,IAAP,EAAasJ,KAAb,EAAoBC,OAApB,EAAgC;AAC3D,MAAItC,GAAG,GAAG,IAAIuC,MAAJ,CAAWF,KAAX,CAAV;;AACA,MAAIrC,GAAG,CAACC,IAAJ,CAASlH,IAAT,CAAJ,EAAoB;AAClBqJ,IAAAA,IAAI,CAACI,iBAAL,CAAuB,EAAvB;AACD,GAFD,MAEO;AACLJ,IAAAA,IAAI,CAACI,iBAAL,CAAuBF,OAAvB;AACD;;AACDF,EAAAA,IAAI,CAACK,cAAL;AAEA,SAAOzC,GAAG,CAACC,IAAJ,CAASlH,IAAT,CAAP;AACD,CAVM;;ACMP,SAAS2J,aAAT,CAAuBzK,KAAvB,EAA8B;AAAA,kBACAC,cAAQ,CAACD,KAAK,CAAC0K,MAAP,CADR;AAAA,MACrBA,MADqB;;AAE5B,MAAMxK,QAAQ,GAAGF,KAAK,CAACE,QAAvB;AACA,MAAMyK,cAAc,GAAG3K,KAAK,CAAC2K,cAA7B;;AAH4B,mBAKJ1K,cAAQ,CAAC,EAAD,CALJ;AAAA,MAKrBiB,IALqB;AAAA,MAKf0J,OALe;;AAAA,mBAMQ3K,cAAQ,CAAC,EAAD,CANhB;AAAA,MAMrB8D,UANqB;AAAA,MAMTmE,aANS;;AAAA,mBAOAjI,cAAQ,CAAC,IAAD,CAPR;AAAA,MAOrB+C,MAPqB;AAAA,MAObwG,SAPa;;AAAA,mBAQcvJ,cAAQ,CAAC,IAAD,CARtB;AAAA,MAQrB4K,aARqB;AAAA,MAQNC,gBARM;;AAAA,mBASM7K,cAAQ,CAAC,IAAD,CATd;AAAA,MASrB8K,SATqB;AAAA,MASVC,YATU;;AAW5B,MAAMC,kBAAkB,GAAGzK,YAAM,CAAC,IAAD,CAAjC;AAEA,MAAIwJ,MAAM,GAAGP,KAAK,CAACC,IAAN,CAAW7G,QAAQ,CAACwC,gBAAT,CAA0B,sBAA1B,CAAX,CAAb;;AAGA,MAAMuB,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAM;AACnCqE,IAAAA,kBAAkB,CAAC7G,OAAnB,CAA2BC,KAA3B;AACA4G,IAAAA,kBAAkB,CAAC7G,OAAnB,CAA2BoE,KAA3B,GAAmC,EAAnC;AACAgB,IAAAA,SAAS,CAAC,IAAD,CAAT;AACD,GAJD;;AAOA,WAASrB,WAAT,GAAuB;AACrB,QAAItI,GAAG,aAAOkE,UAAP,CAAP;AACA,QAAImH,YAAY,GAAG;AACjBrB,MAAAA,GAAG,EAAEgB,aAAa,GAAGA,aAAH,GAAmB,EADpB;AAEjBtH,MAAAA,KAAK,EAAE,CAAC;AAAEC,QAAAA,IAAI,EAAEqH,aAAa,GAAGA,aAAH,GAAmB;AAAxC,OAAD;AAFU,KAAnB;AAIAhL,IAAAA,GAAG,IAAIqL,YAAJ,SAAqBrL,GAArB,CAAH;AACAqI,IAAAA,aAAa,CAACrI,GAAD,CAAb;AACA2J,IAAAA,SAAS,CAAC,CAAD,CAAT;AACD;;AAED,MAAMd,eAAe,GAAG,SAAlBA,eAAkB,CAACyC,cAAD,EAAiBvL,KAAjB,EAA2B;AACjD,QAAIC,GAAG,aAAOkE,UAAP,CAAP;AACA,QAAIR,KAAK,GAAG1D,GAAG,CAACsL,cAAD,CAAH,CAAoB5H,KAAhC;AACAA,IAAAA,KAAK,CAAC3D,KAAD,CAAL,GAAe;AACb4D,MAAAA,IAAI,EAAED,KAAK,CAAC3D,KAAD,CAAL,CAAa4D;AADN,KAAf;AAIA0E,IAAAA,aAAa,CAACrI,GAAD,CAAb;AACD,GARD;;AAWAyB,EAAAA,eAAS,CAAC,YAAM;AACd,QAAIoJ,MAAJ,EAAY;AACVE,MAAAA,OAAO,CAACF,MAAM,CAACxJ,IAAR,CAAP;AACAgH,MAAAA,aAAa,CAACwC,MAAM,CAAC3G,UAAR,CAAb;AACD;AACF,GALQ,EAKN,CAAC2G,MAAD,CALM,CAAT;AAOApJ,EAAAA,eAAS,CAAC,YAAM;AAEd4C,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2B6F,MAAM,CAAClK,MAAP,GAAgB,CAA3C;;AACA,QAAIoB,IAAI,IAAI6C,UAAZ,EAAwB;AACtB/D,MAAAA,KAAK,CAACoL,QAAN,cACKV,MADL;AAEExJ,QAAAA,IAAI,EAAEA,IAFR;AAGE6C,QAAAA,UAAU,EAAEA;AAHd,UAIGiG,MAAM,CAAClK,MAAP,GAAgB,CAJnB;AAKD;AACF,GAVQ,EAUN,CAACoB,IAAD,EAAO6C,UAAP,CAVM,CAAT;;AAYA,MAAI2G,MAAJ,EAAY;AACV,wBACE3I;AAAK,MAAA,SAAS,EAAC;AAAf,oBACEA;AAAS,MAAA,SAAS,EAAC;AAAnB,oBACEA,uDAEEA;AAAK,MAAA,SAAS,EAAC;AAAf,oBACEA;AAAI,MAAA,SAAS,EAAC;AAAd,qBADF,eAEEA;AACE,MAAA,QAAQ,EAAE,kBAAAC,CAAC,EAAI;AACbA,QAAAA,CAAC,CAACC,cAAF;AACD;AAHH,oBAKEF;AACE,yBAAegJ,SADjB;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,YAAY,EAAE7J,IAAI,GAAGA,IAAH,GAAU,EAH9B;AAIE,MAAA,WAAW,EAAC,aAJd;AAKE,MAAA,SAAS,EAAC,+BALZ;AAME,MAAA,QAAQ,EAAE,kBAAAc,CAAC,EAAI;AACb,YAAIqI,OAAO,GACT,wKADF;AAEA,YAAI9C,KAAK,GAAG2C,aAAa,CACvBlI,CAAC,CAACyD,MADqB,EAEvBzD,CAAC,CAACyD,MAAF,CAAS+C,KAFc,EAGvB,2BAHuB,EAIvB6B,OAJuB,CAAzB;AAOAW,QAAAA,YAAY,CAACzD,KAAD,CAAZ;AACAqD,QAAAA,OAAO,CAAC5I,CAAC,CAACyD,MAAF,CAAS+C,KAAV,CAAP;AACD,OAlBH;AAmBE,MAAA,QAAQ;AAnBV,MALF,CAFF,CAFF,eAiCEzG;AAAK,MAAA,SAAS,EAAC;AAAf,oBACEA;AAAI,MAAA,SAAS,EAAC;AAAd,oBADF,eAEEA;AAAK,MAAA,SAAS,EAAC;AAAf,oBACEA;AACE,MAAA,QAAQ,EAAE,kBAAAC,CAAC,EAAI;AACbA,QAAAA,CAAC,CAACC,cAAF;;AACA,YAAI4I,aAAJ,EAAmB;AACjB1C,UAAAA,WAAW;AACX2C,UAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAG,UAAAA,kBAAkB,CAAC7G,OAAnB,CAA2BoE,KAA3B,GAAmC,EAAnC;AACD;AACF;AARH,oBAUEzG;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,+BAFZ;AAGE,MAAA,WAAW,EAAC,uBAHd;AAIE,MAAA,QAAQ,EAAE,kBAAAC,CAAC;AAAA,eAAI8I,gBAAgB,CAAC9I,CAAC,CAACyD,MAAF,CAAS+C,KAAV,CAApB;AAAA,OAJb;AAKE,MAAA,GAAG,EAAEyC,kBALP;AAME,MAAA,OAAO,EAAE,mBAAM;AACbzB,QAAAA,SAAS,CAAC,IAAD,CAAT;AACD;AARH,MAVF,CADF,eAsBEzH,6BAACsJ,IAAD;AACE,MAAA,WAAW,EAAElD,WADf;AAEE,MAAA,MAAM,EAAEnF,MAFV;AAGE,MAAA,SAAS,EAAEwG,SAHb;AAIE,MAAA,UAAU,EAAEzF,UAJd;AAKE,MAAA,aAAa,EAAEmE,aALjB;AAME,MAAA,eAAe,EAAEQ,eANnB;AAOE,MAAA,QAAQ,GAAGxI,QAAH,SAAgByK,cAAhB,CAPV;AAQE,MAAA,sBAAsB,EAAE/D,sBAR1B;AASE,MAAA,MAAM,EAAEoD;AATV,MAtBF,CAFF,CAjCF,CADF,CADF,CADF;AA6ED,GA9ED,MA8EO;AACL,WAAO,IAAP;AACD;AACF;;;;ICnJYsB,gBAAgB,GAAG,SAAnBA,gBAAmB,OAAc;AAAA,MAAX9H,IAAW,QAAXA,IAAW;AAC5C,sBAAOzB;AAAK,IAAA,SAAS,EAAEwJ,MAAM,CAACvD;AAAvB,4BAAiDxE,IAAjD,CAAP;AACD,CAFM;AAIP,IAAagI,YAAY,GAAG,SAAfA,YAAe,CAACxL,KAAD,EAAW;AACrC,sBAAO+B,6BAAC,aAAD;AAAe,IAAA,MAAM,EAAE,EAAvB;AAA2B,IAAA,QAAQ,EAAE,EAArC;AAAyC,IAAA,cAAc,EAAE,EAAzD;AAA6D,IAAA,QAAQ,EAAE,oBAAM;AAACmC,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AAAsB;AAApG,IAAP;AACD,CAFM;;;;;"}