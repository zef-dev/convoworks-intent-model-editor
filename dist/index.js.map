{"version":3,"file":"index.js","sources":["../src/assets/icon_trash.jsx","../src/components/EntityComponent/EntityValue.jsx","../src/components/EntityComponent/EntityValues.jsx","../src/helpers/validations.jsx","../src/components/EntityComponent/EntityDetails.jsx","../src/helpers/common_constants.jsx","../src/components/IntentComponent/Dropdown.jsx","../src/components/IntentComponent/utterance/Utterance.jsx","../src/components/IntentComponent/IntentUtterances.jsx","../src/components/IntentComponent/IntentDetails.jsx","../src/index.js"],"sourcesContent":["import React from 'react';\n\nfunction IconTrash() {\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n\t\t\t<g fill=\"none\" fill-rule=\"evenodd\" stroke=\"#1A1A1A\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n\t\t\t\t<path d=\"M2.4 6.5v7c0 1.105.835 2 1.867 2h7.466c1.032 0 1.867-.895 1.867-2v-7M1.467 3.5h13.066M6.133 3.5v-3h3.734v3M8 7.5v5M10.8 7.5v5M5.2 7.5v5\" />\n\t\t\t</g>\n\t\t</svg>\n\t);\n}\n\nexport { IconTrash };\n","import React, { useState, useRef, useEffect } from 'react';\nimport { IconTrash } from '../../assets/icon_trash.jsx';\n\nconst EntityValue = (props) => {\n\tconst [ value, setValue ] = useState(props.item.value);\n\tconst [ synonyms, setSynonyms ] = useState(props.item.synonyms);\n\tconst [ newSynonym, setNewSynonym ] = useState('');\n\tconst [ remove, setRemove ] = useState(false);\n\tconst synonymInput = useRef(null);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tprops.handleUpdate([ ...props.values ], props.index, {\n\t\t\t\tvalue: value,\n\t\t\t\tsynonyms: synonyms\n\t\t\t});\n\t\t},\n\t\t[ value, synonyms ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (newSynonym) {\n\t\t\t\tif (synonyms) {\n\t\t\t\t\tsetSynonyms([ ...synonyms, newSynonym ]);\n\t\t\t\t} else {\n\t\t\t\t\tsetSynonyms(newSynonym);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t},\n\t\t[ newSynonym ]\n\t);\n\n\tconst handleNewSynonym = (target) => {\n\t\tif (target.current.value.length > 0) {\n\t\t\tsetNewSynonym(target.current.value);\n\t\t\ttarget.current.value = '';\n\t\t} else {\n\t\t\tsetNewSynonym('');\n\t\t}\n\t};\n\n\t// synonyms\n\tconst removeSynonym = (value) => {\n\t\tlet arr = [ ...synonyms ];\n\t\tlet index = arr.indexOf(value);\n\n\t\tif (index !== -1) {\n\t\t\tarr.splice(index, 1);\n\t\t\tsetSynonyms(arr);\n\t\t}\n\t};\n\n\tconst makeSynonyms = (items, active) => {\n\t\tif (items) {\n\t\t\treturn (\n\t\t\t\titems &&\n\t\t\t\titems.map((item, i) => {\n\t\t\t\t\tif (item && !active) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"synonym\" key={i}>\n\t\t\t\t\t\t\t\t{item}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={i} className=\"synonym\">\n\t\t\t\t\t\t\t\t{item}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"synonym__remove\"\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tremoveSynonym(item);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t&#10005;\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t};\n\n\tconst handleRemove = (e) => {\n\t\te.stopPropagation();\n\t\tsetRemove(true);\n\t\tsetTimeout(() => {\n\t\t\tprops.removeValue(props.index);\n\t\t\tsetRemove(false);\n\t\t}, 220);\n\t};\n\n\tif (props.activeValue !== props.index) {\n\t\treturn (\n\t\t\t<li\n\t\t\t\tclassName={`item item--entity ${remove ? 'item--remove' : ''}`}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tprops.setActiveValue(props.index);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div className=\"item__inner\">\n\t\t\t\t\t<div className=\"grid\">\n\t\t\t\t\t\t<div className=\"cell cell--3--small\">\n\t\t\t\t\t\t\t<div className=\"item__value item__value--primary\">{value}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"cell cell--9--small\">\n\t\t\t\t\t\t\t<div className=\"item__values\">{makeSynonyms(synonyms, false)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"item__buttons\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn--remove btn--remove--main\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\thandleRemove(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconTrash />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t);\n\t} else {\n\t\treturn (\n\t\t\t<li className={`item item--entity item--active ${remove ? 'item--remove' : ''}`}>\n\t\t\t\t<div className=\"item__inner\">\n\t\t\t\t\t<div className=\"grid\">\n\t\t\t\t\t\t<div className=\"cell cell--3--small\">\n\t\t\t\t\t\t\t<div className=\"item__value item__value--primary\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tdata-input=\"true\"\n\t\t\t\t\t\t\t\t\tclassName=\"editor-input\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tdefaultValue={value}\n\t\t\t\t\t\t\t\t\tplaceholder=\"Enter value\"\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tsetValue(e.target.value);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"cell cell--9--small\">\n\t\t\t\t\t\t\t<div className=\"item__values\">\n\t\t\t\t\t\t\t\t{makeSynonyms(synonyms, true)}\n\t\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\thandleNewSynonym(synonymInput);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclassName=\"editor-input\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tstyle={{ marginLeft: '0.625rem' }}\n\t\t\t\t\t\t\t\t\t\tref={synonymInput}\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter synonym\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => {}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<input className=\"editor-input\" type=\"submit\" hidden={true} />\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"item__buttons\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn--remove btn--remove--main\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\thandleRemove(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconTrash />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t);\n\t}\n};\n\nexport default EntityValue;\n","import React, { useState, useEffect } from 'react';\nimport EntityValue from './EntityValue.jsx';\n\nfunction EntityValues(props) {\n\tconst [ activeValue, setActiveValue ] = useState(null);\n\n\tfunction handleUpdate(arr, index, item) {\n\t\tarr[index] = {\n\t\t\tvalue: item.value,\n\t\t\tsynonyms: item.synonyms\n\t\t};\n\n\t\tprops.setValues(arr);\n\t}\n\n\tconst makeItems = (items) => {\n\t\tif (items) {\n\t\t\treturn items.map((item, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<React.Fragment key={index}>\n\t\t\t\t\t\t<EntityValue\n\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\tvalues={props.values}\n\t\t\t\t\t\t\tremoveValue={props.removeValue}\n\t\t\t\t\t\t\thandleUpdate={handleUpdate}\n\t\t\t\t\t\t\tactiveValue={activeValue}\n\t\t\t\t\t\t\tsetActiveValue={setActiveValue}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tif (props.values) {\n\t\treturn <div>{makeItems(props.values)}</div>;\n\t} else {\n\t\treturn null\n\t}\n}\n\nexport default EntityValues;\n","export const validateInput = (elem, term, regex, message) => {\n  let reg = new RegExp(regex);\n  if (reg.test(term)) {\n    elem.setCustomValidity('');\n  } else {\n    elem.setCustomValidity(message);\n  }\n  elem.reportValidity();\n\n  return reg.test(term);\n};\n","import React, { useState, useEffect } from 'react';\nimport EntityValues from './EntityValues.jsx';\nimport _ from 'lodash';\nimport { useRef } from 'react';\nimport { validateInput } from '../../helpers/validations.jsx';\n\nfunction EntityDetails(props) {\n\tconst [ entity, setEntity ] = useState(null);\n\tconst [ name, setName ] = useState(null);\n\tconst [ values, setValues ] = useState(null);\n\tconst [ newValue, setNewValue ] = useState(null);\n\tconst [valid, setValid] = useState(true);\n\tconst valueInput = useRef(null);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (!entity) {\n\t\t\t\tsetEntity(props.entity);\n\t\t\t}\n\t\t},\n\t\t[ props.entity ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetName(props.entity.name);\n\t\t\tsetValues(props.entity.values);\n\t\t},\n\t\t[ entity ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (name && values) {\n\t\t\t\tprops.onUpdate({\n\t\t\t\t\tname: name,\n\t\t\t\t\tvalues: values\n\t\t\t\t}, valid);\n\t\t\t}\n\t\t},\n\t\t[ name, values ]\n\t);\n\n\t// add new value to value array\n\tconst addNewValue = () => {\n\t\tlet val = {\n\t\t\tvalue: newValue,\n\t\t\tsynonyms: []\n\t\t};\n\n\t\tlet arr = [...values, val];\n\t\tsetValues(arr);\n\t};\n\n\tconst removeValue = (index) => {\n\t\tlet arr = [ ...values ];\n\t\tif (index !== -1) {\n\t\t\tarr.splice(index, 1);\n\t\t\tsetValues(arr);\n\t\t}\n\t};\n\n\tif (values) {\n\t\treturn (\n\t\t\t<div className=\"convo-details\">\n\t\t\t\t<section className=\"layout--editor-content\">\n\t\t\t\t\t<section className=\"entities-editor\">\n\t\t\t\t\t\t{/* Entity name value */}\n\t\t\t\t\t\t<div className=\"margin--30--large\">\n\t\t\t\t\t\t\t<h3 className=\"margin--10--large\">Entity name</h3>\n\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tdefaultValue={name ? name : ''}\n\t\t\t\t\t\t\t\t\tplaceholder=\"Entity name\"\n\t\t\t\t\t\t\t\t\tclassName=\"editor-input input--item-name\"\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tlet message = 'Entity names shall begin with alphabetic characters from a to Z. The entity name may contain multiple underscores per word. Entity names shall not contain any numbers at all or soecial characters other than undersocres.'\n\t\t\t\t\t\t\t\t\t\tlet validate = validateInput(e.target, e.target.value, '^[A-Za-z](_*[A-Za-z])*_*$', message);\n\t\t\t\t\t\t\t\t\t\tsetValid(validate);\n\t\t\t\t\t\t\t\t\t\tsetName(e.target.value);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* Entity words */}\n\t\t\t\t\t\t<div className=\"margin--50--large\">\n\t\t\t\t\t\t\t<h3 className=\"font--18--large margin--10--large\">Values</h3>\n\t\t\t\t\t\t\t<div className=\"margin--24--large\">\n\t\t\t\t\t\t\t\t<EntityValues values={values} setValues={setValues} removeValue={removeValue} />\n\t\t\t\t\t\t\t\t<form onSubmit={(e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (newValue) {\n\t\t\t\t\t\t\t\t\t\taddNewValue();\n\t\t\t\t\t\t\t\t\t\tsetNewValue(null);\n\t\t\t\t\t\t\t\t\t\tvalueInput.current.value = '';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"editor-input input--add-field\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter reference value\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setNewValue(e.target.value)}\n\t\t\t\t\t\t\t\t\t\tref={valueInput}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\treturn null;\n\t}\n}\n\nexport default EntityDetails;\n","export const getRandomColor = () => {\n\tvar letters = \"0123456789ABCDEF\";\n\tvar color = \"#\";\n\n\tfor (var i = 0; i < 6; i++) {\n\t\tcolor += letters[Math.floor(Math.random() * 16)];\n\t}\n\treturn color;\n};\n\nexport const stringToColor = (value) => {\n\treturn value.getHashCode().intToHSL();\n}\n\nString.prototype.getHashCode = function () {\n\tvar hash = 0;\n\tif (this.length == 0) return hash;\n\tfor (var i = 0; i < this.length; i++) {\n\t\thash = this.charCodeAt(i) + ((hash << 5) - hash);\n\t\thash = hash & hash; // Convert to 32bit integer\n\t}\n\treturn hash;\n};\n\nNumber.prototype.intToHSL = function () {\n\tvar shortened = this % 220;\n\treturn \"hsl(\" + shortened + \",100%, 80%)\";\n};\n\n\nexport const getCaretCharacterOffsetWithin = (element) => {\n\tvar caretOffset = 0;\n\tvar doc = element.ownerDocument || element.document;\n\tvar win = doc.defaultView || doc.parentWindow;\n\tvar sel;\n\tif (typeof win.getSelection != \"undefined\") {\n\t\tsel = win.getSelection();\n\t\tif (sel.rangeCount > 0) {\n\t\t\tvar range = win.getSelection().getRangeAt(0);\n\t\t\tvar preCaretRange = range.cloneRange();\n\t\t\tpreCaretRange.selectNodeContents(element);\n\t\t\tpreCaretRange.setEnd(range.endContainer, range.endOffset);\n\t\t\tcaretOffset = preCaretRange.toString().length;\n\t\t}\n\t} else if ((sel = doc.selection) && sel.type != \"Control\") {\n\t\tvar textRange = sel.createRange();\n\t\tvar preCaretTextRange = doc.body.createTextRange();\n\t\tpreCaretTextRange.moveToElementText(element);\n\t\tpreCaretTextRange.setEndPoint(\"EndToEnd\", textRange);\n\t\tcaretOffset = preCaretTextRange.text.length;\n\t}\n\treturn caretOffset;\n}\n\nexport const getColor = (index) => {\n\tlet arr = [\n\t\t\"#56ebd3\",\n\t\t\"#fbacf6\",\n\t\t\"#9ee786\",\n\t\t\"#e4b5ff\",\n\t\t\"#c2e979\",\n\t\t\"#20d8fd\",\n\t\t\"#e8d25c\",\n\t\t\"#42edec\",\n\t\t\"#f3c46f\",\n\t\t\"#5cefba\",\n\t\t\"#e8de7a\",\n\t\t\"#7ee8c0\",\n\t\t\"#e8d98c\",\n\t\t\"#88e99a\",\n\t\t\"#cfdd73\",\n\t\t\"#8be8ad\",\n\t\t\"#dff799\",\n\t\t\"#b5eaa1\",\n\t\t\"#c2d681\",\n\t\t\"#b5e287\",\n\t];\n\n\treturn arr[index % arr.length]\n};\n\n// Move caret to a specific point in a DOM element\nexport const setCaretPosition = (el, pos) => {\n\n\t// Loop through all child nodes\n\tfor (var node of el.childNodes) {\n\t\tif (node.nodeType == 3) { // we have a text node\n\t\t\tif (node.length >= pos) {\n\t\t\t\t// finally add our range\n\t\t\t\tvar range = document.createRange(),\n\t\t\t\t\tsel = window.getSelection();\n\t\t\t\trange.setStart(node, pos);\n\t\t\t\trange.collapse(true);\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t\treturn -1; // we are done\n\t\t\t} else {\n\t\t\t\tpos -= node.length;\n\t\t\t}\n\t\t} else {\n\t\t\tpos = setCaretPosition(node, pos);\n\t\t\tif (pos == -1) {\n\t\t\t\treturn -1; // no need to finish the for loop\n\t\t\t}\n\t\t}\n\t}\n\treturn pos; // needed because of recursion stuff\n}\n","import React, { useState, useEffect, useRef } from 'react';\nimport useOnclickOutside from 'react-cool-onclickoutside';\nimport TextInput from 'react-autocomplete-input';\nimport 'react-autocomplete-input/dist/bundle.css';\n\nfunction Dropdown(props) {\n\tconst [entities, setEntities] = useState(props.entities);\n\tconst [allEntities, setAllEntities] = useState(props.entities);\n\tconst [entitiesNames, setEntitiesNames] = useState([]);\n\tconst input = useRef();\n\n\tconst modalRef = useOnclickOutside(() => {\n\t\tprops.setSelection(null);\n\t});\n\n\tconst filterEntities = (term) => {\n\t\tlet arr = [...allEntities];\n\t\tlet filteredArr = arr.filter(\n\t\t\t(item) => item.name && item.name.toLowerCase().includes(term.trim().toLowerCase())\n\t\t);\n\n\t\tsetEntities(filteredArr);\n\t};\n\n\tuseEffect(\n\t\t() => {\n\t\t\tlet arr = entities\n\t\t\t\t.map((item) => {\n\t\t\t\t\treturn item.name;\n\t\t\t\t})\n\t\t\t\t.filter((item) => item);\n\t\t\t//console.log(arr)\n\t\t\tsetEntitiesNames(arr);\n\t\t},\n\t\t[entities]\n\t);\n\n\n\tif (entities) {\n\n\t\tlet dropdownStyles = {\n\t\t\tposition: 'absolute',\n\t\t\ttop: '100%',\n\t\t\ttransition: 'all 220ms ease-in-out',\n\t\t\tvisibility: props.dropdownState.active ? 'visible' : 'hidden',\n\t\t\topacity: props.dropdownState.active ? '1' : '0',\n\t\t\tleft: props.dropdownState.position\n\t\t}\n\n\t\treturn (\n\t\t\t<div class=\"dropdown\" ref={modalRef} style={dropdownStyles}>\n\t\t\t\t<header className=\"dropdown__header\">\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tComponent=\"input\"\n\t\t\t\t\t\ttrigger=\"\"\n\t\t\t\t\t\toptions={entitiesNames}\n\t\t\t\t\t\tspaceRemovers={[]}\n\t\t\t\t\t\tmatchAny={true}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tfilterEntities(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tref={input}\n\t\t\t\t\t\tclassName=\"dropdown__search editor-input\"\n\t\t\t\t\t\tplaceholder=\"Filter entities\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div class=\"dropdown__selection\">Selection: <strong>{props.selection && props.selection.toString()}</strong></div>\n\t\t\t\t</header>\n\t\t\t\t<div class=\"dropdown__items\">\n\t\t\t\t\t{entities[0] && entities[0].map((item, i) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tprops.tagSelection(item.name, item.name)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t@\n\t\t\t\t\t\t\t\t{item.name}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\treturn null;\n\t}\n}\n\nexport default Dropdown;\n","import React, { useRef, useState, useEffect } from 'react'\nimport '@yaireo/tagify/src/tagify.scss'\nimport rangy from 'rangy'\nimport _ from 'lodash'\nimport ContentEditable from 'react-contenteditable'\nimport { getCaretCharacterOffsetWithin, stringToColor, setCaretPosition } from '../../../helpers/common_constants'\nimport Dropdown from '../Dropdown'\nimport { IconTrash } from '../../../assets/icon_trash'\n\nexport const Utterance = (props) => {\n    const [dropdownState, setDropdownState] = useState({\n        position: 0,\n        active: false\n    });\n\n    const [selection, setSelection] = useState(null)\n    const [whitelist, setWhitelist] = useState([]);\n    const [valid, setValid] = useState(true);\n\n    const active = props.active === props.index;\n\n    const input = useRef(null);\n    const text = useRef(null);\n    const inputWrapper = useRef('');\n    const cursorPosition = useRef(null);\n\n    /* handle validation */\n    useEffect(() => {\n        let expression = props.utterance.model.filter(item => !item.type).map(item => item.text).join(' ').trim();\n        let slotValues = props.utterance.model.filter(item => item.slot_value).map(item => item.slot_value);\n        let reg = /^[a-zA-Z][a-zA-Z/\"/'/`/\\s]*$/;\n\n        if (whitelist.length > 0 && expression.length > 0) {\n            setValid((reg.test(expression)))\n        } else if (whitelist.length > 0 && expression.length < 1) {\n            setValid(true);\n        } else {\n            setValid(true)\n        }\n\n    }, [props.utterance.model])\n\n    useEffect(() => {\n        /* \n        MAP MODEL TO STRING\n        Object with type param are mapped to MARK tags while those without are mapped to text NODES.\n        This is done only on initial component render.\n        */\n\n        if (props.utterance.model) {\n            let str = '';\n            if (props.utterance.model.length) {\n                str = props.utterance.model.map(item => {\n                    if (item.type) {\n                        return `<mark data-type=\"${item.type}\" data-slot-value=\"${item.slot_value}\" data-text=\"${item.text}\" data-color=\"${stringToColor(item.text)}\" style=\"background:${stringToColor(item.text)}\">${item.text}</mark>`\n                    } else {\n                        return item.text\n                    }\n                }).join(' ');\n            }\n\n            input.current.innerHTML = str + ' ';\n            text.current = str + ' ';\n            mapToWhitelist();\n        }\n    }, [props.stateChange, active]);\n\n    function createNode(type, slot_value, text) {\n        let mark = document.createElement('mark');\n        let newTextNode = document.createTextNode(text);\n\n        mark.appendChild(newTextNode);\n        mark.textContent = mark.textContent.trim();\n        mark.setAttribute('data-type', type);\n        mark.setAttribute('data-slot-value', slot_value);\n        mark.setAttribute('data-text', mark.textContent.trim());\n        mark.setAttribute('data-color', stringToColor(mark.textContent.trim()));\n        mark.style.background = stringToColor(text);\n\n        return mark;\n    }\n\n    const mapToWhitelist = () => {\n        let arr = Array.from(input.current.childNodes).filter(item => item.dataset).map(item => {\n            return ({\n                type: item.dataset.type,\n                slot_value: item.dataset.slotValue,\n                text: item.textContent,\n                color: item.dataset.color\n            })\n        }).filter(item => item.text.trim().length);\n\n        setTimeout(() => {\n            setWhitelist(arr);\n        }, 220)\n    }\n\n    const handleSelection = () => {\n        var sel\n        // Check for existence of window.getSelection() and that it has a\n        // modify() method. IE 9 has both selection APIs but no modify() method.\n        if (window.getSelection && (sel = window.getSelection()).modify) {\n            sel = window.getSelection()\n            if (!sel.isCollapsed) {\n                // Detect if selection is backwards\n                var range = document.createRange()\n                range.setStart(sel.anchorNode, sel.anchorOffset)\n                range.setEnd(sel.focusNode, sel.focusOffset)\n                var backwards = range.collapsed\n                range.detach()\n\n                // modify() works on the focus of the selection\n                var endNode = sel.focusNode,\n                    endOffset = sel.focusOffset\n                sel.collapse(sel.anchorNode, sel.anchorOffset)\n\n                var direction = []\n                if (backwards) {\n                    direction = ['backward', 'forward']\n                } else {\n                    direction = ['forward', 'backward']\n                }\n\n                sel.modify('move', direction[0], 'character')\n                sel.modify('move', direction[1], 'word')\n                sel.extend(endNode, endOffset)\n                sel.modify('extend', direction[1], 'character')\n                sel.modify('extend', direction[0], 'word')\n            }\n        }\n\n        /* \n        SET CURRENT SELECTION\n        */\n        if (sel.toString().length > 0) {\n            let sel = rangy.getSelection()\n            setSelection(sel)\n        } else {\n            setSelection(null);\n        }\n    }\n\n    const tagSelection = (type, slot_value) => {\n        if (selection) {\n            if (!selection.tagName) {\n                let mark = createNode(type, slot_value, selection.toString());\n                if (mark) {\n                    selection.getRangeAt(0).extractContents();\n                    selection.getRangeAt(0).insertNode(mark);\n\n                    if (mark.parentElement.tagName === \"MARK\") {\n                        mark.parentElement.replaceWith(...mark.parentElement.childNodes);\n                        mark.innerHTML = mark.textContent.trim();\n                    }\n\n                    input.current.childNodes.forEach((item) => {\n                        if (item.tagName === \"MARK\") {\n                            if (item.innerHTML.slice(-1).includes(' ')) {\n                                item.innerHTML = item.innerHTML.trim();\n                            }\n                        }\n                    })\n                }\n            } else {\n                let mark = selection;\n                mark.style.outline = \"none\";\n                mark.dataset.type = type;\n            }\n\n            text.current = input.current.innerHTML;\n            mapToWhitelist();\n            setSelection(null);\n            cursorPosition.current && setCaretPosition(input.current, cursorPosition.current);\n        }\n    }\n\n    useEffect(() => {\n        let s = window.getSelection();\n\n        if (s && s.rangeCount > 0) {\n            let oRange = s.getRangeAt(0); //get the text range\n            let oRect = oRange.getBoundingClientRect();\n\n            setDropdownState({\n                position: oRect.x,\n                active: selection !== null\n            })\n        } else {\n            setDropdownState({ ...dropdownState, active: false });\n        }\n    }, [selection, active]);\n\n    useEffect(() => {\n        if (input.current.childNodes.length) {\n            let model = Array.from(input.current.childNodes).map(item => {\n                if (item.dataset) {\n                    return ({\n                        type: item.dataset.type,\n                        text: item.textContent.trim(),\n                        slot_value: item.dataset.slotValue\n                    })\n                } else {\n                    return ({ text: item.textContent.trim() }\n                    )\n                }\n            }).filter(item => item.text.length)\n\n            let raw = model.map(item => item.text).join(' ');\n            let utterances = [...props.utterances];\n            utterances[props.index] = { raw: raw, model: model }\n            props.setUtterances(utterances)\n        }\n\n    }, [whitelist]);\n\n    if (props.utterance) {\n        return (\n            <React.Fragment>\n                <div class={`field ${valid ? 'field--valid' : 'field--invalid'} field--intent ${props.active === props.index ? 'field--active' : ''}`}>\n                    <div\n                        className='field__main'\n                        id='input'\n                    >\n                        <div className='field__input'>\n                            <div class='taggable-text' ref={inputWrapper}>\n                                <ContentEditable\n                                    data-placeholder=\"Enter reference value\"\n                                    innerRef={input}\n                                    className='taggable-text__input'\n                                    html={text.current}\n                                    onClick={(e) => {\n                                        if (e.target.tagName === 'MARK') {\n                                            setSelection(e.target);\n                                        }\n                                    }}\n                                    onChange={(e) => {\n                                        text.current = e.target.value;\n                                        cursorPosition.current = getCaretCharacterOffsetWithin(input.current);\n                                        mapToWhitelist();\n                                    }}\n                                    onMouseUp={() => {\n                                        handleSelection();\n                                        cursorPosition.current = getCaretCharacterOffsetWithin(input.current);\n                                    }}\n\n                                    onKeyDown={(e) => {\n                                        if (e.keyCode === 13 || e.keyCode === 40 || e.keyCode === 38) {\n                                            e.preventDefault();\n                                        }\n                                    }}\n                                    onKeyUp={(e) => {\n                                        handleSelection();\n                                        cursorPosition.current = getCaretCharacterOffsetWithin(input.current);\n                                    }}\n                                    onFocus={() => {\n                                        props.setActive(props.index)\n                                    }}\n                                />\n                            </div>\n                            {active && <Dropdown dropdownState={dropdownState} entities={props.entities} selection={selection} setSelection={setSelection} tagSelection={tagSelection} />}\n                            <div className=\"field__actions\">\n                                {!props.utterance.new &&\n                                    <button onClick={() => {\n                                        props.removeFromUtterances(props.utterance);\n                                        document.querySelectorAll('.taggable-text__input')[0].focus();\n                                    }}>\n                                        <IconTrash />\n                                    </button>}\n                            </div>\n                        </div>\n                    </div>\n                    {props.active === props.index &&\n                        <ul className=\"model-list\">\n                            {whitelist.length > 0 &&\n                                <header className=\"model-list__header\">\n                                    <strong>Parameter name</strong>\n                                    <strong>Entity</strong>\n                                    <strong>Resolved value</strong>\n                                </header>\n                            }\n                            {whitelist.map((item, index) => {\n                                return (\n                                    <li className=\"model-list__item\">\n                                        <input defaultValue={item.slot_value.length ? item.slot_value : item.type} onChange={(e) => {\n                                            let arr = [...whitelist];\n                                            arr[index].slot_value = e.target.value;\n                                            setWhitelist(arr);\n                                            props.setStateChange(!props.stateChange);\n                                        }} />\n                                        <div><mark style={{ background: item.color }}>{item.type}</mark></div>\n                                        <div>{item.text}</div>\n                                    </li>\n                                )\n                            })}\n                        </ul>\n                    }\n                </div>\n            </React.Fragment>\n        )\n    } else {\n        return null\n    }\n}","import React, { useState } from 'react'\nimport { Utterance } from './utterance/Utterance.jsx'\n\nconst IntentUtterances = (props) => {\n\tconst [active, setActive] = useState(null);\n\n\tconst removeFromUtterances = (object) => {\n\t\tlet arr = props.utterances.filter(item => item !== object);\n\t\tprops.setUtterances(arr);\n\t\tsetActive(null);\n\t\tprops.setStateChange(!props.stateChange)\n\t}\n\n\tif (props.utterances) {\n\t\treturn (\n\t\t\t<ul>\n\t\t\t\t{props.utterances.map((item, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Utterance key={index} utterance={item} index={index} active={active} setActive={setActive} entities={props.entities} removeFromUtterances={removeFromUtterances} utterances={props.utterances} setUtterances={props.setUtterances} stateChange={props.stateChange} setStateChange={props.setStateChange} />\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</ul>\n\t\t)\n\t} else {\n\t\treturn null\n\t}\n}\n\nexport default React.memo(IntentUtterances);\n","import React, { useState, useEffect, useCallback } from 'react';\nimport IntentUtterances from './IntentUtterances.jsx';\nimport _, { debounce } from 'lodash';\nimport { useRef } from 'react';\nimport { validateInput } from '../../helpers/validations.jsx';\n\nfunction IntentDetails(props) {\n  const [intent, setIntent] = useState(props.intent);\n  const entities = props.entities;\n  const systemEntities = props.systemEntities;\n  const [stateChange, setStateChange] = useState(false);\n  const [update, setUpdate] = useState(false);\n\n  const [name, setName] = useState('');\n  const [utterances, setUtterances] = useState([]);\n  const [newExpression, setNewExpression] = useState(null);\n\n  const [valid, setValid] = useState(true);\n\n  const newExpressionInput = useRef(null);\n\n  const searchInput = useRef(null);\n\n  const focusOnExpressionInput = () => {\n    newExpressionInput.current.focus();\n    newExpressionInput.current.value = '';\n    setActive(null);\n  };\n\n  // add new value to value array\n  function addNewValue() {\n    let arr = [...utterances];\n    let newUtterance = {\n      raw: newExpression ? newExpression : '',\n      model: [{ text: newExpression ? newExpression : '' }],\n    };\n    arr = [newUtterance, ...arr];\n    setUtterances(arr);\n    setActive(0);\n  }\n\n  // check if data is passed in props\n  useEffect(() => {\n    if (intent) {\n      setName(intent.name);\n      setUtterances([{raw: '', model: [], new: true}, ...intent.utterances]);\n    }\n  }, [intent]);\n\n  useEffect(() => {\n    if (name && utterances) {\n\n      let intent = {\n        ...intent,\n        name: name,\n        utterances: utterances.filter(item => item.new),\n      }\n      \n      props.onUpdate(intent);\n\n      setUpdate(true);\n      setTimeout(() => {\n        setUpdate(false);\n      }, 200)\n    }\n  }, [name, utterances]);\n\n  const handleSearch = () => {\n    if (searchInput.current) {\n      let arr = intent.utterances;\n      arr = arr.filter(item => item.raw.toLowerCase().includes(searchInput.current.value.toLowerCase().trim()));\n      setUtterances(arr)\n    }\n  }\n\n  const handler = useCallback(debounce(handleSearch, 300), []);\n\n  const onChange = () => {\n    handler();\n  };\n\n  if (intent) {\n    return (\n      <div className=\"convo-details\">\n        <section className=\"layout--editor-content\">\n          <div>\n            {/* Entity name value */}\n            <div className=\"margin--30--large\">\n              <h3 className=\"margin--10--large\">Intent name</h3>\n              <form\n                onSubmit={e => {\n                  e.preventDefault();\n                }}\n              >\n                <input\n                  type=\"text\"\n                  defaultValue={name ? name : ''}\n                  placeholder=\"Intent name\"\n                  className=\"editor-input input--item-name\"\n                  onChange={e => {\n                    let message =\n                      'Intent names shall begin with alphabetic characters from a to Z. The intent name may contain 1 underscore per word. Intent names shall not contain any numbers at all.';\n                    validateInput(\n                      e.target,\n                      e.target.value,\n                      '^[A-Za-z](_?[A-Za-z])*_?$',\n                      message\n                    );\n                    setName(e.target.value);\n                  }}\n                  required\n                />\n              </form>\n            </div>\n            {/* Entity words */}\n            <div className=\"margin--50--large\">\n              <div className=\"search-wrapper\">\n                <h3>Utterances</h3>\n                <input ref={searchInput} className=\"editor-input input--search\" type=\"text\" placeholder=\"Search utterances\" onChange={(e) => {\n                  onChange()\n                }} />\n              </div>\n              {update && <span style={{position: \"fixed\", left: 0, bottom: 0}}>Update!!</span>}\n              <div className=\"margin--24--large\">\n                <IntentUtterances\n                  addNewValue={addNewValue}\n                  utterances={utterances}\n                  setUtterances={setUtterances}\n                  entities={[entities, ...systemEntities]}\n                  focusOnExpressionInput={focusOnExpressionInput}\n                  stateChange={stateChange}\n                  setStateChange={setStateChange}\n                />\n              </div>\n            </div>\n          </div>\n        </section>\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nexport default IntentDetails;\n","import React from 'react'\nimport EntityDetails from './components/EntityComponent/EntityDetails'\nimport IntentDetails from './components/IntentComponent/IntentDetails'\nimport './styles.scss'\n\nexport const IntentEditor = (props) => {\n  return <IntentDetails intent={props.intent} entities={props.entities} systemEntities={props.systemEntities} onUpdate={props.onUpdate} />\n}\n\nexport const EntityEditor = (props) => {\n  return <EntityDetails entity={props.entity} onUpdate={props.onUpdate} />\n}"],"names":["IconTrash","React","EntityValue","props","useState","item","value","setValue","synonyms","setSynonyms","newSynonym","setNewSynonym","remove","setRemove","synonymInput","useRef","useEffect","handleUpdate","values","index","handleNewSynonym","target","current","length","removeSynonym","arr","indexOf","splice","makeSynonyms","items","active","map","i","handleRemove","e","stopPropagation","setTimeout","removeValue","activeValue","setActiveValue","preventDefault","marginLeft","EntityValues","setValues","makeItems","validateInput","elem","term","regex","message","reg","RegExp","test","setCustomValidity","reportValidity","EntityDetails","entity","setEntity","name","setName","newValue","setNewValue","valid","setValid","valueInput","onUpdate","addNewValue","val","validate","stringToColor","getHashCode","intToHSL","String","prototype","hash","charCodeAt","Number","shortened","getCaretCharacterOffsetWithin","element","caretOffset","doc","ownerDocument","document","win","defaultView","parentWindow","sel","getSelection","rangeCount","range","getRangeAt","preCaretRange","cloneRange","selectNodeContents","setEnd","endContainer","endOffset","toString","selection","type","textRange","createRange","preCaretTextRange","body","createTextRange","moveToElementText","setEndPoint","text","setCaretPosition","el","pos","childNodes","node","nodeType","window","setStart","collapse","removeAllRanges","addRange","Dropdown","entities","setEntities","allEntities","entitiesNames","setEntitiesNames","input","modalRef","useOnclickOutside","setSelection","filterEntities","filteredArr","filter","toLowerCase","includes","trim","dropdownStyles","position","top","transition","visibility","dropdownState","opacity","left","tagSelection","Utterance","setDropdownState","whitelist","setWhitelist","inputWrapper","cursorPosition","expression","utterance","model","join","slotValues","slot_value","str","innerHTML","mapToWhitelist","stateChange","createNode","mark","createElement","newTextNode","createTextNode","appendChild","textContent","setAttribute","style","background","Array","from","dataset","slotValue","color","handleSelection","modify","isCollapsed","anchorNode","anchorOffset","focusNode","focusOffset","backwards","collapsed","detach","endNode","direction","extend","rangy","tagName","extractContents","insertNode","parentElement","replaceWith","forEach","slice","outline","s","oRange","oRect","getBoundingClientRect","x","raw","utterances","setUtterances","keyCode","setActive","removeFromUtterances","querySelectorAll","focus","setStateChange","IntentUtterances","object","memo","IntentDetails","intent","systemEntities","update","setUpdate","newExpression","newExpressionInput","searchInput","focusOnExpressionInput","newUtterance","handleSearch","handler","useCallback","debounce","onChange","bottom","IntentEditor","EntityEditor"],"mappings":"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"}