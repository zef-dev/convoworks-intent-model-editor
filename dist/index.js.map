{"version":3,"file":"index.js","sources":["../src/assets/icon_trash.jsx","../src/components/EntityComponent/entity_value.jsx","../src/components/EntityComponent/entity_values.jsx","../src/helpers/validations.jsx","../src/components/EntityComponent/entity_details.jsx","../src/components/IntentComponent/utterance/utterance.jsx","../src/components/IntentComponent/intent_utterances.jsx","../src/components/IntentComponent/intent_details.jsx","../src/index.js"],"sourcesContent":["import React from 'react';\n\nfunction IconTrash() {\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n\t\t\t<g fill=\"none\" fill-rule=\"evenodd\" stroke=\"#1A1A1A\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n\t\t\t\t<path d=\"M2.4 6.5v7c0 1.105.835 2 1.867 2h7.466c1.032 0 1.867-.895 1.867-2v-7M1.467 3.5h13.066M6.133 3.5v-3h3.734v3M8 7.5v5M10.8 7.5v5M5.2 7.5v5\" />\n\t\t\t</g>\n\t\t</svg>\n\t);\n}\n\nexport { IconTrash };\n","import React, { useState, useRef, useEffect } from 'react';\nimport { IconTrash } from '../../assets/icon_trash.jsx';\n\nconst EntityValue = (props) => {\n\tconst [ value, setValue ] = useState(props.item.value);\n\tconst [ synonyms, setSynonyms ] = useState(props.item.synonyms);\n\tconst [ newSynonym, setNewSynonym ] = useState('');\n\tconst [ remove, setRemove ] = useState(false);\n\tconst synonymInput = useRef(null);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tprops.handleUpdate([ ...props.values ], props.index, {\n\t\t\t\tvalue: value,\n\t\t\t\tsynonyms: synonyms\n\t\t\t});\n\t\t},\n\t\t[ value, synonyms ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (newSynonym) {\n\t\t\t\tif (synonyms) {\n\t\t\t\t\tsetSynonyms([ ...synonyms, newSynonym ]);\n\t\t\t\t} else {\n\t\t\t\t\tsetSynonyms(newSynonym);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t},\n\t\t[ newSynonym ]\n\t);\n\n\tconst handleNewSynonym = (target) => {\n\t\tif (target.current.value.length > 0) {\n\t\t\tsetNewSynonym(target.current.value);\n\t\t\ttarget.current.value = '';\n\t\t} else {\n\t\t\tsetNewSynonym('');\n\t\t}\n\t};\n\n\t// synonyms\n\tconst removeSynonym = (value) => {\n\t\tlet arr = [ ...synonyms ];\n\t\tlet index = arr.indexOf(value);\n\n\t\tif (index !== -1) {\n\t\t\tarr.splice(index, 1);\n\t\t\tsetSynonyms(arr);\n\t\t}\n\t};\n\n\tconst makeSynonyms = (items, active) => {\n\t\tif (items) {\n\t\t\treturn (\n\t\t\t\titems &&\n\t\t\t\titems.map((item, i) => {\n\t\t\t\t\tif (item && !active) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"synonym\" key={i}>\n\t\t\t\t\t\t\t\t{item}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={i} className=\"synonym\">\n\t\t\t\t\t\t\t\t{item}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"synonym__remove\"\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tremoveSynonym(item);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t&#10005;\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t};\n\n\tconst handleRemove = (e) => {\n\t\te.stopPropagation();\n\t\tsetRemove(true);\n\t\tsetTimeout(() => {\n\t\t\tprops.removeValue(props.index);\n\t\t\tsetRemove(false);\n\t\t}, 220);\n\t};\n\n\tif (props.activeValue !== props.index) {\n\t\treturn (\n\t\t\t<li\n\t\t\t\tclassName={`item item--entity ${remove ? 'item--remove' : ''}`}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tprops.setActiveValue(props.index);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div className=\"item__inner\">\n\t\t\t\t\t<div className=\"grid\">\n\t\t\t\t\t\t<div className=\"cell cell--3--small\">\n\t\t\t\t\t\t\t<div className=\"item__value item__value--primary\">{value}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"cell cell--9--small\">\n\t\t\t\t\t\t\t<div className=\"item__values\">{makeSynonyms(synonyms, false)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"item__buttons\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn--remove btn--remove--main\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\thandleRemove(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconTrash />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t);\n\t} else {\n\t\treturn (\n\t\t\t<li className={`item item--entity item--active ${remove ? 'item--remove' : ''}`}>\n\t\t\t\t<div className=\"item__inner\">\n\t\t\t\t\t<div className=\"grid\">\n\t\t\t\t\t\t<div className=\"cell cell--3--small\">\n\t\t\t\t\t\t\t<div className=\"item__value item__value--primary\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tdata-input=\"true\"\n\t\t\t\t\t\t\t\t\tclassName=\"editor-input\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tdefaultValue={value}\n\t\t\t\t\t\t\t\t\tplaceholder=\"Enter value\"\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tsetValue(e.target.value);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"cell cell--9--small\">\n\t\t\t\t\t\t\t<div className=\"item__values\">\n\t\t\t\t\t\t\t\t{makeSynonyms(synonyms, true)}\n\t\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\thandleNewSynonym(synonymInput);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclassName=\"editor-input\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tstyle={{ marginLeft: '0.625rem' }}\n\t\t\t\t\t\t\t\t\t\tref={synonymInput}\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter synonym\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => {}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<input className=\"editor-input\" type=\"submit\" hidden={true} />\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"item__buttons\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn--remove btn--remove--main\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\thandleRemove(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconTrash />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t);\n\t}\n};\n\nexport default EntityValue;\n","import React, { useState, useEffect } from 'react';\nimport EntityValue from './entity_value.jsx';\n\nfunction EntityValues(props) {\n\tconst [ activeValue, setActiveValue ] = useState(null);\n\n\tfunction handleUpdate(arr, index, item) {\n\t\tarr[index] = {\n\t\t\tvalue: item.value,\n\t\t\tsynonyms: item.synonyms\n\t\t};\n\n\t\tprops.setValues(arr);\n\t}\n\n\tconst makeItems = (items) => {\n\t\tif (items) {\n\t\t\treturn items.map((item, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<React.Fragment key={index}>\n\t\t\t\t\t\t<EntityValue\n\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\tvalues={props.values}\n\t\t\t\t\t\t\tremoveValue={props.removeValue}\n\t\t\t\t\t\t\thandleUpdate={handleUpdate}\n\t\t\t\t\t\t\tactiveValue={activeValue}\n\t\t\t\t\t\t\tsetActiveValue={setActiveValue}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tif (props.values) {\n\t\treturn <div>{makeItems(props.values)}</div>;\n\t} else {\n\t\treturn null\n\t}\n}\n\nexport default EntityValues;\n","export const validateInput = (elem, term, regex, message) => {\n  let reg = new RegExp(regex);\n  if (reg.test(term)) {\n    elem.setCustomValidity('');\n  } else {\n    elem.setCustomValidity(message);\n  }\n  elem.reportValidity();\n\n  return reg.test(term);\n};\n","import React, { useState, useEffect } from 'react';\nimport EntityValues from './entity_values.jsx';\nimport _ from 'lodash';\nimport { useRef } from 'react';\nimport { validateInput } from '../../helpers/validations.jsx';\n\nfunction EntityDetails(props) {\n\tconst [ entity, setEntity ] = useState(null);\n\tconst [ name, setName ] = useState(null);\n\tconst [ values, setValues ] = useState(null);\n\tconst [ newValue, setNewValue ] = useState(null);\n\tconst [valid, setValid] = useState(true);\n\tconst valueInput = useRef(null);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (!entity) {\n\t\t\t\tsetEntity(props.entity);\n\t\t\t}\n\t\t},\n\t\t[ props.entity ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetName(props.entity.name);\n\t\t\tsetValues(props.entity.values);\n\t\t},\n\t\t[ entity ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (name && values) {\n\t\t\t\tprops.onUpdate({\n\t\t\t\t\tname: name,\n\t\t\t\t\tvalues: values\n\t\t\t\t}, valid);\n\t\t\t}\n\t\t},\n\t\t[ name, values ]\n\t);\n\n\t// add new value to value array\n\tconst addNewValue = () => {\n\t\tlet val = {\n\t\t\tvalue: newValue,\n\t\t\tsynonyms: []\n\t\t};\n\n\t\tlet arr = [...values, val];\n\t\tsetValues(arr);\n\t};\n\n\tconst removeValue = (index) => {\n\t\tlet arr = [ ...values ];\n\t\tif (index !== -1) {\n\t\t\tarr.splice(index, 1);\n\t\t\tsetValues(arr);\n\t\t}\n\t};\n\n\tif (values) {\n\t\treturn (\n\t\t\t<div className=\"convo-details\">\n\t\t\t\t<section className=\"layout--editor-content\">\n\t\t\t\t\t<section className=\"entities-editor\">\n\t\t\t\t\t\t{/* Entity name value */}\n\t\t\t\t\t\t<div className=\"margin--30--large\">\n\t\t\t\t\t\t\t<h3 className=\"margin--10--large\">Entity name</h3>\n\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tdefaultValue={name ? name : ''}\n\t\t\t\t\t\t\t\t\tplaceholder=\"Entity name\"\n\t\t\t\t\t\t\t\t\tclassName=\"editor-input input--item-name\"\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tlet message = 'Entity names shall begin with alphabetic characters from a to Z. The entity name may contain multiple underscores per word. Entity names shall not contain any numbers at all or soecial characters other than undersocres.'\n\t\t\t\t\t\t\t\t\t\tlet validate = validateInput(e.target, e.target.value, '^[A-Za-z](_*[A-Za-z])*_*$', message);\n\t\t\t\t\t\t\t\t\t\tsetValid(validate);\n\t\t\t\t\t\t\t\t\t\tsetName(e.target.value);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* Entity words */}\n\t\t\t\t\t\t<div className=\"margin--50--large\">\n\t\t\t\t\t\t\t<h3 className=\"font--18--large margin--10--large\">Values</h3>\n\t\t\t\t\t\t\t<div className=\"margin--24--large\">\n\t\t\t\t\t\t\t\t<EntityValues values={values} setValues={setValues} removeValue={removeValue} />\n\t\t\t\t\t\t\t\t<form onSubmit={(e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (newValue) {\n\t\t\t\t\t\t\t\t\t\taddNewValue();\n\t\t\t\t\t\t\t\t\t\tsetNewValue(null);\n\t\t\t\t\t\t\t\t\t\tvalueInput.current.value = '';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"editor-input input--add-field\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter reference value\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setNewValue(e.target.value)}\n\t\t\t\t\t\t\t\t\t\tref={valueInput}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\treturn null;\n\t}\n}\n\nexport default EntityDetails;\n","import React, { useRef, useState, useEffect } from 'react';\n//import Tags from \"@yaireo/tagify/dist/react.tagify\" // React-wrapper file\n//import '@yaireo/tagify/src/tagify.scss';\nimport rangy from 'rangy';\nimport _ from 'lodash';\n\nexport default function Utterance(props) {\n\tconst [raw, setRaw] = useState(props.data.raw);\n\tconst [model, setModel] = useState(props.data.model);\n\tconst [selection, setSelection] = useState(null);\n\tconst [whitelist, setWhitelist] = useState(props.data.model.filter(item => item.type).map((item) => ({ text: item.text, type: item.type })));\n\n\tconst wrapper = useRef(null);\n\tconst input = useRef(null);\n\n\tlet parsedRaw = raw;\n\twhitelist.map(item => {\n\t\tparsedRaw = raw.replace(item, `${item.text}`);\n\t})\n\n\tconst settings = {\n\t\tmode: 'mix',\n\t\tkeepInvalidTags: false,         // do not remove invalid tags (but keep them marked as invalid)\n\t\teditTags: {\n\t\t\tclicks: 1,              // single click to edit a tag\n\t\t\tkeepInvalid: false      // if after editing, tag is invalid, auto-revert\n\t\t},\n\t\t// maxTags: 6,\n\t\twhitelist: whitelist,\n\t\tbackspace: \"edit\",\n\t\tplaceholder: \"Type something\",\n\t};\n\n\tconst updateInput = () => {\n\t\tlet value = input.current.state.lastOriginalValueReported;\n\t}\n\n\tconst updateWhitelist = () => {\n\t\tlet list = [...whitelist];\n\n\t\t// ignore strings that are already present in the whitelist\n\t\tif (selection && !list.find(item => item.text === selection.string)) {\n\n\t\t\tselection.string.split(' ').map(val => {\n\t\t\t\tlet item = list.filter(obj => obj.text.includes(val));\n\t\t\t\tlet i = list.indexOf(item);\n\n\t\t\t\tconsole.log(item, i, val)\n\t\t\t\tlist = list.splice(i, 1);\n\t\t\t})\n\n\t\t\tconsole.log(list);\n\t\t\tsetWhitelist(list);\n\t\t}\n\n\t\tmapWhitelist();\n\t}\n\n\tfunction mapWhitelist() {\n\t\tlet str = props.data.raw;\n\t\twhitelist.map(item => {\n\t\t\tstr = str.replace(item.text, `#${item.text}#`);\n\t\t})\n\n\t\tlet arr = str.split('#').filter(item => item.trim().length > 0).map(item => item.trim()).map(item => {\n\t\t\tlet modelObj = whitelist.find(val => val.text === item);\n\t\t\tif (modelObj) {\n\t\t\t\treturn modelObj;\n\n\t\t\t} else {\n\t\t\t\treturn ({\n\t\t\t\t\ttext: item\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n\t\tconsole.log(arr);\n\n\t\tsetSelection(null);\n\t}\n\n\tif (props.data) {\n\t\treturn (\n\t\t\t<div id=\"input\" onKeyUp={(e) => {\n\t\t\t\tlet sel = rangy.getSelection();\n\n\t\t\t\tif (sel.toString().trim().length) {\n\t\t\t\t\tlet nodes = sel.getRangeAt(0).getNodes();\n\t\t\t\t\tlet nodeArray = Array.from(nodes).filter(node => node.nodeName === '#text').filter(node => node.textContent.trim().length);\n\t\t\t\t\tlet selectedString = nodeArray.map(node => node.textContent).join(' ');\n\t\t\t\t\tsetSelection({ string: selectedString, nodes: nodeArray });\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tupdateWhitelist();\n\t\t\t\t\t}, 1000)\n\t\t\t\t}\n\t\t\t}}>\n\t\t\t\t<div>{whitelist.map(item => <small> / {item.text}  </small>)}</div>\n\t\t\t\t<div contentEditable={true}>{parsedRaw.split(' ').map(item => {\n\t\t\t\t\tif (whitelist.find(val => val.text === item)) {\n\t\t\t\t\t\treturn <b>{item}&nbsp;</b>\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn <React.Fragment>{item}&nbsp;</React.Fragment>\n\t\t\t\t\t}\n\t\t\t\t})}</div>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\treturn null\n\t}\n}\n","import React, { useState, useEffect } from 'react';\nimport { getColor } from '../../helpers/common_constants.jsx';\nimport { Modal } from './intent_modal.jsx';\nimport Utterance from './utterance/utterance.jsx';\n\nconst List = React.memo(function List(props) {\n\tconst [ modal, setModal ] = useState(false);\n\tconst [ modalPosition, setModalPosition ] = useState(null);\n\tconst [ selection, setSelection ] = useState(null);\n\tconst [ update, setUpdate ] = useState(false);\n\tconst [ paramValues, setParamValues ] = useState(null);\n\n\tuseEffect(\n\t\t() => {\n\t\t\t// get every item type & slot value pair from utterances array\n\t\t\tlet arr = props.utterances\n\t\t\t\t.map((item) => item.model)\n\t\t\t\t.flat()\n\t\t\t\t.filter((item) => item.slot_value)\n\t\t\t\t.map((item) => ({ type: item.type, slot_value: item.slot_value }));\n\n\n\t\t\t// remove duplicate pairs \n\t\t\tlet uniq = arr.filter((v, i, a) => a.findIndex((t) => t.slot_value === v.slot_value) === i);\n\t\t\tsetParamValues(uniq);\n\t\t},\n\t\t[ props.utterances ]\n\t);\n\n\tconst handleActive = (index) => {\n\t\tprops.setActive(index);\n\t};\n\n\tconst makeItems = (items) => {\n\t\treturn items.map((item, index) => {\n\t\t\treturn <Utterance key={index} data={item} />;\n\t\t});\n\t};\n\n\tconst removeFromUtterances = (index) => {\n\t\tlet arr = [ ...props.utterances ];\n\t\tif (index !== -1) {\n\t\t\tarr.splice(index, 1);\n\t\t\tconsole.log('new arr after delete', arr);\n\t\t\tprops.setUtterances(arr);\n\t\t\tprops.setActive(null);\n\t\t}\n\t};\n\n\tconsole.log(selection);\n\n\tif (props.utterances) {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<ul>{makeItems(props.utterances)}</ul>\n\t\t\t\t{/* <Modal\n\t\t\t\t\tsetModal={setModal}\n\t\t\t\t\tmodal={modal}\n\t\t\t\t\tmodalPosition={modalPosition}\n\t\t\t\t\tselection={selection}\n\t\t\t\t\tsetSelection={setSelection}\n\t\t\t\t\tactive={props.active}\n\t\t\t\t\tutterances={props.utterances}\n\t\t\t\t\tsetUtterances={props.setUtterances}\n\t\t\t\t\tsetUpdate={setUpdate}\n\t\t\t\t\tupdate={update}\n\t\t\t\t\tstateChange={stateChange}\n\t\t\t\t\tsetStateChange={setStateChange}\n\t\t\t\t\tentities={props.entities.flat()}\n\t\t\t\t\tparamValues={paramValues}\n\t\t\t\t\tsetParamValues={setParamValues}\n\t\t\t\t/> */}\n\t\t\t</React.Fragment>\n\t\t);\n\t} else {\n\t\treturn null;\n\t}\n});\n\nexport { List };\n","import React, { useState, useEffect } from 'react';\nimport { List as Utterances } from './intent_utterances.jsx';\nimport _ from 'lodash';\nimport { useRef } from 'react';\nimport { validateInput } from '../../helpers/validations.jsx';\n\nfunction IntentDetails(props) {\n  const [intent, setIntent] = useState(props.intent);\n  const entities = props.entities;\n  const systemEntities = props.systemEntities;\n\n  const [name, setName] = useState('');\n  const [utterances, setUtterances] = useState([]);\n  const [active, setActive] = useState(null);\n  const [newExpression, setNewExpression] = useState(null);\n\n  const [valid, setValid] = useState(true);\n\n  const newExpressionInput = useRef(null);\n\n  const focusOnExpressionInput = () => {\n    newExpressionInput.current.focus();\n    newExpressionInput.current.value = '';\n    setActive(null);\n  };\n\n  // add new value to value array\n  function addNewValue() {\n    let arr = [...utterances];\n    let newUtterance = {\n      raw: newExpression ? newExpression : '',\n      model: [{ text: newExpression ? newExpression : '' }],\n    };\n    arr = [newUtterance, ...arr];\n    setUtterances(arr);\n    setActive(0);\n  }\n\n  const removeFromModel = (utteranceIndex, index) => {\n    let arr = [...utterances];\n    let model = arr[utteranceIndex].model;\n    model[index] = {\n      text: model[index].text,\n    };\n\n    setUtterances(arr);\n  };\n\n  // check if data is passed in props\n  useEffect(() => {\n    if (intent) {\n      setName(intent.name);\n      setUtterances(intent.utterances);\n    }\n  }, [intent]);\n\n  useEffect(() => {\n    if (name && utterances) {\n      props.onUpdate({\n        ...intent,\n        name: name,\n        utterances: utterances,\n      });\n    }\n  }, [name, utterances]);\n\n  if (intent) {\n    return (\n      <div className=\"convo-details\">\n        <section className=\"layout--editor-content\">\n          <div>\n            {/* Entity name value */}\n            <div className=\"margin--30--large\">\n              <h3 className=\"margin--10--large\">Intent name</h3>\n              <form\n                onSubmit={e => {\n                  e.preventDefault();\n                }}\n              >\n                <input\n                  type=\"text\"\n                  defaultValue={name ? name : ''}\n                  placeholder=\"Intent name\"\n                  className=\"editor-input input--item-name\"\n                  onChange={e => {\n                    let message =\n                      'Intent names shall begin with alphabetic characters from a to Z. The intent name may contain 1 underscore per word. Intent names shall not contain any numbers at all.';\n                    validateInput(\n                      e.target,\n                      e.target.value,\n                      '^[A-Za-z](_?[A-Za-z])*_?$',\n                      message\n                    );\n                    setName(e.target.value);\n                  }}\n                  required\n                />\n              </form>\n            </div>\n            {/* Entity words */}\n            <div className=\"margin--50--large\">\n              <h3 className=\"margin--10--large\">Utterances</h3>\n              <div className=\"margin--24--large\">\n                <form\n                  onSubmit={e => {\n                    e.preventDefault();\n                    if (newExpression) {\n                      addNewValue();\n                      setNewExpression(null);\n                      newExpressionInput.current.value = '';\n                    }\n                  }}\n                >\n                  <input\n                    type=\"text\"\n                    className=\"editor-input input--add-field\"\n                    placeholder=\"Enter reference value\"\n                    onChange={e => setNewExpression(e.target.value)}\n                    ref={newExpressionInput}\n                    onFocus={() => {\n                      setActive(null);\n                    }}\n                  />\n                </form>\n                <Utterances\n                  addNewValue={addNewValue}\n                  active={active}\n                  setActive={setActive}\n                  utterances={utterances}\n                  setUtterances={setUtterances}\n                  removeFromModel={removeFromModel}\n                  entities={[entities, ...systemEntities]}\n                  focusOnExpressionInput={focusOnExpressionInput}\n                />\n              </div>\n            </div>\n          </div>\n        </section>\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nexport default IntentDetails;\n","import React from 'react'\nimport EntityDetails from './components/EntityComponent/entity_details'\nimport IntentDetails from './components/IntentComponent/intent_details'\nimport './styles.scss'\n\nexport const IntentEditor = (props) => {\n  return <IntentDetails intent={props.intent} entities={props.entities} systemEntities={props.systemEntities} onUpdate={props.onUpdate} />\n}\n\nexport const EntityEditor = (props) => {\n  return <EntityDetails entity={props.entity} onUpdate={props.onUpdate} />\n}"],"names":["IconTrash","React","EntityValue","props","useState","item","value","setValue","synonyms","setSynonyms","newSynonym","setNewSynonym","remove","setRemove","synonymInput","useRef","useEffect","handleUpdate","values","index","handleNewSynonym","target","current","length","removeSynonym","arr","indexOf","splice","makeSynonyms","items","active","map","i","handleRemove","e","stopPropagation","setTimeout","removeValue","activeValue","setActiveValue","preventDefault","marginLeft","EntityValues","setValues","makeItems","validateInput","elem","term","regex","message","reg","RegExp","test","setCustomValidity","reportValidity","EntityDetails","entity","setEntity","name","setName","newValue","setNewValue","valid","setValid","valueInput","onUpdate","addNewValue","val","validate","Utterance","data","raw","model","selection","setSelection","filter","type","text","whitelist","setWhitelist","wrapper","input","parsedRaw","replace","updateWhitelist","list","find","string","split","obj","includes","console","log","mapWhitelist","str","trim","modelObj","sel","rangy","getSelection","toString","nodes","getRangeAt","getNodes","nodeArray","Array","from","node","nodeName","textContent","selectedString","join","List","memo","paramValues","setParamValues","utterances","flat","slot_value","uniq","v","a","findIndex","t","IntentDetails","intent","entities","systemEntities","setUtterances","setActive","newExpression","setNewExpression","newExpressionInput","focusOnExpressionInput","focus","newUtterance","removeFromModel","utteranceIndex","Utterances","IntentEditor","EntityEditor"],"mappings":"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"}