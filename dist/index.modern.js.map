{"version":3,"file":"index.modern.js","sources":["../src/assets/icon_trash.jsx","../src/components/EntityComponent/entity_value.jsx","../src/components/EntityComponent/entity_values.jsx","../src/helpers/validations.jsx","../src/components/EntityComponent/entity_details.jsx","../src/helpers/common_constants.jsx","../src/components/IntentComponent/intent_modal.jsx","../src/components/IntentComponent/utterance/input.jsx","../src/components/IntentComponent/utterance/utterance.jsx","../src/components/IntentComponent/intent_utterances.jsx","../src/components/IntentComponent/intent_details.jsx","../src/index.js"],"sourcesContent":["import React from 'react';\n\nfunction IconTrash() {\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n\t\t\t<g fill=\"none\" fill-rule=\"evenodd\" stroke=\"#1A1A1A\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n\t\t\t\t<path d=\"M2.4 6.5v7c0 1.105.835 2 1.867 2h7.466c1.032 0 1.867-.895 1.867-2v-7M1.467 3.5h13.066M6.133 3.5v-3h3.734v3M8 7.5v5M10.8 7.5v5M5.2 7.5v5\" />\n\t\t\t</g>\n\t\t</svg>\n\t);\n}\n\nexport { IconTrash };\n","import React, { useState, useRef, useEffect } from 'react';\nimport { IconTrash } from '../../assets/icon_trash.jsx';\n\nconst EntityValue = (props) => {\n\tconst [ value, setValue ] = useState(props.item.value);\n\tconst [ synonyms, setSynonyms ] = useState(props.item.synonyms);\n\tconst [ newSynonym, setNewSynonym ] = useState('');\n\tconst [ remove, setRemove ] = useState(false);\n\tconst synonymInput = useRef(null);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tprops.handleUpdate([ ...props.values ], props.index, {\n\t\t\t\tvalue: value,\n\t\t\t\tsynonyms: synonyms\n\t\t\t});\n\t\t},\n\t\t[ value, synonyms ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (newSynonym) {\n\t\t\t\tif (synonyms) {\n\t\t\t\t\tsetSynonyms([ ...synonyms, newSynonym ]);\n\t\t\t\t} else {\n\t\t\t\t\tsetSynonyms(newSynonym);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t},\n\t\t[ newSynonym ]\n\t);\n\n\tconst handleNewSynonym = (target) => {\n\t\tif (target.current.value.length > 0) {\n\t\t\tsetNewSynonym(target.current.value);\n\t\t\ttarget.current.value = '';\n\t\t} else {\n\t\t\tsetNewSynonym('');\n\t\t}\n\t};\n\n\t// synonyms\n\tconst removeSynonym = (value) => {\n\t\tlet arr = [ ...synonyms ];\n\t\tlet index = arr.indexOf(value);\n\n\t\tif (index !== -1) {\n\t\t\tarr.splice(index, 1);\n\t\t\tsetSynonyms(arr);\n\t\t}\n\t};\n\n\tconst makeSynonyms = (items, active) => {\n\t\tif (items) {\n\t\t\treturn (\n\t\t\t\titems &&\n\t\t\t\titems.map((item, i) => {\n\t\t\t\t\tif (item && !active) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"synonym\" key={i}>\n\t\t\t\t\t\t\t\t{item}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={i} className=\"synonym\">\n\t\t\t\t\t\t\t\t{item}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"synonym__remove\"\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tremoveSynonym(item);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t&#10005;\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t};\n\n\tconst handleRemove = (e) => {\n\t\te.stopPropagation();\n\t\tsetRemove(true);\n\t\tsetTimeout(() => {\n\t\t\tprops.removeValue(props.index);\n\t\t\tsetRemove(false);\n\t\t}, 220);\n\t};\n\n\tif (props.activeValue !== props.index) {\n\t\treturn (\n\t\t\t<li\n\t\t\t\tclassName={`item item--entity ${remove ? 'item--remove' : ''}`}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tprops.setActiveValue(props.index);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div className=\"item__inner\">\n\t\t\t\t\t<div className=\"grid\">\n\t\t\t\t\t\t<div className=\"cell cell--3--small\">\n\t\t\t\t\t\t\t<div className=\"item__value item__value--primary\">{value}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"cell cell--9--small\">\n\t\t\t\t\t\t\t<div className=\"item__values\">{makeSynonyms(synonyms, false)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"item__buttons\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn--remove btn--remove--main\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\thandleRemove(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconTrash />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t);\n\t} else {\n\t\treturn (\n\t\t\t<li className={`item item--entity item--active ${remove ? 'item--remove' : ''}`}>\n\t\t\t\t<div className=\"item__inner\">\n\t\t\t\t\t<div className=\"grid\">\n\t\t\t\t\t\t<div className=\"cell cell--3--small\">\n\t\t\t\t\t\t\t<div className=\"item__value item__value--primary\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tdata-input=\"true\"\n\t\t\t\t\t\t\t\t\tclassName=\"editor-input\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tdefaultValue={value}\n\t\t\t\t\t\t\t\t\tplaceholder=\"Enter value\"\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tsetValue(e.target.value);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"cell cell--9--small\">\n\t\t\t\t\t\t\t<div className=\"item__values\">\n\t\t\t\t\t\t\t\t{makeSynonyms(synonyms, true)}\n\t\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\thandleNewSynonym(synonymInput);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclassName=\"editor-input\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tstyle={{ marginLeft: '0.625rem' }}\n\t\t\t\t\t\t\t\t\t\tref={synonymInput}\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter synonym\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => {}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<input className=\"editor-input\" type=\"submit\" hidden={true} />\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"item__buttons\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn--remove btn--remove--main\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\thandleRemove(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconTrash />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t);\n\t}\n};\n\nexport default EntityValue;\n","import React, { useState, useEffect } from 'react';\nimport EntityValue from './entity_value.jsx';\n\nfunction EntityValues(props) {\n\tconst [ activeValue, setActiveValue ] = useState(null);\n\n\tfunction handleUpdate(arr, index, item) {\n\t\tarr[index] = {\n\t\t\tvalue: item.value,\n\t\t\tsynonyms: item.synonyms\n\t\t};\n\n\t\tprops.setValues(arr);\n\t}\n\n\tconst makeItems = (items) => {\n\t\tif (items) {\n\t\t\treturn items.map((item, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<React.Fragment key={index}>\n\t\t\t\t\t\t<EntityValue\n\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\tvalues={props.values}\n\t\t\t\t\t\t\tremoveValue={props.removeValue}\n\t\t\t\t\t\t\thandleUpdate={handleUpdate}\n\t\t\t\t\t\t\tactiveValue={activeValue}\n\t\t\t\t\t\t\tsetActiveValue={setActiveValue}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tif (props.values) {\n\t\treturn <div>{makeItems(props.values)}</div>;\n\t} else {\n\t\treturn null\n\t}\n}\n\nexport default EntityValues;\n","export const validateInput = (elem, term, regex, message) => {\n  let reg = new RegExp(regex);\n  if (reg.test(term)) {\n    elem.setCustomValidity('');\n  } else {\n    elem.setCustomValidity(message);\n  }\n  elem.reportValidity();\n\n  return reg.test(term);\n};\n","import React, { useState, useEffect } from 'react';\nimport EntityValues from './entity_values.jsx';\nimport _ from 'lodash';\nimport { useRef } from 'react';\nimport { validateInput } from '../../helpers/validations.jsx';\n\nfunction EntityDetails(props) {\n\tconst [ entity, setEntity ] = useState(null);\n\tconst [ name, setName ] = useState(null);\n\tconst [ values, setValues ] = useState(null);\n\tconst [ newValue, setNewValue ] = useState(null);\n\tconst [valid, setValid] = useState(true);\n\tconst valueInput = useRef(null);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (!entity) {\n\t\t\t\tsetEntity(props.entity);\n\t\t\t}\n\t\t},\n\t\t[ props.entity ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetName(props.entity.name);\n\t\t\tsetValues(props.entity.values);\n\t\t},\n\t\t[ entity ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (name && values) {\n\t\t\t\tprops.onUpdate({\n\t\t\t\t\tname: name,\n\t\t\t\t\tvalues: values\n\t\t\t\t}, valid);\n\t\t\t}\n\t\t},\n\t\t[ name, values ]\n\t);\n\n\t// add new value to value array\n\tconst addNewValue = () => {\n\t\tlet val = {\n\t\t\tvalue: newValue,\n\t\t\tsynonyms: []\n\t\t};\n\n\t\tlet arr = [...values, val];\n\t\tsetValues(arr);\n\t};\n\n\tconst removeValue = (index) => {\n\t\tlet arr = [ ...values ];\n\t\tif (index !== -1) {\n\t\t\tarr.splice(index, 1);\n\t\t\tsetValues(arr);\n\t\t}\n\t};\n\n\tif (values) {\n\t\treturn (\n\t\t\t<div className=\"convo-details\">\n\t\t\t\t<section className=\"layout--editor-content\">\n\t\t\t\t\t<section className=\"entities-editor\">\n\t\t\t\t\t\t{/* Entity name value */}\n\t\t\t\t\t\t<div className=\"margin--30--large\">\n\t\t\t\t\t\t\t<h3 className=\"margin--10--large\">Entity name</h3>\n\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tdefaultValue={name ? name : ''}\n\t\t\t\t\t\t\t\t\tplaceholder=\"Entity name\"\n\t\t\t\t\t\t\t\t\tclassName=\"editor-input input--item-name\"\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tlet message = 'Entity names shall begin with alphabetic characters from a to Z. The entity name may contain multiple underscores per word. Entity names shall not contain any numbers at all or soecial characters other than undersocres.'\n\t\t\t\t\t\t\t\t\t\tlet validate = validateInput(e.target, e.target.value, '^[A-Za-z](_*[A-Za-z])*_*$', message);\n\t\t\t\t\t\t\t\t\t\tsetValid(validate);\n\t\t\t\t\t\t\t\t\t\tsetName(e.target.value);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* Entity words */}\n\t\t\t\t\t\t<div className=\"margin--50--large\">\n\t\t\t\t\t\t\t<h3 className=\"font--18--large margin--10--large\">Values</h3>\n\t\t\t\t\t\t\t<div className=\"margin--24--large\">\n\t\t\t\t\t\t\t\t<EntityValues values={values} setValues={setValues} removeValue={removeValue} />\n\t\t\t\t\t\t\t\t<form onSubmit={(e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (newValue) {\n\t\t\t\t\t\t\t\t\t\taddNewValue();\n\t\t\t\t\t\t\t\t\t\tsetNewValue(null);\n\t\t\t\t\t\t\t\t\t\tvalueInput.current.value = '';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"editor-input input--add-field\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter reference value\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setNewValue(e.target.value)}\n\t\t\t\t\t\t\t\t\t\tref={valueInput}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\treturn null;\n\t}\n}\n\nexport default EntityDetails;\n","export const getRandomColor = () => {\n\tvar letters = \"0123456789ABCDEF\";\n\tvar color = \"#\";\n\n\tfor (var i = 0; i < 6; i++) {\n\t\tcolor += letters[Math.floor(Math.random() * 16)];\n\t}\n\treturn color;\n};\n\nexport const getColor = (index) => {\n\tlet arr = [\n\t\t\"#56ebd3\",\n\t\t\"#fbacf6\",\n\t\t\"#9ee786\",\n\t\t\"#e4b5ff\",\n\t\t\"#c2e979\",\n\t\t\"#20d8fd\",\n\t\t\"#e8d25c\",\n\t\t\"#42edec\",\n\t\t\"#f3c46f\",\n\t\t\"#5cefba\",\n\t\t\"#e8de7a\",\n\t\t\"#7ee8c0\",\n\t\t\"#e8d98c\",\n\t\t\"#88e99a\",\n\t\t\"#cfdd73\",\n\t\t\"#8be8ad\",\n\t\t\"#dff799\",\n\t\t\"#b5eaa1\",\n\t\t\"#c2d681\",\n\t\t\"#b5e287\",\n\t];\n\n\treturn arr[index % arr.length]\n};\n","import React, { useState, useEffect, useRef } from 'react';\nimport useOnclickOutside from 'react-cool-onclickoutside';\nimport TextInput from 'react-autocomplete-input';\nimport 'react-autocomplete-input/dist/bundle.css';\n\nfunction Modal(props) {\n\tconst [ entities, setEntities ] = useState(props.entities);\n\tconst [ allEntities, setAllEntities ] = useState(props.entities);\n\tconst [ entitiesNames, setEntitiesNames ] = useState([]);\n\tconst input = useRef();\n\n\tconst modalRef = useOnclickOutside(() => {\n\t\tprops.setModal(false);\n\t\tprops.setSelection(null);\n\t});\n\n\tconst filterEntities = (term) => {\n\t\tlet arr = [ ...allEntities ];\n\t\tlet filteredArr = arr.filter(\n\t\t\t(item) => item.name && item.name.toLowerCase().includes(term.trim().toLowerCase())\n\t\t);\n\n\t\tsetEntities(filteredArr);\n\t};\n\n\tuseEffect(\n\t\t() => {\n\t\t\tlet arr = entities\n\t\t\t\t.map((item) => {\n\t\t\t\t\treturn item.name;\n\t\t\t\t})\n\t\t\t\t.filter((item) => item);\n\t\t\t//console.log(arr)\n\t\t\tsetEntitiesNames(arr);\n\t\t},\n\t\t[ entities ]\n\t);\n\n\tconst makeEntities = (items) => {\n\t\tconst handleDefaultParam = (param) => {\n\t\t\tif (param.includes('.')) {\n\t\t\t\treturn param.split('.').pop();\n\t\t\t} else {\n\t\t\t\treturn param.split('@').pop();\n\t\t\t}\n\t\t};\n\t\tif (items) {\n\t\t\treturn items.map((item, i) => {\n\t\t\t\treturn (\n\t\t\t\t\t<button\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t\tlet type = '@' + item.name;\n\t\t\t\t\t\t\tlet slotValue = item.name;\n\n\t\t\t\t\t\t\tconst getParamValues = () => {\n\t\t\t\t\t\t\t\tlet found = props.paramValues.find(obj => obj.type === type);\n\t\t\t\t\t\t\t\tif (found) {\n\t\t\t\t\t\t\t\t\treturn found.slot_value\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn handleDefaultParam(slotValue)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tprops.setModal(false);\n\t\t\t\t\t\t\tprops.selection.item.setAttribute('data-type', type);\n\t\t\t\t\t\t\tprops.selection.item.setAttribute('data-slot-value', getParamValues());\n\t\t\t\t\t\t\tprops.mapNodesToModel(\n\t\t\t\t\t\t\t\tdocument.querySelector('.item--active [contenteditable=\"true\"]').childNodes,\n\t\t\t\t\t\t\t\tprops.active\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tprops.setSelection(null);\n\t\t\t\t\t\t\tprops.setStateChange(!props.stateChange);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span role=\"img\">@{item.name}</span>\n\t\t\t\t\t</button>\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tif (entities) {\n\t\treturn (\n\t\t\t<div id=\"dropdown-modal\" className={`dropdown ${props.modal && 'dropdown--active'}`} ref={modalRef}>\n\t\t\t\t<div className=\"dropdown__search-wrap\">\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tComponent=\"input\"\n\t\t\t\t\t\ttrigger=\"\"\n\t\t\t\t\t\toptions={entitiesNames}\n\t\t\t\t\t\tspaceRemovers={[]}\n\t\t\t\t\t\tmatchAny={true}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tfilterEntities(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tref={input}\n\t\t\t\t\t\tclassName=\"dropdown__search editor-input\"\n\t\t\t\t\t\tplaceholder=\"Filter entities\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"dropdown__inner\">{entities && makeEntities(entities)}</div>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\treturn null;\n\t}\n}\n\nexport { Modal };\n","import { times } from 'lodash';\nimport React from 'react';\nimport ContentEditable from 'react-contenteditable';\nimport reactHtmlParser from 'react-html-parser';\n\nclass Input extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tmodel: this.props.model\n\t\t};\n\n\t\tthis.text = React.createRef('');\n\t\tthis.handleSelection = this.handleSelection.bind(this);\n\t\tthis.handleModal = this.handleModal.bind(this);\n\t}\n\n\tshouldComponentUpdate(nextProps) {\n\t\tif (\n\t\t\tnextProps.utterances.length !== this.props.utterances.length ||\n\t\t\tthis.props.stateChange !== nextProps.stateChange ||\n\t\t\tnextProps.active !== this.props.active\n\t\t) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn this.props.model.length === 0;\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tconsole.log(this.props.active, prevProps.active);\n\t\tif (this.props.active !== prevProps.active || (this.props.active && !this.text.current.length)) {\n\t\t\tthis.text.current && this.text.current.focus();\n\t\t}\n\t}\n\n\thandleModal(selection, relativePos) {\n\t\tdocument.querySelector('#dropdown-modal').style.left = `${relativePos.left + 24}px`;\n\t\tdocument.querySelector('#dropdown-modal').style.top = `${relativePos.top + 2 * 24}px`;\n\t\tthis.props.setModal(true);\n\t\tthis.props.setSelection({ item: selection, index: this.props.index });\n\t}\n\n\thandleSelection(e) {\n\t\tfunction unwrap(node) {\n\t\t\tnode.replaceWith(...node.childNodes);\n\t\t}\n\n\t\tlet selection = window.getSelection().getRangeAt(0);\n\t\tif (selection.toString()) {\n\t\t\tlet textNode = document.createTextNode(selection.toString());\n\t\t\tlet selectedText = selection.extractContents();\n\t\t\tlet span = document.createElement('span');\n\t\t\tlet nested = span.querySelectorAll('*');\n\n\t\t\tspan.appendChild(textNode);\n\t\t\tspan.setAttribute('class', 'highlight');\n\t\t\tspan.textContent = span.textContent.trim();\n\t\t\tselection.insertNode(span);\n\n\t\t\te.target.childNodes.forEach((child) => {\n\t\t\t\tif (child.dataset && !child.dataset.type && child !== span) {\n\t\t\t\t\tchild.replaceWith(child.textContent);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t/* nested.forEach((item) => {\n\t\t\t\tunwrap(item);\n\t\t\t}); */\n\n\t\t\tif (span.parentNode.tagName === 'SPAN') {\n\t\t\t\tspan.parentNode.outerHTML = span.parentNode.innerHTML;\n\t\t\t}\n\n\t\t\tlet parentPos = document.querySelector('.convo-details').getBoundingClientRect();\n\t\t\tlet childPos = span.getBoundingClientRect();\n\n\t\t\tlet relativePos = {\n\t\t\t\ttop: childPos.top - parentPos.top,\n\t\t\t\tleft: childPos.left - parentPos.left\n\t\t\t};\n\n\t\t\tthis.handleModal(span, relativePos);\n\t\t}\n\t}\n\n\trender() {\n\t\tif (this.props.model) {\n\t\t\tlet mappedModel = this.props.model.filter((item) => item.text.trim().length);\n\n\t\t\tmappedModel = this.props.model.map((item, index) => {\n\t\t\t\tif (item.type) {\n\t\t\t\t\treturn `<span data-token=\"true\" style=\"background:${item.color}\" data-slot-value=\"${item.slot_value}\" data-type=\"${item.type}\" class=\"highlight\">${item.text.trim()}</span>`;\n\t\t\t\t} else {\n\t\t\t\t\treturn item.text;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst disableNewlines = (evt) => {\n\t\t\t\tconst keyCode = evt.keyCode || evt.which;\n\n\t\t\t\tif (keyCode === 13) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tthis.props.focusOnExpressionInput();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (this.props.active) {\n\t\t\t\treturn (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<div className=\"item__input\">\n\t\t\t\t\t\t\t<ContentEditable\n\t\t\t\t\t\t\t\tinnerRef={this.text}\n\t\t\t\t\t\t\t\thtml={`${mappedModel.join(' ')} `}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\tif (e.target.getAttribute('data-token')) {\n\t\t\t\t\t\t\t\t\t\tthis.handleModal(e.target, e);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonKeyPress={(e) => {\n\t\t\t\t\t\t\t\t\tdisableNewlines(e);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonMouseUp={(e) => {\n\t\t\t\t\t\t\t\t\tthis.handleSelection(e);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tlet nodes = e.currentTarget.childNodes;\n\t\t\t\t\t\t\t\t\tnodes = nodes.forEach((item) => {\n\t\t\t\t\t\t\t\t\t\tif (!item.textContent.trim().length && item.tagName === 'SPAN') {\n\t\t\t\t\t\t\t\t\t\t\titem.remove();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tthis.props.mapNodesToModel(e.currentTarget.childNodes, this.props.index);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"item__input item__input--readonly\">\n\t\t\t\t\t\t<div style={{ opacity: mappedModel.join(' ').trim().length ? '1' : '0.5' }}>\n\t\t\t\t\t\t\t{mappedModel.join(' ').trim().length ? (\n\t\t\t\t\t\t\t\treactHtmlParser(mappedModel.join(' '))\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t'Input text'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\treturn <div />;\n\t\t}\n\t}\n}\n\nexport default Input;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { IconTrash } from '../../../assets/icon_trash.jsx';\nimport Input from './input.jsx';\nimport { Component } from 'react';\nimport _ from 'lodash';\n\nconst Utterance = (props) => {\n\tconst [remove, setRemove] = useState(false);\n\tconst [valid, setValid] = useState(true);\n\n\tconst wrapper = useRef(null);\n\tconst removeBtn = useRef(null);\n\n\tlet data = props.data;\n\n\tuseEffect(() => {\n\t\tlet slotValues = props.data.model.map(item => item.slot_value).filter(item => item);\n\t\tlet invalidValues = slotValues.filter(item => !item.match(/^[A-Za-z](_*[A-Za-z])*_*$/));\n\n\t\tlet term = props.data.model.map(item => item.text).join(' ');\n\t\tlet reg = /^[a-zA-Z][a-zA-Z\\s]*$/;\n\n\t\tif (reg.test(term) && !invalidValues.length) {\n\t\t\tsetValid(true);\n\t\t} else {\n\t\t\tsetValid(false);\n\t\t}\n\t}, [props.data.model]);\n\n\treturn (\n\t\t<li\n\t\t\tdata-valid={`${valid}`}\n\t\t\tref={wrapper}\n\t\t\tkey={data.index}\n\t\t\tclassName={`item item--intent ${data.active ? 'item--active' : ''} ${remove\n\t\t\t\t? 'item--remove'\n\t\t\t\t: ''} ${valid ? 'item--valid' : 'item--error'}`}\n\t\t\tonClick={() => {\n\t\t\t\tdata.handleActive(data.index);\n\t\t\t}}\n\t\t>\n\t\t\t{!valid && <legend className=\"item__error\">Utterances shall begin with alphabetic characters from a to Z. The untterance may not contain other characters then alphabetic characters. The utterance shall not contain any numbers at all.</legend>}\n\t\t\t<div className=\"item__main\">\n\t\t\t\t<Input\n\t\t\t\t\tmodel={data.model}\n\t\t\t\t\tindex={data.index}\n\t\t\t\t\tutterances={data.utterances}\n\t\t\t\t\tsetUtterances={data.setUtterances}\n\t\t\t\t\tmodal={data.modal}\n\t\t\t\t\tsetModal={data.setModal}\n\t\t\t\t\tsetSelection={data.setSelection}\n\t\t\t\t\tselection={data.selection}\n\t\t\t\t\tmapNodesToModel={data.mapNodesToModel}\n\t\t\t\t\tactive={data.active}\n\t\t\t\t\taddNewValue={data.addNewValue}\n\t\t\t\t\tstateChange={data.stateChange}\n\t\t\t\t\tfocusOnExpressionInput={data.focusOnExpressionInput}\n\t\t\t\t\twrapper={wrapper}\n\t\t\t\t/>\n\t\t\t\t<div className=\"item__buttons\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn--remove btn--remove--main\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tref={removeBtn}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tsetRemove(true)\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tdata.removeFromUtterances(data.index);\n\t\t\t\t\t\t\t\tsetRemove(false);\n\t\t\t\t\t\t\t}, 220);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconTrash />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{data.model && data.model.filter((item) => item.type).length ? (\n\t\t\t\t<ul className=\"model\" style={{display: `${data.active ? 'block' : 'none'}`}}>\n\t\t\t\t\t<header>\n\t\t\t\t\t\t<div>Parameter Name</div>\n\t\t\t\t\t\t<div>Entity</div>\n\t\t\t\t\t\t<div>Resolved Value</div>\n\t\t\t\t\t</header>\n\t\t\t\t\t{data.model.map((item, i) => {\n\t\t\t\t\t\tif (item.type) {\n\t\t\t\t\t\t\tlet slotValue = item.slot_value;\n\t\t\t\t\t\t\tlet type = item.type;\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li key={i}>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclassName=\"editor-input\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tdefaultValue={slotValue}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\tlet arr = [...data.utterances];\n\t\t\t\t\t\t\t\t\t\t\tarr[data.index].model[i].slot_value = e.target.value;\n\t\t\t\t\t\t\t\t\t\t\tdata.setUtterances(arr);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Set parameter name\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<span className=\"highlight\" style={{ background: item.color }}>\n\t\t\t\t\t\t\t\t\t\t\t{type}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div>{item.text}</div>\n\t\t\t\t\t\t\t\t\t<div className=\"item__buttons\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn--remove\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault(e);\n\t\t\t\t\t\t\t\t\t\t\t\tdata.removeFromModel(data.index, i);\n\t\t\t\t\t\t\t\t\t\t\t\tdata.setStateChange(!data.stateChange);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<IconTrash />\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t) : (\n\t\t\t\t\t<React.Fragment />\n\t\t\t\t)}\n\t\t</li>\n\t);\n}\n\nexport default Utterance;\n","import React, { useState, useEffect } from 'react';\nimport { getColor } from '../../helpers/common_constants.jsx';\nimport { Modal } from './intent_modal.jsx';\nimport Utterance from './utterance/utterance.jsx';\n\nconst List = React.memo(function List(props) {\n\tconst [ modal, setModal ] = useState(false);\n\tconst [ modalPosition, setModalPosition ] = useState(null);\n\tconst [ selection, setSelection ] = useState(null);\n\tconst [ update, setUpdate ] = useState(false);\n\tconst [ stateChange, setStateChange ] = useState(false);\n\tconst [ paramValues, setParamValues ] = useState(null);\n\tconst intents = props.intents;\n\n\tuseEffect(\n\t\t() => {\n\t\t\t// get every item type & slot value pair from utterances array\n\t\t\tlet arr = props.utterances\n\t\t\t\t.map((item) => item.model)\n\t\t\t\t.flat()\n\t\t\t\t.filter((item) => item.slot_value)\n\t\t\t\t.map((item) => ({ type: item.type, slot_value: item.slot_value }));\n\n\n\t\t\t// remove duplicate pairs \n\t\t\tlet uniq = arr.filter((v, i, a) => a.findIndex((t) => t.slot_value === v.slot_value) === i);\n\t\t\tsetParamValues(uniq);\n\t\t},\n\t\t[ props.utterances ]\n\t);\n\n\tconst handleActive = (index) => {\n\t\tprops.setActive(index);\n\t};\n\n\tconst mapNodesToModel = (items, index) => {\n\t\tlet arr = Array.from(items).filter((item) => item.textContent.trim().length);\n\n\t\tlet i = 0;\n\t\tarr = arr.map((item) => {\n\t\t\tif (item.tagName === 'SPAN' || (item.nodeName === '#text' && item.textContent.trim().length)) {\n\t\t\t\tlet type = item.dataset && item.dataset.type && item.dataset.type.length ? item.dataset.type : null;\n\t\t\t\tif (type) {\n\t\t\t\t\ti++;\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttext: item.textContent.trim(),\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\tslot_value: item.dataset.slotValue\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn { text: item.textContent.trim() };\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\n\t\tarr = arr.filter((item) => item);\n\n\t\tconsole.log('arr', arr);\n\n\t\tlet values = [ ...props.utterances ];\n\t\tvalues[index] = { raw: arr.map((item) => item.text).join(' '), model: arr };\n\t\tprops.setUtterances(values);\n\t};\n\n\tconst makeItems = (items) => {\n\t\treturn items.map((item, index) => {\n\t\t\tlet model = item.model.map((val) => {\n\t\t\t\treturn { ...val, color: getColor(val.text.length) };\n\t\t\t});\n\n\t\t\tlet data = {\n\t\t\t\tindex: index,\n\t\t\t\tactive: index === props.active,\n\t\t\t\tmodel: model,\n\t\t\t\tutterances: props.utterances,\n\t\t\t\tsetUtterances: props.setUtterances,\n\t\t\t\thandleActive: handleActive,\n\t\t\t\tmodal: modal,\n\t\t\t\tsetModal: setModal,\n\t\t\t\tsetModalPosition: setModalPosition,\n\t\t\t\tselection: selection,\n\t\t\t\tsetSelection: setSelection,\n\t\t\t\taddNewValue: props.addNewValue,\n\t\t\t\tstateChange: stateChange,\n\t\t\t\tsetStateChange: setStateChange,\n\t\t\t\tremoveFromUtterances: removeFromUtterances,\n\t\t\t\tremoveFromModel: props.removeFromModel,\n\t\t\t\tmapNodesToModel: mapNodesToModel,\n\t\t\t\tfocusOnExpressionInput: props.focusOnExpressionInput,\n\t\t\t};\n\n\t\t\treturn <Utterance key={index} data={data} errors={props.errors} />;\n\t\t});\n\t};\n\n\tconst removeFromUtterances = (index) => {\n\t\tlet arr = [ ...props.utterances ];\n\t\tif (index !== -1) {\n\t\t\tarr.splice(index, 1);\n\t\t\tconsole.log('new arr after delete', arr);\n\t\t\tprops.setUtterances(arr);\n\t\t\tprops.setActive(null);\n\t\t}\n\t};\n\n\tconsole.log(selection);\n\n\tif (props.utterances) {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<ul>{makeItems(props.utterances)}</ul>\n\t\t\t\t<Modal\n\t\t\t\t\tsetModal={setModal}\n\t\t\t\t\tmodal={modal}\n\t\t\t\t\tmodalPosition={modalPosition}\n\t\t\t\t\tselection={selection}\n\t\t\t\t\tsetSelection={setSelection}\n\t\t\t\t\tactive={props.active}\n\t\t\t\t\tutterances={props.utterances}\n\t\t\t\t\tsetUtterances={props.setUtterances}\n\t\t\t\t\tsetUpdate={setUpdate}\n\t\t\t\t\tupdate={update}\n\t\t\t\t\tmapNodesToModel={mapNodesToModel}\n\t\t\t\t\tstateChange={stateChange}\n\t\t\t\t\tsetStateChange={setStateChange}\n\t\t\t\t\tentities={props.entities.flat()}\n\t\t\t\t\tparamValues={paramValues}\n\t\t\t\t\tsetParamValues={setParamValues}\n\t\t\t\t/>\n\t\t\t</React.Fragment>\n\t\t);\n\t} else {\n\t\treturn null;\n\t}\n});\n\nexport { List };\n","import React, { useState, useEffect } from 'react';\nimport { List as Utterances } from './intent_utterances.jsx';\nimport { useRef } from 'react';\nimport { validateInput } from '../../helpers/validations.jsx';\n\nfunction IntentDetails(props) {\n  const [intent, setIntent] = useState(props.intent);\n  const entities = props.entities;\n  const systemEntities = props.systemEntities;\n\n  const [name, setName] = useState('');\n  const [utterances, setUtterances] = useState([]);\n  const [active, setActive] = useState(null);\n  const [newExpression, setNewExpression] = useState(null);\n  const [nameValid, setNameValid] = useState(true);\n\n  const newExpressionInput = useRef(null);\n\n  let errors = Array.from(document.querySelectorAll('[data-valid=\"false\"]'));\n\n\n  const focusOnExpressionInput = () => {\n    newExpressionInput.current.focus();\n    newExpressionInput.current.value = '';\n    setActive(null);\n  };\n\n  // add new value to value array\n  function addNewValue() {\n    let arr = [...utterances];\n    let newUtterance = {\n      raw: newExpression ? newExpression : '',\n      model: [{ text: newExpression ? newExpression : '' }],\n    };\n    arr = [newUtterance, ...arr];\n    setUtterances(arr);\n    setActive(0);\n  }\n\n  const removeFromModel = (utteranceIndex, index) => {\n    let arr = [...utterances];\n    let model = arr[utteranceIndex].model;\n    model[index] = {\n      text: model[index].text,\n    };\n\n    setUtterances(arr);\n  };\n\n  // check if data is passed in props\n  useEffect(() => {\n    if (intent) {\n      setName(intent.name);\n      setUtterances(intent.utterances);\n    }\n  }, [intent]);\n\n  useEffect(() => {\n\n    console.log('errors --->', errors.length < 1)\n    if (name && utterances) {\n      props.onUpdate({\n        ...intent,\n        name: name,\n        utterances: utterances,\n      }, errors.length < 1);\n    }\n  }, [name, utterances]);\n\n  if (intent) {\n    return (\n      <div className=\"convo-details\">\n        <section className=\"layout--editor-content\">\n          <div>\n            {/* Entity name value */}\n            <div className=\"margin--30--large\">\n              <h3 className=\"margin--10--large\">Intent name</h3>\n              <form\n                onSubmit={e => {\n                  e.preventDefault();\n                }}\n              >\n                <input\n                  data-valid={`${nameValid}`}\n                  type=\"text\"\n                  defaultValue={name ? name : ''}\n                  placeholder=\"Intent name\"\n                  className=\"editor-input input--item-name\"\n                  onChange={e => {\n                    let message =\n                      'Intent names shall begin with alphabetic characters from a to Z. The intent name may contain 1 underscore per word. Intent names shall not contain any numbers at all.';\n                    let valid = validateInput(\n                      e.target,\n                      e.target.value,\n                      '^[A-Za-z](_?[A-Za-z])*_?$',\n                      message\n                    );\n\n                    setNameValid(valid);\n                    setName(e.target.value);\n                  }}\n                  required\n                />\n              </form>\n            </div>\n            {/* Entity words */}\n            <div className=\"margin--50--large\">\n              <h3 className=\"margin--10--large\">Utterances</h3>\n              <div className=\"margin--24--large\">\n                <form\n                  onSubmit={e => {\n                    e.preventDefault();\n                    if (newExpression) {\n                      addNewValue();\n                      setNewExpression(null);\n                      newExpressionInput.current.value = '';\n                    }\n                  }}\n                >\n                  <input\n                    type=\"text\"\n                    className=\"editor-input input--add-field\"\n                    placeholder=\"Enter reference value\"\n                    onChange={e => setNewExpression(e.target.value)}\n                    ref={newExpressionInput}\n                    onFocus={() => {\n                      setActive(null);\n                    }}\n                  />\n                </form>\n                <Utterances\n                  addNewValue={addNewValue}\n                  active={active}\n                  setActive={setActive}\n                  utterances={utterances}\n                  setUtterances={setUtterances}\n                  removeFromModel={removeFromModel}\n                  entities={[entities, ...systemEntities]}\n                  focusOnExpressionInput={focusOnExpressionInput}\n                  errors={errors}\n                />\n              </div>\n            </div>\n          </div>\n        </section>\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nexport default IntentDetails;\n","import React from 'react'\nimport EntityDetails from './components/EntityComponent/entity_details'\nimport IntentDetails from './components/IntentComponent/intent_details'\nimport './styles.scss'\n\nexport const IntentEditor = (props) => {\n  return <IntentDetails intent={props.intent} entities={props.entities} systemEntities={props.systemEntities} onUpdate={props.onUpdate} />\n}\n\nexport const EntitiyEditor = (props) => {\n  return <EntityDetails entity={props.entity} onUpdate={props.onUpdate} />\n}"],"names":["IconTrash","EntityValue","props","useState","item","value","setValue","synonyms","setSynonyms","newSynonym","setNewSynonym","remove","setRemove","synonymInput","useRef","useEffect","handleUpdate","values","index","handleNewSynonym","target","current","length","removeSynonym","arr","indexOf","splice","makeSynonyms","items","active","map","i","handleRemove","e","stopPropagation","setTimeout","removeValue","activeValue","setActiveValue","preventDefault","marginLeft","EntityValues","setValues","makeItems","validateInput","elem","term","regex","message","reg","RegExp","test","setCustomValidity","reportValidity","EntityDetails","entity","setEntity","name","setName","newValue","setNewValue","valid","setValid","valueInput","onUpdate","addNewValue","val","validate","getColor","Modal","entities","setEntities","allEntities","entitiesNames","setEntitiesNames","input","modalRef","useOnclickOutside","setModal","setSelection","filterEntities","filteredArr","filter","toLowerCase","includes","trim","makeEntities","handleDefaultParam","param","split","pop","type","slotValue","getParamValues","found","paramValues","find","obj","slot_value","selection","setAttribute","mapNodesToModel","document","querySelector","childNodes","setStateChange","stateChange","modal","Input","state","model","text","React","createRef","handleSelection","bind","handleModal","shouldComponentUpdate","nextProps","utterances","componentDidUpdate","prevProps","console","log","focus","relativePos","style","left","top","window","getSelection","getRangeAt","toString","textNode","createTextNode","selectedText","extractContents","span","createElement","nested","querySelectorAll","appendChild","textContent","insertNode","forEach","child","dataset","replaceWith","parentNode","tagName","outerHTML","innerHTML","parentPos","getBoundingClientRect","childPos","render","mappedModel","color","disableNewlines","evt","keyCode","which","focusOnExpressionInput","join","getAttribute","nodes","currentTarget","opacity","reactHtmlParser","Component","Utterance","wrapper","removeBtn","data","slotValues","invalidValues","match","handleActive","setUtterances","removeFromUtterances","display","background","removeFromModel","List","memo","modalPosition","setModalPosition","update","setUpdate","setParamValues","flat","uniq","v","a","findIndex","t","setActive","Array","from","nodeName","raw","errors","IntentDetails","intent","systemEntities","newExpression","setNewExpression","nameValid","setNameValid","newExpressionInput","newUtterance","utteranceIndex","Utterances","IntentEditor","EntitiyEditor"],"mappings":"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"}