{"version":3,"file":"index.modern.js","sources":["../src/helpers/common_constants.jsx","../src/helpers/image_paths.jsx","../src/components/Icons/Icons.jsx","../src/components/EntityComponent/EntityValue.jsx","../src/components/EntityComponent/EntityValues.jsx","../src/helpers/validations.jsx","../src/components/EntityComponent/EntityDetails.jsx","../src/components/IntentComponent/utterance/UtteranceSlotValue.jsx","../src/components/IntentComponent/Dropdown.jsx","../src/components/IntentComponent/utterance/UtteranceInput.jsx","../src/components/IntentComponent/utterance/Utterance.jsx","../src/components/IntentComponent/IntentUtterances.jsx","../src/components/IntentComponent/IntentDetails.jsx","../src/index.js"],"sourcesContent":["export const getRandomColor = () => {\n\tvar letters = \"0123456789ABCDEF\";\n\tvar color = \"#\";\n\n\tfor (var i = 0; i < 6; i++) {\n\t\tcolor += letters[Math.floor(Math.random() * 16)];\n\t}\n\treturn color;\n};\n\nexport const stringToColor = (value) => {\n\treturn value.getHashCode().intToHSL();\n}\n\nString.prototype.getHashCode = function () {\n\tvar hash = 0;\n\tif (this.length == 0) return hash;\n\tfor (var i = 0; i < this.length; i++) {\n\t\thash = this.charCodeAt(i) + ((hash << 5) - hash);\n\t\thash = hash & hash; // Convert to 32bit integer\n\t}\n\treturn hash;\n};\n\nNumber.prototype.intToHSL = function () {\n\tvar shortened = this % 220;\n\treturn \"hsl(\" + shortened + \",100%, 80%)\";\n};\n\nexport const generateId = (length) => {\n\tvar result = '';\n\tvar characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\tvar charactersLength = characters.length;\n\tfor (var i = 0; i < length; i++) {\n\t\tresult += characters.charAt(Math.floor(Math.random() * charactersLength));\n\t}\n\treturn result;\n}\n\nexport const getCaretCharacterOffsetWithin = (element) => {\n\tvar caretOffset = 0;\n\tvar doc = element.ownerDocument || element.document;\n\tvar win = doc.defaultView || doc.parentWindow;\n\tvar sel;\n\tif (typeof win.getSelection != \"undefined\") {\n\t\tsel = win.getSelection();\n\t\tif (sel.rangeCount > 0) {\n\t\t\tvar range = win.getSelection().getRangeAt(0);\n\t\t\tvar preCaretRange = range.cloneRange();\n\t\t\tpreCaretRange.selectNodeContents(element);\n\t\t\tpreCaretRange.setEnd(range.endContainer, range.endOffset);\n\t\t\tcaretOffset = preCaretRange.toString().length;\n\t\t}\n\t} else if ((sel = doc.selection) && sel.type != \"Control\") {\n\t\tvar textRange = sel.createRange();\n\t\tvar preCaretTextRange = doc.body.createTextRange();\n\t\tpreCaretTextRange.moveToElementText(element);\n\t\tpreCaretTextRange.setEndPoint(\"EndToEnd\", textRange);\n\t\tcaretOffset = preCaretTextRange.text.length;\n\t}\n\treturn caretOffset;\n}\n\nexport const getColor = (index) => {\n\tlet arr = [\n\t\t\"#56ebd3\",\n\t\t\"#fbacf6\",\n\t\t\"#9ee786\",\n\t\t\"#e4b5ff\",\n\t\t\"#c2e979\",\n\t\t\"#20d8fd\",\n\t\t\"#e8d25c\",\n\t\t\"#42edec\",\n\t\t\"#f3c46f\",\n\t\t\"#5cefba\",\n\t\t\"#e8de7a\",\n\t\t\"#7ee8c0\",\n\t\t\"#e8d98c\",\n\t\t\"#88e99a\",\n\t\t\"#cfdd73\",\n\t\t\"#8be8ad\",\n\t\t\"#dff799\",\n\t\t\"#b5eaa1\",\n\t\t\"#c2d681\",\n\t\t\"#b5e287\",\n\t];\n\n\treturn arr[index % arr.length]\n};\n\nexport const preventSubmit = (event) => {\n\tif (event.keyCode == 13) {\n\t\tevent.preventDefault();\n\t\treturn false;\n\t}\n}\n\n// Move caret to a specific point in a DOM element\nexport const setCaretPosition = (el, pos) => {\n\n\t// Loop through all child nodes\n\tfor (var node of el.childNodes) {\n\t\tif (node.nodeType == 3) { // we have a text node\n\t\t\tif (node.length >= pos) {\n\t\t\t\t// finally add our range\n\t\t\t\tvar range = document.createRange(),\n\t\t\t\t\tsel = window.getSelection();\n\t\t\t\trange.setStart(node, pos);\n\t\t\t\trange.collapse(true);\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t\treturn -1; // we are done\n\t\t\t} else {\n\t\t\t\tpos -= node.length;\n\t\t\t}\n\t\t} else {\n\t\t\tpos = setCaretPosition(node, pos);\n\t\t\tif (pos == -1) {\n\t\t\t\treturn -1; // no need to finish the for loop\n\t\t\t}\n\t\t}\n\t}\n\treturn pos; // needed because of recursion stuff\n}\n","export const intentModelIcon = '../assets/icons/intent_model.svg';\nexport const iconSearch = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAABW0lEQVRIid3Uyy5sQRQG4A9DGhMSY7ehW5zZIXEZmnoavAQTvIHwCEJaTMToSPACBggibSgY7LXTrTm7q1sYWEllVWr/l6pVexW/PRaxjUs8xbjAFha+IjyCMl4bjEMMNys+i/sQuMYKxtEZYyLWbgJzj7+p4qN4COIOSgXYbuwG9k7iSfKy7KAtAd+GveAcNAIvqpalaOf10aNarvn6j+018+XI66g0YfCIjTqNT+MydjHWhHgeE8G9KAJVAtTVgkEpuB9O3v4Rm3S5/+O8FBlcRR5swWCoTuNTg3LkpRYMck65CLQgq+ONrIlSoxe3wZ1rBD4M4K60u+jAcXD2U3YzLGv73KSnANtbI/6MPykGMFNjcotVTMp+3xKmsKZalufIZ+hPNRmSvS2Nnut9TOOfaqMNpJqQvS2bOJc1USXmm95faN9XTFKjX1amV5x8h0Fucoqj7zL4+XgDjSNoKGD0WBAAAAAASUVORK5CYII=';\nexport const iconTrash = 'data:image/png;base64,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';\n","import React from 'react';\nimport { ReactSVG } from 'react-svg';\nimport { iconTrash } from '../../helpers/image_paths';\n\n\nexport const IconTrash = () => {\n  return <img src={iconTrash} alt=\"Remove\" aria-label=\"Remove\" width=\"32\" />\n}\n\nexport const  IconRemove = () => {\n\treturn <span role=\"img\" aria-label=\"Remove\">&#x274C;</span>;\n}\n\nexport const  IconSearch = () => {\n  return <ReactSVG src={search} />\n}\n","import React, { useState, useRef, useEffect } from 'react';\nimport { preventSubmit } from '../../helpers/common_constants';\nimport { IconTrash } from '../Icons/Icons';\n\nconst EntityValue = (props) => {\n\tconst [value, setValue] = useState(props.item.value);\n\tconst [synonyms, setSynonyms] = useState(props.item.synonyms);\n\tconst [newSynonym, setNewSynonym] = useState('');\n\tconst [remove, setRemove] = useState(false);\n\tconst synonymInput = useRef(null);\n\n\tlet active = props.activeValue === props.index;\n\n\tuseEffect(\n\t\t() => {\n\t\t\tprops.handleUpdate([...props.values], props.index, {\n\t\t\t\tvalue: value,\n\t\t\t\tsynonyms: synonyms\n\t\t\t});\n\t\t},\n\t\t[value, synonyms]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (newSynonym) {\n\t\t\t\tif (synonyms) {\n\t\t\t\t\tsetSynonyms([...synonyms, newSynonym]);\n\t\t\t\t} else {\n\t\t\t\t\tsetSynonyms(newSynonym);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t},\n\t\t[newSynonym]\n\t);\n\n\tconst handleNewSynonym = (target) => {\n\t\tif (target.current.value.length > 0) {\n\t\t\tsetNewSynonym(target.current.value);\n\t\t\ttarget.current.value = '';\n\t\t} else {\n\t\t\tsetNewSynonym('');\n\t\t}\n\t};\n\n\t// synonyms\n\tconst removeSynonym = (value) => {\n\t\tlet arr = [...synonyms];\n\t\tlet index = arr.indexOf(value);\n\n\t\tif (index !== -1) {\n\t\t\tarr.splice(index, 1);\n\t\t\tsetSynonyms(arr);\n\t\t}\n\t};\n\n\tconst makeSynonyms = (items, isActive) => {\n\t\tif (items) {\n\t\t\treturn (\n\t\t\t\titems &&\n\t\t\t\titems.map((item, i) => {\n\t\t\t\t\tif (item) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={i} className=\"synonym\">\n\t\t\t\t\t\t\t\t{item}\n\t\t\t\t\t\t\t\t{isActive &&\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"synonym__remove\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tremoveSynonym(item);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t&#10005;\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t};\n\n\tconst handleRemove = (e) => {\n\t\te.stopPropagation();\n\t\tsetRemove(true);\n\t\tsetTimeout(() => {\n\t\t\tprops.removeValue(props.index);\n\t\t\tsetRemove(false);\n\t\t}, 220);\n\t};\n\n\treturn (\n\t\t<li\n\t\t\tclassName={`field field--${active ? 'active' : 'inactive'} field--entity ${remove ? 'field--remove' : ''}`}\n\t\t\tonClick={() => {\n\t\t\t\tprops.setActiveValue(props.index);\n\t\t\t}}\n\t\t>\n\t\t\t<div className=\"field__value\">\n\t\t\t\t{active ?\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName=\"editor-input\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tdefaultValue={value}\n\t\t\t\t\t\tplaceholder=\"Enter value\"\n\t\t\t\t\t\tonKeyDown={(e) => preventSubmit(e)}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetValue(e.target.value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\n\t\t\t\t\t:\n\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName=\"editor-input\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tdefaultValue={value}\n\t\t\t\t\t\tplaceholder=\"Enter value\"\n\t\t\t\t\t\tonKeyDown={(e) => preventSubmit(e)}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetValue(e.target.value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t<div className=\"field__synonyms\">\n\t\t\t\t{makeSynonyms(synonyms, active)}\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"editor-input\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tstyle={{ marginLeft: '0.625rem' }}\n\t\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\t\tpreventSubmit(e);\n\t\t\t\t\t\tif (e.keyCode == 13) {\n\t\t\t\t\t\t\thandleNewSynonym(synonymInput);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tref={synonymInput}\n\t\t\t\t\tplaceholder=\"Enter synonym\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"field__actions\">\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"btn--remove btn--remove--main\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\thandleRemove(e);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<IconTrash />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</li>\n\t);\n};\n\nexport default EntityValue;\n","import React, { useState, useEffect } from 'react';\nimport EntityValue from './EntityValue.jsx';\n\nfunction EntityValues(props) {\n\tconst [ activeValue, setActiveValue ] = useState(null);\n\n\tfunction handleUpdate(arr, index, item) {\n\t\tarr[index] = {\n\t\t\tvalue: item.value,\n\t\t\tsynonyms: item.synonyms\n\t\t};\n\n\t\tprops.setValues(arr);\n\t}\n\n\tconst makeItems = (items) => {\n\t\tif (items) {\n\t\t\treturn items.map((item, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<React.Fragment key={index}>\n\t\t\t\t\t\t<EntityValue\n\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\tvalues={props.values}\n\t\t\t\t\t\t\tremoveValue={props.removeValue}\n\t\t\t\t\t\t\thandleUpdate={handleUpdate}\n\t\t\t\t\t\t\tactiveValue={activeValue}\n\t\t\t\t\t\t\tsetActiveValue={setActiveValue}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tif (props.values) {\n\t\treturn <div>{makeItems(props.values)}</div>;\n\t} else {\n\t\treturn null\n\t}\n}\n\nexport default EntityValues;\n","export const validateInput = (elem, term, regex, message) => {\n  let reg = new RegExp(regex);\n  if (reg.test(term)) {\n    elem.setCustomValidity('');\n  } else {\n    elem.setCustomValidity(message);\n  }\n  elem.reportValidity();\n\n  return reg.test(term);\n};\n\nexport const simpleValidateInput = (term, regex) => {\n  let reg = new RegExp(regex);\n  return reg.test(term); \n}","import React, { useState, useEffect } from 'react';\nimport EntityValues from './EntityValues.jsx';\nimport _ from 'lodash';\nimport { useRef } from 'react';\nimport { validateInput } from '../../helpers/validations.jsx';\nimport { preventSubmit } from '../../helpers/common_constants.jsx';\n\nfunction EntityDetails(props) {\n\tconst [entity, setEntity] = useState(null);\n\tconst [name, setName] = useState(null);\n\tconst [values, setValues] = useState(null);\n\tconst [newValue, setNewValue] = useState(null);\n\tconst [valid, setValid] = useState(true);\n\tconst valueInput = useRef(null);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (!entity) {\n\t\t\t\tsetEntity(props.entity);\n\t\t\t}\n\t\t},\n\t\t[props.entity]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetName(props.entity.name);\n\t\t\tsetValues(props.entity.values);\n\t\t},\n\t\t[entity]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (name && values) {\n\t\t\t\tprops.onUpdate({\n\t\t\t\t\tname: name,\n\t\t\t\t\tvalues: values\n\t\t\t\t}, valid);\n\t\t\t}\n\t\t},\n\t\t[name, values]\n\t);\n\n\t// add new value to value array\n\tconst addNewValue = () => {\n\t\tlet val = {\n\t\t\tvalue: newValue,\n\t\t\tsynonyms: []\n\t\t};\n\n\t\tlet arr = [...values, val];\n\t\tsetValues(arr);\n\t};\n\n\tconst removeValue = (index) => {\n\t\tlet arr = [...values];\n\t\tif (index !== -1) {\n\t\t\tarr.splice(index, 1);\n\t\t\tsetValues(arr);\n\t\t}\n\t};\n\n\tif (values) {\n\t\treturn (\n\t\t\t<div className=\"convo-details\">\n\t\t\t\t<section className=\"layout--editor-content\">\n\t\t\t\t\t<section className=\"entities-editor\">\n\t\t\t\t\t\t{/* Entity name value */}\n\t\t\t\t\t\t<div className=\"margin--30--large\">\n\t\t\t\t\t\t\t<h3 className=\"margin--10--large\">Entity name</h3>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tdefaultValue={name ? name : ''}\n\t\t\t\t\t\t\t\tplaceholder=\"Entity name\"\n\t\t\t\t\t\t\t\tclassName=\"editor-input input--item-name\"\n\t\t\t\t\t\t\t\tonKeyDown={(e) => preventSubmit(e)}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tlet message = 'Entity names shall begin with alphabetic characters from a to Z. The entity name may contain multiple underscores per word. Entity names shall not contain any numbers at all or soecial characters other than undersocres.'\n\t\t\t\t\t\t\t\t\tlet validate = validateInput(e.target, e.target.value, '^[A-Za-z](_*[A-Za-z])*_*$', message);\n\t\t\t\t\t\t\t\t\tsetValid(validate);\n\t\t\t\t\t\t\t\t\tsetName(e.target.value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* Entity words */}\n\t\t\t\t\t\t<div className=\"margin--50--large\">\n\t\t\t\t\t\t\t<h3 className=\"font--18--large margin--10--large\">Values</h3>\n\t\t\t\t\t\t\t<div className=\"margin--24--large\">\n\t\t\t\t\t\t\t\t<EntityValues values={values} setValues={setValues} removeValue={removeValue} />\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tclassName=\"editor-input input--add-field\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"Enter reference value\"\n\t\t\t\t\t\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\t\t\t\t\t\tpreventSubmit(e);\n\t\t\t\t\t\t\t\t\t\tif (e.keyCode === 13) {\n\t\t\t\t\t\t\t\t\t\t\tif (newValue) {\n\t\t\t\t\t\t\t\t\t\t\t\taddNewValue();\n\t\t\t\t\t\t\t\t\t\t\t\tsetNewValue(null);\n\t\t\t\t\t\t\t\t\t\t\t\tvalueInput.current.value = '';\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setNewValue(e.target.value)}\n\t\t\t\t\t\t\t\t\tref={valueInput}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\treturn null;\n\t}\n}\n\nexport default EntityDetails;\n","import React, { useEffect, useState, useRef } from 'react';\nimport { preventSubmit } from '../../../helpers/common_constants';\n\nconst UtteranceSlotValue = React.memo((props) => {\n  const [valid, setValid] = useState(true);\n\n  const validateSlotValue = () => {\n    let reg = /^[A-Za-z](_*[A-Za-z])*_*$/\n    setValid(reg.test(props.target.dataset.slotValue))\n  }\n\n  useEffect(() => {\n    validateSlotValue();\n  }, [props])\n\n  return (\n    <input\n      data-valid={valid}\n      pattern=\"^[A-Za-z](_*[A-Za-z])*_*$\"\n      value={props.slotValue}\n      onKeyDown={(e) => preventSubmit(e)}\n      onChange={(e) => {\n        props.target.dataset.slotValue = e.target.value;\n        props.updateRaw();\n      }} />\n\n  )\n})\n\nexport default UtteranceSlotValue;","import React, { useState, useEffect, useRef } from 'react';\nimport useOnclickOutside from 'react-cool-onclickoutside';\nimport TextInput from 'react-autocomplete-input';\nimport 'react-autocomplete-input/dist/bundle.css';\nimport { preventSubmit } from '../../helpers/common_constants';\n\nfunction Dropdown(props) {\n\tconst [term, setTerm] = useState('');\n\tconst [entities, setEntities] = useState(props.entities);\n\tconst [entitiesNames, setEntitiesNames] = useState([]);\n\tconst input = useRef();\n\t\n\n\tconst modalRef = useOnclickOutside(() => {\n\t\tprops.setSelection(null);\n\t});\n\n\tconst filterEntities = (str) => {\n\t\tsetTerm(str);\n\t};\n\n\tuseEffect(\n\t\t() => {\n\t\t\tlet arr = entities.flat()\n\t\t\t\t.map((item) => {\n\t\t\t\t\treturn item.name;\n\t\t\t\t})\n\t\t\t\t.filter((item) => item);\n\t\t\tsetEntitiesNames(arr);\n\t\t},\n\t\t[entities]\n\t);\n\n\tif (entities) {\n\n\t\tlet dropdownStyles = {\n\t\t\tposition: 'absolute',\n\t\t\ttop: '100%',\n\t\t\ttransition: 'all 220ms ease-in-out',\n\t\t\tvisibility: props.dropdownState.active ? 'visible' : 'hidden',\n\t\t\topacity: props.dropdownState.active ? '1' : '0',\n\t\t\tleft: props.dropdownState.position\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"dropdown\" ref={modalRef} style={dropdownStyles}>\n\t\t\t\t<header className=\"dropdown__header\">\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tComponent=\"input\"\n\t\t\t\t\t\ttrigger=\"\"\n\t\t\t\t\t\toptions={entitiesNames}\n\t\t\t\t\t\tspaceRemovers={[]}\n\t\t\t\t\t\tmatchAny={true}\n\t\t\t\t\t\tonKeyDown={(e) => preventSubmit(e)}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tfilterEntities(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tref={input}\n\t\t\t\t\t\tclassName=\"dropdown__search editor-input\"\n\t\t\t\t\t\tplaceholder=\"Filter entities\"\n\t\t\t\t\t/>\n\t\t\t\t</header>\n\t\t\t\t<div className=\"dropdown__items\">\n\t\t\t\t\t{entities.length && entities.flat().map((item, i) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tstyle={{display: item.name.toLowerCase().includes(term.toLocaleLowerCase().trim()) ? 'block' : 'none'}}\n\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tprops.tagSelection(item.name)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t@\n\t\t\t\t\t\t\t\t{item.name}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\treturn null;\n\t}\n}\n\nexport default Dropdown;\n","import React, { useRef, useEffect, useState } from 'react';\nimport rangy from 'rangy';\nimport ContentEditable from 'react-contenteditable'\nimport { getCaretCharacterOffsetWithin, stringToColor, setCaretPosition } from '../../../helpers/common_constants'\nimport Dropdown from '../Dropdown'\nimport sanitizeHtml from 'sanitize-html';\n\nconst UtteranceInput = (props) => {\n\n  const [dropdownState, setDropdownState] = useState({\n    position: 0,\n    active: false\n  });\n\n  const [keyPress, setKeyPress] = useState('');\n\n  const input = props.input;\n  const cursorPosition = useRef(null);\n\n  function createNode(type, slot_value, text) {\n\n    let mark = document.createElement('mark');\n    let newTextNode = document.createTextNode(text);\n\n    mark.appendChild(newTextNode);\n    mark.textContent = mark.textContent.trim();\n    mark.setAttribute('data-type', type);\n    mark.setAttribute('data-slot-value', slot_value);\n    mark.setAttribute('data-text', mark.textContent.trim());\n    mark.setAttribute('data-color', stringToColor(mark.textContent.trim()));\n    mark.style.background = stringToColor(text);\n\n    return mark;\n  }\n\n  const tagSelection = (type) => {\n    if (props.selection) {\n      if (!props.selection.tagName) {\n\n        const getSlotValue = (type) => {\n          let existingSlotValue = props.slotValuePairs.find(item => item.type === type);\n          if (existingSlotValue) {\n            return existingSlotValue.slot_value\n          } else {\n            let arr = type.split('.');\n            let str = arr[arr.length - 1];\n            return str;\n          }\n        }\n\n        let mark = createNode(type, getSlotValue(type), props.selection.toString());\n        if (mark) {\n          props.selection.getRangeAt(0).extractContents();\n          props.selection.getRangeAt(0).insertNode(mark);\n\n          if (mark.parentElement.tagName === \"MARK\") {\n            mark.parentElement.replaceWith(...mark.parentElement.childNodes);\n            mark.innerHTML = mark.textContent.trim();\n          }\n\n          input.current.childNodes.forEach((item) => {\n            if (item.tagName === \"MARK\") {\n              if (item.innerHTML.slice(-1).includes(' ')) {\n                item.innerHTML = item.innerHTML.trim();\n              }\n            }\n          })\n        }\n      } else {\n        let mark = props.selection;\n        mark.style.outline = \"none\";\n        mark.dataset.type = type;\n      }\n\n\n      let lastChar = input.current.innerHTML[input.current.innerHTML.length - 1];\n      let newRaw = input.current.innerHTML + `${lastChar === ' ' ? '' : ' '}`;\n      props.setRaw(newRaw);\n      props.setSelection(null);\n      cursorPosition.current && setCaretPosition(input.current, cursorPosition.current);\n\n    }\n  }\n\n  const handleSelection = () => {\n    var sel\n    // Check for existence of window.getSelection() and that it has a\n    // modify() method. IE 9 has both selection APIs but no modify() method.\n    if (window.getSelection && (sel = window.getSelection()).modify) {\n      sel = window.getSelection()\n      if (!sel.isCollapsed) {\n        // Detect if selection is backwards\n        var range = document.createRange()\n        range.setStart(sel.anchorNode, sel.anchorOffset)\n        range.setEnd(sel.focusNode, sel.focusOffset)\n        var backwards = range.collapsed\n        range.detach()\n\n        // modify() works on the focus of the selection\n        var endNode = sel.focusNode,\n          endOffset = sel.focusOffset\n        sel.collapse(sel.anchorNode, sel.anchorOffset)\n\n        var direction = []\n        if (backwards) {\n          direction = ['backward', 'forward']\n        } else {\n          direction = ['forward', 'backward']\n        }\n\n        sel.modify('move', direction[0], 'character')\n        sel.modify('move', direction[1], 'word')\n        sel.extend(endNode, endOffset)\n        sel.modify('extend', direction[1], 'character')\n        sel.modify('extend', direction[0], 'word')\n      }\n    }\n\n    /* \n    SET CURRENT SELECTION\n    */\n    if (sel.toString().length > 0) {\n      let sel = rangy.getSelection()\n      props.setSelection(sel)\n    } else {\n      props.setSelection(null);\n    }\n  }\n\n  useEffect(() => {\n    let s = window.getSelection();\n\n    if (s && s.rangeCount > 0) {\n      let oRange = s.getRangeAt(0); //get the text range\n      let oRect = oRange.getBoundingClientRect();\n\n      setDropdownState({\n        position: oRect.x / 2,\n        active: props.selection !== null\n      })\n    } else {\n      setDropdownState({ ...dropdownState, active: false });\n    }\n  }, [props.selection, props.active]);\n\n  const sanitized = sanitizeHtml(props.raw, {\n    allowedTags: ['mark'],\n    allowedAttributes: false,\n    exclusiveFilter: function (frame) {\n      return !frame.text.trim();\n    }\n  });\n\n  useEffect(() => {\n    if (keyPress === 13) {\n      props.handleNew();\n      setKeyPress('');\n    }\n  }, [keyPress])\n  return (\n    <div className='taggable-text'>\n      <ContentEditable\n        data-placeholder=\"Enter reference value\"\n        innerRef={input}\n        className='taggable-text__input'\n        html={sanitized}\n        onClick={(e) => {\n          if (e.target.tagName === 'MARK') {\n            props.setSelection(e.target);\n          }\n        }}\n        onChange={(e) => {\n          props.setRaw(e.target.value);\n          cursorPosition.current = getCaretCharacterOffsetWithin(input.current);\n        }}\n        onMouseUp={() => {\n          handleSelection();\n          cursorPosition.current = getCaretCharacterOffsetWithin(input.current);\n        }}\n\n        onKeyDown={(e) => {\n          if (e.keyCode === 13 || e.keyCode === 40 || e.keyCode === 38) {\n            setKeyPress(e.keyCode);\n            e.preventDefault();\n          }\n        }}\n        onKeyUp={(e) => {\n          handleSelection();\n          cursorPosition.current = getCaretCharacterOffsetWithin(input.current);\n        }}\n        onFocus={() => {\n          props.setActive(props.index)\n        }}\n      />\n      {props.active && <Dropdown dropdownState={dropdownState} entities={props.entities} selection={props.selection} setSelection={props.setSelection} tagSelection={tagSelection} />}\n    </div>\n  )\n}\n\nexport default React.memo(UtteranceInput);","import React, { useRef, useState, useEffect } from 'react'\nimport _ from 'lodash'\nimport { stringToColor } from '../../../helpers/common_constants'\nimport UtteranceSlotValue from './UtteranceSlotValue'\nimport UtteranceInput from './UtteranceInput'\nimport { IconTrash } from '../../Icons/Icons'\n\nexport const Utterance = React.memo(props => {\n\n  const [raw, setRaw] = useState('');\n  const [selection, setSelection] = useState(null);\n  const [valid, setValid] = useState(true);\n\n  const wrapper = useRef(null);\n  const input = useRef(null);\n\n  const whitelist = input.current && {\n    tags: Array.from(input.current.childNodes).filter(item => item.dataset).map(item => {\n      return ({\n        type: item.dataset.type,\n        slot_value: item.dataset.slotValue,\n        text: item.textContent.trim(),\n        color: item.dataset.color,\n        target: item\n      })\n    }).filter(item => item.text.trim().length),\n    nodes: Array.from(input.current.childNodes).filter(item => item.textContent.trim().length > 0)\n  }\n\n  const active = props.active === props.index;\n\n  useEffect(() => {\n    if (props.utterance.model) {\n      let str = '';\n      if (props.utterance.model.length) {\n        str = props.utterance.model.map(item => {\n          if (item.type) {\n            return `<mark data-type=\"${item.type}\" data-slot-value=\"${item.slot_value}\" data-text=\"${item.text}\" data-color=\"${stringToColor(item.text)}\" style=\"background:${stringToColor(item.text)}\">${item.text.trim()}</mark>`\n          } else {\n            return item.text.trim()\n          }\n        }).join(' ');\n      }\n\n\n      let lastChar = str[str.length - 1];\n      setRaw(str + `${lastChar === '>' ? ' ' : ''}`);\n    }\n  }, [props.stateChange]);\n\n  useEffect(() => {\n    let isValid = wrapper.current.querySelectorAll(\"[data-valid='false']\").length < 1;\n\n    setValid(isValid);\n\n    if (whitelist && whitelist.nodes) {\n      let model = whitelist.nodes.map(item => {\n        if (item.dataset) {\n          return ({\n            type: item.dataset.type,\n            text: item.textContent.trim(),\n            slot_value: item.dataset.slotValue\n          })\n        } else {\n          return ({ text: item.textContent.trim() }\n          )\n        }\n      }).filter(item => item.text.length)\n\n      let raw = model.map(item => item.text).join(' ');\n      let utterances = [...props.utterances];\n      let newUtterance = { raw: raw, model: model }\n\n      if (!_.isEqual(newUtterance, props.utterance)) {\n        utterances[props.index] = newUtterance;\n        props.setUtterances(utterances)\n      }\n    }\n  }, [whitelist]);\n\n  const validateInput = () => {\n    if (whitelist && whitelist.nodes) {\n      let nodes = whitelist.nodes;\n      let textNodes = nodes.filter(item => !item.tagName);\n\n      let nodesMappedToString = nodes.map(item => {\n        if (item.dataset && item.dataset.type) return `${item.textContent.trim()} {${item.dataset.type}}`\n        return item.textContent.trim()\n      }).join(' ');\n\n      if (props.index === 1) console.log(props.allUtterancesInIntents.filter(item => item === nodesMappedToString))\n\n      if (whitelist.tags.length > 0 && textNodes.length < 1) return true;\n      if (props.allUtterancesInIntents.filter(item => item === nodesMappedToString).length > 1) return false;\n      if (textNodes.length > 0) {\n        let str = textNodes.map(item => item.textContent.trim()).join(' ');\n        let reg = /^[a-zA-Z][a-zA-Z/\"/'/`/\\s]*$/;\n        return reg.test(str.trim());\n      }\n      return true\n    } else {\n      return true\n    }\n  }\n\n  const updateRaw = () => {\n    setRaw(input.current.innerHTML);\n  }\n\n  if (props) {\n    return (\n      <React.Fragment>\n        <div ref={wrapper} data-field-valid={`${valid}`} className={`field field--intent ${active ? 'field--active' : ''}`}>\n          <div\n            className='field__main'\n          >\n            <div className='field__input' data-valid={validateInput() ? 'true' : 'false'}>\n              <UtteranceInput index={props.index} input={input} active={active} setActive={props.setActive} utterances={props.utterances} raw={raw} setRaw={setRaw} entities={props.entities} selection={selection} setSelection={setSelection} slotValuePairs={props.slotValuePairs} handleNew={props.handleNew} />\n              <div className=\"field__actions\">\n                {props.index !== 0 && props.utterances.length > 1 &&\n                  <button type=\"button\" onClick={() => {\n                    props.removeFromUtterances(props.utterance);\n                    document.querySelectorAll('.taggable-text__input')[0].focus();\n                  }}>\n                    <IconTrash />\n                  </button>}\n              </div>\n            </div>\n          </div>\n          {!props.new && whitelist && whitelist.tags.length > 0 &&\n            <ul className=\"model-list\" style={{ display: active ? 'block' : 'none' }}>\n              <header className=\"model-list__header\">\n                <strong>Parameter name</strong>\n                <strong>Entity</strong>\n                <strong>Resolved value</strong>\n              </header>\n              {whitelist.tags && whitelist.tags.map((item, index) => {\n                return (\n                  <li className=\"model-list__item\" key={index}>\n                    <UtteranceSlotValue key={index} index={index} target={item.target} slotValue={item.slot_value} whitelist={whitelist} updateRaw={updateRaw} />\n                    <div><button className=\"mark\" type=\"button\" style={{ background: item.color }} onClick={() => setTimeout(() => { setSelection(item.target) }, 220)}>{item.type[0] === '@' ? '' : '@'}{item.type}</button></div>\n                    <div>{item.text}</div>\n                  </li>\n                )\n              })}\n            </ul>\n          }\n        </div>\n      </React.Fragment>\n    )\n  } else {\n    return null\n  }\n})","import React, { useState, useEffect, useRef } from 'react'\nimport { Utterance } from './utterance/Utterance.jsx'\n\nconst IntentUtterances = (props) => {\n\tconst [active, setActive] = useState(null);\n\tconst removeFromUtterances = (object) => {\n\t\tlet arr = props.utterances.filter(item => item !== object);\n\t\tprops.setUtterances(arr);\n\t\tsetActive(null);\n\t\tprops.setStateChange(!props.stateChange)\n\t}\n\n\n\tconst handleNew = () => {\n\t\tif (props.utterances[0].model.length > 0) {\n\n\t\t\tlet newUtteranceField = { raw: '', model: [] };\n\t\t\tlet arr = [newUtteranceField, ...props.utterances];\n\n\t\t\tprops.setUtterances(arr);\n\t\t\tprops.setStateChange(!props.stateChange);\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tlet input = document.querySelectorAll('.taggable-text__input')[0];\n\t\t\tinput && input.focus();\n\t\t}, 100);\n\t}\n\n\tif (props.utterances) {\n\t\treturn (\n\t\t\t<ul>\n\t\t\t\t{props.utterances.map((item, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li key={index} style={{ display: item.raw.toLowerCase().includes(props.searchPhrase) ? 'block' : 'none' }}>\n\t\t\t\t\t\t\t<Utterance key={index} allUtterancesInIntents={props.allUtterancesInIntents} utterances={props.utterances} utterance={item} index={index} active={active} setActive={setActive} entities={props.entities} removeFromUtterances={removeFromUtterances} utterances={props.utterances} setUtterances={props.setUtterances} stateChange={props.stateChange} setStateChange={props.setStateChange} slotValuePairs={props.slotValuePairs} handleNew={handleNew} />\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</ul>\n\t\t)\n\t} else {\n\t\treturn null\n\t}\n}\n\nexport default React.memo(IntentUtterances);\n","import React, { useState, useEffect } from 'react';\nimport IntentUtterances from './IntentUtterances.jsx';\nimport _ from 'lodash';\nimport { simpleValidateInput, validateInput } from '../../helpers/validations.jsx';\n\nimport { preventSubmit } from '../../helpers/common_constants.jsx';\nimport { iconSearch } from '../../helpers/image_paths.jsx';\n\nfunction IntentDetails(props) {\n\n  const [intent] = useState(props.intent);\n  const entities = props.entities;\n  const systemEntities = props.systemEntities;\n  const [stateChange, setStateChange] = useState(false);\n  const [name, setName] = useState('');\n  const [utterances, setUtterances] = useState([]);\n  const [slotValuePairs, setSlotValuePairs] = useState([]);\n  const [searchPhrase, setSearchPhrase] = useState('');\n\n  // check if data is passed in props\n  useEffect(() => {\n    if (intent) {\n      setName(intent.name);\n      if (intent.utterances.length) {\n        /* add new field if only one utterance is present */\n        setUtterances([{ raw: '', model: [] }, ...intent.utterances.filter(item => item.model.length > 0)]);\n      } else {\n        setUtterances([{ raw: '', model: [] }])\n      }\n    }\n  }, [intent]);\n\n  const setInitialSlotValuePairs = () => {\n    let arr = utterances.map(item => item.model).flat().filter(item => item.slot_value).map(item => ({\n      type: item.type,\n      slot_value: item.slot_value\n    }));\n\n    setSlotValuePairs(arr);\n  }\n\n  useEffect(() => {\n    setInitialSlotValuePairs();\n  }, [utterances]);\n\n\n  useEffect(() => {\n    if (name && utterances) {\n\n      const valid = document.querySelectorAll('[data-field-valid=\"false\"]').length < 1;\n\n      let updatedIntent = {\n        name: name,\n        utterances: utterances.filter(item => item.model.length),\n        type: intent.type || 'custom'\n      }\n\n      props.onUpdate(updatedIntent, valid);\n    }\n  }, [name, utterances]);\n\n  const handleSearch = (term) => {\n    setSearchPhrase(term);\n  }\n\n  const handleNameChange = (e) => {\n    let message =\n      'Intent names shall begin with alphabetic characters from a to Z. The intent name may contain 1 underscore per word. Intent names shall not contain any numbers at all.';\n    let isTextValid = simpleValidateInput(e.target.value, '^[A-Za-z](_?[A-Za-z])*_?$');\n    let doesSameIntentNameExist = props.intents.filter(item => (item.name === e.target.value) && item !== intent).length > 0;\n\n    if (!isTextValid) {\n      e.target.setCustomValidity(message);\n    } else if (doesSameIntentNameExist) {\n      e.target.setCustomValidity('Intent name must be unique')\n    } else {\n      e.target.setCustomValidity('');\n    }\n\n    e.target.reportValidity();\n    setName(e.target.value);\n  }\n\n  const mapUtterancesAsString = (items) => {\n    return items.map(item => item.model.map(item => {\n      if (item.type) return `${item.text} {${item.type}}`\n      return item.text\n    }).join(' '))\n  }\n\n  const allUtterancesInIntents = [mapUtterancesAsString(props.intents.map(item => item.utterances).flat()), ...mapUtterancesAsString(utterances)];\n\n  if (intent) {\n    return (\n      <div className=\"convo-details\">\n        <section className=\"layout--editor-content\">\n          <div>\n            {/* Entity name value */}\n            <div className=\"margin--30--large\">\n              <h3 className=\"margin--10--large\">Intent name</h3>\n              <input\n                type=\"text\"\n                defaultValue={name ? name : ''}\n                placeholder=\"Intent name\"\n                className=\"input input--item-name\"\n                onKeyDown={(e) => preventSubmit(e)}\n                onChange={e => handleNameChange(e)}\n              />\n            </div>\n            {/* Entity words */}\n            <div className=\"margin--50--large\">\n              <div className=\"search-wrapper\">\n                <h3>Utterances</h3>\n                <input\n                  style={{ background: `url(${iconSearch}) no-repeat 12px center`, backgroundSize: '18px', paddingLeft: '42px' }}\n                  className=\"input input--search\"\n                  type=\"text\" placeholder=\"Search utterances\"\n                  onChange={(e) => {\n                    handleSearch(e.target.value);\n                  }}\n                  onKeyDown={(e) => preventSubmit(e)}\n                />\n              </div>\n              <div className=\"margin--24--large\">\n                <IntentUtterances\n                  intents={props.intents}\n                  allUtterancesInIntents={allUtterancesInIntents}\n                  utterances={utterances}\n                  setUtterances={setUtterances}\n                  entities={[entities, ...systemEntities]}\n                  stateChange={stateChange}\n                  setStateChange={setStateChange}\n                  searchPhrase={searchPhrase}\n                  slotValuePairs={slotValuePairs}\n                />\n              </div>\n            </div>\n          </div>\n        </section>\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nexport default IntentDetails;\n","import React from 'react'\nimport EntityDetails from './components/EntityComponent/EntityDetails'\nimport IntentDetails from './components/IntentComponent/IntentDetails'\nimport './styles.scss'\n\nexport const IntentEditor = (props) => {\n  return <IntentDetails intents={props.intents} intent={props.intent} entities={props.entities} systemEntities={props.systemEntities} onUpdate={props.onUpdate} />\n}\n\nexport const EntityEditor = (props) => {\n  return <EntityDetails entity={props.entity} onUpdate={props.onUpdate} />\n}"],"names":["stringToColor","value","getHashCode","intToHSL","String","prototype","hash","length","i","charCodeAt","Number","shortened","getCaretCharacterOffsetWithin","element","caretOffset","doc","ownerDocument","document","win","defaultView","parentWindow","sel","getSelection","rangeCount","range","getRangeAt","preCaretRange","cloneRange","selectNodeContents","setEnd","endContainer","endOffset","toString","selection","type","textRange","createRange","preCaretTextRange","body","createTextRange","moveToElementText","setEndPoint","text","preventSubmit","event","keyCode","preventDefault","setCaretPosition","el","pos","node","childNodes","nodeType","window","setStart","collapse","removeAllRanges","addRange","iconSearch","iconTrash","IconTrash","EntityValue","props","setValue","useState","item","synonyms","setSynonyms","newSynonym","setNewSynonym","remove","setRemove","synonymInput","useRef","active","activeValue","index","useEffect","handleUpdate","values","handleNewSynonym","target","current","removeSynonym","arr","indexOf","splice","makeSynonyms","items","isActive","map","handleRemove","e","stopPropagation","setTimeout","removeValue","setActiveValue","marginLeft","EntityValues","setValues","makeItems","validateInput","elem","term","regex","message","reg","RegExp","test","setCustomValidity","reportValidity","simpleValidateInput","EntityDetails","entity","setEntity","name","setName","newValue","setNewValue","valid","setValid","valueInput","onUpdate","addNewValue","val","validate","UtteranceSlotValue","React","memo","validateSlotValue","dataset","slotValue","updateRaw","Dropdown","setTerm","entities","setEntities","entitiesNames","setEntitiesNames","input","modalRef","useOnclickOutside","setSelection","filterEntities","str","flat","filter","dropdownStyles","position","top","transition","visibility","dropdownState","opacity","left","display","toLowerCase","includes","toLocaleLowerCase","trim","tagSelection","UtteranceInput","setDropdownState","keyPress","setKeyPress","cursorPosition","createNode","slot_value","mark","createElement","newTextNode","createTextNode","appendChild","textContent","setAttribute","style","background","tagName","getSlotValue","existingSlotValue","slotValuePairs","find","split","extractContents","insertNode","parentElement","replaceWith","innerHTML","forEach","slice","outline","lastChar","newRaw","setRaw","handleSelection","modify","isCollapsed","anchorNode","anchorOffset","focusNode","focusOffset","backwards","collapsed","detach","endNode","direction","extend","rangy","s","oRange","oRect","getBoundingClientRect","x","sanitized","sanitizeHtml","raw","allowedTags","allowedAttributes","exclusiveFilter","frame","handleNew","setActive","Utterance","wrapper","whitelist","tags","Array","from","color","nodes","utterance","model","join","stateChange","isValid","querySelectorAll","utterances","newUtterance","_","isEqual","setUtterances","textNodes","nodesMappedToString","console","log","allUtterancesInIntents","removeFromUtterances","focus","new","IntentUtterances","object","setStateChange","newUtteranceField","searchPhrase","IntentDetails","intent","systemEntities","setSlotValuePairs","setSearchPhrase","setInitialSlotValuePairs","updatedIntent","handleSearch","handleNameChange","isTextValid","doesSameIntentNameExist","intents","mapUtterancesAsString","backgroundSize","paddingLeft","IntentEditor","EntityEditor"],"mappings":"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"}