{"version":3,"file":"index.modern.js","sources":["../src/assets/icon_trash.jsx","../src/components/EntityComponent/entity_value.jsx","../src/components/EntityComponent/entity_values.jsx","../src/helpers/validations.jsx","../src/components/EntityComponent/entity_details.jsx","../src/helpers/common_constants.jsx","../src/components/IntentComponent/intent_modal.jsx","../src/components/IntentComponent/utterance/input.jsx","../src/components/IntentComponent/utterance/utterance.jsx","../src/components/IntentComponent/intent_utterances.jsx","../src/components/IntentComponent/intent_details.jsx","../src/index.js"],"sourcesContent":["import React from 'react';\n\nfunction IconTrash() {\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n\t\t\t<g fill=\"none\" fill-rule=\"evenodd\" stroke=\"#1A1A1A\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n\t\t\t\t<path d=\"M2.4 6.5v7c0 1.105.835 2 1.867 2h7.466c1.032 0 1.867-.895 1.867-2v-7M1.467 3.5h13.066M6.133 3.5v-3h3.734v3M8 7.5v5M10.8 7.5v5M5.2 7.5v5\" />\n\t\t\t</g>\n\t\t</svg>\n\t);\n}\n\nexport { IconTrash };\n","import React, { useState, useRef, useEffect } from 'react';\nimport { IconTrash } from '../../assets/icon_trash.jsx';\n\nconst EntityValue = (props) => {\n\tconst [ value, setValue ] = useState(props.item.value);\n\tconst [ synonyms, setSynonyms ] = useState(props.item.synonyms);\n\tconst [ newSynonym, setNewSynonym ] = useState('');\n\tconst [ remove, setRemove ] = useState(false);\n\tconst synonymInput = useRef(null);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tprops.handleUpdate([ ...props.values ], props.index, {\n\t\t\t\tvalue: value,\n\t\t\t\tsynonyms: synonyms\n\t\t\t});\n\t\t},\n\t\t[ value, synonyms ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (newSynonym) {\n\t\t\t\tif (synonyms) {\n\t\t\t\t\tsetSynonyms([ ...synonyms, newSynonym ]);\n\t\t\t\t} else {\n\t\t\t\t\tsetSynonyms(newSynonym);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t},\n\t\t[ newSynonym ]\n\t);\n\n\tconst handleNewSynonym = (target) => {\n\t\tif (target.current.value.length > 0) {\n\t\t\tsetNewSynonym(target.current.value);\n\t\t\ttarget.current.value = '';\n\t\t} else {\n\t\t\tsetNewSynonym('');\n\t\t}\n\t};\n\n\t// synonyms\n\tconst removeSynonym = (value) => {\n\t\tlet arr = [ ...synonyms ];\n\t\tlet index = arr.indexOf(value);\n\n\t\tif (index !== -1) {\n\t\t\tarr.splice(index, 1);\n\t\t\tsetSynonyms(arr);\n\t\t}\n\t};\n\n\tconst makeSynonyms = (items, active) => {\n\t\tif (items) {\n\t\t\treturn (\n\t\t\t\titems &&\n\t\t\t\titems.map((item, i) => {\n\t\t\t\t\tif (item && !active) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"synonym\" key={i}>\n\t\t\t\t\t\t\t\t{item}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={i} className=\"synonym\">\n\t\t\t\t\t\t\t\t{item}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"synonym__remove\"\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tremoveSynonym(item);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t&#10005;\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t};\n\n\tconst handleRemove = (e) => {\n\t\te.stopPropagation();\n\t\tsetRemove(true);\n\t\tsetTimeout(() => {\n\t\t\tprops.removeValue(props.index);\n\t\t\tsetRemove(false);\n\t\t}, 220);\n\t};\n\n\tif (props.activeValue !== props.index) {\n\t\treturn (\n\t\t\t<li\n\t\t\t\tclassName={`item item--entity ${remove ? 'item--remove' : ''}`}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tprops.setActiveValue(props.index);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div className=\"item__inner\">\n\t\t\t\t\t<div className=\"grid\">\n\t\t\t\t\t\t<div className=\"cell cell--3--small\">\n\t\t\t\t\t\t\t<div className=\"item__value item__value--primary\">{value}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"cell cell--9--small\">\n\t\t\t\t\t\t\t<div className=\"item__values\">{makeSynonyms(synonyms, false)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"item__buttons\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn--remove btn--remove--main\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\thandleRemove(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconTrash />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t);\n\t} else {\n\t\treturn (\n\t\t\t<li className={`item item--entity item--active ${remove ? 'item--remove' : ''}`}>\n\t\t\t\t<div className=\"item__inner\">\n\t\t\t\t\t<div className=\"grid\">\n\t\t\t\t\t\t<div className=\"cell cell--3--small\">\n\t\t\t\t\t\t\t<div className=\"item__value item__value--primary\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tdata-input=\"true\"\n\t\t\t\t\t\t\t\t\tclassName=\"editor-input\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tdefaultValue={value}\n\t\t\t\t\t\t\t\t\tplaceholder=\"Enter value\"\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tsetValue(e.target.value);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"cell cell--9--small\">\n\t\t\t\t\t\t\t<div className=\"item__values\">\n\t\t\t\t\t\t\t\t{makeSynonyms(synonyms, true)}\n\t\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\thandleNewSynonym(synonymInput);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclassName=\"editor-input\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tstyle={{ marginLeft: '0.625rem' }}\n\t\t\t\t\t\t\t\t\t\tref={synonymInput}\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter synonym\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => {}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<input className=\"editor-input\" type=\"submit\" hidden={true} />\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"item__buttons\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn--remove btn--remove--main\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\thandleRemove(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconTrash />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t);\n\t}\n};\n\nexport default EntityValue;\n","import React, { useState, useEffect } from 'react';\nimport EntityValue from './entity_value.jsx';\n\nfunction EntityValues(props) {\n\tconst [ activeValue, setActiveValue ] = useState(null);\n\n\tfunction handleUpdate(arr, index, item) {\n\t\tarr[index] = {\n\t\t\tvalue: item.value,\n\t\t\tsynonyms: item.synonyms\n\t\t};\n\n\t\tprops.setValues(arr);\n\t}\n\n\tconst makeItems = (items) => {\n\t\tif (items) {\n\t\t\treturn items.map((item, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<React.Fragment key={index}>\n\t\t\t\t\t\t<EntityValue\n\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\tvalues={props.values}\n\t\t\t\t\t\t\tremoveValue={props.removeValue}\n\t\t\t\t\t\t\thandleUpdate={handleUpdate}\n\t\t\t\t\t\t\tactiveValue={activeValue}\n\t\t\t\t\t\t\tsetActiveValue={setActiveValue}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tif (props.values) {\n\t\treturn <div>{makeItems(props.values)}</div>;\n\t} else {\n\t\treturn null\n\t}\n}\n\nexport default EntityValues;\n","export const validateInput = (elem, term, regex, message) => {\n  let reg = new RegExp(regex);\n  if (reg.test(term)) {\n    elem.setCustomValidity('');\n  } else {\n    elem.setCustomValidity(message);\n  }\n  elem.reportValidity();\n\n  return reg.test(term);\n};\n","import React, { useState, useEffect } from 'react';\nimport EntityValues from './entity_values.jsx';\nimport _ from 'lodash';\nimport { useRef } from 'react';\nimport { validateInput } from '../../helpers/validations.jsx';\n\nfunction EntityDetails(props) {\n\tconst [ entity, setEntity ] = useState(null);\n\tconst [ name, setName ] = useState(null);\n\tconst [ values, setValues ] = useState(null);\n\tconst [ newValue, setNewValue ] = useState(null);\n\tconst [valid, setValid] = useState(true);\n\tconst valueInput = useRef(null);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (!entity) {\n\t\t\t\tsetEntity(props.entity);\n\t\t\t}\n\t\t},\n\t\t[ props.entity ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetName(props.entity.name);\n\t\t\tsetValues(props.entity.values);\n\t\t},\n\t\t[ entity ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (name && values) {\n\t\t\t\tprops.onUpdate({\n\t\t\t\t\tname: name,\n\t\t\t\t\tvalues: values\n\t\t\t\t}, valid);\n\t\t\t}\n\t\t},\n\t\t[ name, values ]\n\t);\n\n\t// add new value to value array\n\tconst addNewValue = () => {\n\t\tlet val = {\n\t\t\tvalue: newValue,\n\t\t\tsynonyms: []\n\t\t};\n\n\t\tlet arr = [...values, val];\n\t\tsetValues(arr);\n\t};\n\n\tconst removeValue = (index) => {\n\t\tlet arr = [ ...values ];\n\t\tif (index !== -1) {\n\t\t\tarr.splice(index, 1);\n\t\t\tsetValues(arr);\n\t\t}\n\t};\n\n\tif (values) {\n\t\treturn (\n\t\t\t<div className=\"convo-details\">\n\t\t\t\t<section className=\"layout--editor-content\">\n\t\t\t\t\t<section className=\"entities-editor\">\n\t\t\t\t\t\t{/* Entity name value */}\n\t\t\t\t\t\t<div className=\"margin--30--large\">\n\t\t\t\t\t\t\t<h3 className=\"margin--10--large\">Entity name</h3>\n\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tdefaultValue={name ? name : ''}\n\t\t\t\t\t\t\t\t\tplaceholder=\"Entity name\"\n\t\t\t\t\t\t\t\t\tclassName=\"editor-input input--item-name\"\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tlet message = 'Entity names shall begin with alphabetic characters from a to Z. The entity name may contain multiple underscores per word. Entity names shall not contain any numbers at all or soecial characters other than undersocres.'\n\t\t\t\t\t\t\t\t\t\tlet validate = validateInput(e.target, e.target.value, '^[A-Za-z](_*[A-Za-z])*_*$', message);\n\t\t\t\t\t\t\t\t\t\tsetValid(validate);\n\t\t\t\t\t\t\t\t\t\tsetName(e.target.value);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* Entity words */}\n\t\t\t\t\t\t<div className=\"margin--50--large\">\n\t\t\t\t\t\t\t<h3 className=\"font--18--large margin--10--large\">Values</h3>\n\t\t\t\t\t\t\t<div className=\"margin--24--large\">\n\t\t\t\t\t\t\t\t<EntityValues values={values} setValues={setValues} removeValue={removeValue} />\n\t\t\t\t\t\t\t\t<form onSubmit={(e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (newValue) {\n\t\t\t\t\t\t\t\t\t\taddNewValue();\n\t\t\t\t\t\t\t\t\t\tsetNewValue(null);\n\t\t\t\t\t\t\t\t\t\tvalueInput.current.value = '';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"editor-input input--add-field\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter reference value\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setNewValue(e.target.value)}\n\t\t\t\t\t\t\t\t\t\tref={valueInput}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\treturn null;\n\t}\n}\n\nexport default EntityDetails;\n","export const getRandomColor = () => {\n\tvar letters = \"0123456789ABCDEF\";\n\tvar color = \"#\";\n\n\tfor (var i = 0; i < 6; i++) {\n\t\tcolor += letters[Math.floor(Math.random() * 16)];\n\t}\n\treturn color;\n};\n\nexport const getColor = (index) => {\n\tlet arr = [\n\t\t\"#56ebd3\",\n\t\t\"#fbacf6\",\n\t\t\"#9ee786\",\n\t\t\"#e4b5ff\",\n\t\t\"#c2e979\",\n\t\t\"#20d8fd\",\n\t\t\"#e8d25c\",\n\t\t\"#42edec\",\n\t\t\"#f3c46f\",\n\t\t\"#5cefba\",\n\t\t\"#e8de7a\",\n\t\t\"#7ee8c0\",\n\t\t\"#e8d98c\",\n\t\t\"#88e99a\",\n\t\t\"#cfdd73\",\n\t\t\"#8be8ad\",\n\t\t\"#dff799\",\n\t\t\"#b5eaa1\",\n\t\t\"#c2d681\",\n\t\t\"#b5e287\",\n\t];\n\n\treturn arr[index % arr.length]\n};\n","import React, { useState, useEffect, useRef } from 'react';\nimport useOnclickOutside from 'react-cool-onclickoutside';\nimport TextInput from 'react-autocomplete-input';\nimport 'react-autocomplete-input/dist/bundle.css';\n\nfunction Modal(props) {\n\tconst [ entities, setEntities ] = useState(props.entities);\n\tconst [ allEntities, setAllEntities ] = useState(props.entities);\n\tconst [ entitiesNames, setEntitiesNames ] = useState([]);\n\tconst input = useRef();\n\n\tconst modalRef = useOnclickOutside(() => {\n\t\tprops.setModal(false);\n\t\tprops.setSelection(null);\n\t});\n\n\tconst filterEntities = (term) => {\n\t\tlet arr = [ ...allEntities ];\n\t\tlet filteredArr = arr.filter(\n\t\t\t(item) => item.name && item.name.toLowerCase().includes(term.trim().toLowerCase())\n\t\t);\n\n\t\tsetEntities(filteredArr);\n\t};\n\n\tuseEffect(\n\t\t() => {\n\t\t\tlet arr = entities\n\t\t\t\t.map((item) => {\n\t\t\t\t\treturn item.name;\n\t\t\t\t})\n\t\t\t\t.filter((item) => item);\n\t\t\t//console.log(arr)\n\t\t\tsetEntitiesNames(arr);\n\t\t},\n\t\t[ entities ]\n\t);\n\n\tconst makeEntities = (items) => {\n\t\tconst handleDefaultParam = (param) => {\n\t\t\tif (param.includes('.')) {\n\t\t\t\treturn param.split('.').pop();\n\t\t\t} else {\n\t\t\t\treturn param.split('@').pop();\n\t\t\t}\n\t\t};\n\t\tif (items) {\n\t\t\treturn items.map((item, i) => {\n\t\t\t\treturn (\n\t\t\t\t\t<button\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t\tlet type = '@' + item.name;\n\t\t\t\t\t\t\tlet slotValue = item.name;\n\n\t\t\t\t\t\t\tconst getParamValues = () => {\n\t\t\t\t\t\t\t\tlet found = props.paramValues.find(obj => obj.type === type);\n\t\t\t\t\t\t\t\tif (found) {\n\t\t\t\t\t\t\t\t\treturn found.slot_value\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn handleDefaultParam(slotValue)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tprops.setModal(false);\n\t\t\t\t\t\t\tprops.selection.item.setAttribute('data-type', type);\n\t\t\t\t\t\t\tprops.selection.item.setAttribute('data-slot-value', getParamValues());\n\t\t\t\t\t\t\tprops.mapNodesToModel(\n\t\t\t\t\t\t\t\tdocument.querySelector('.item--active [contenteditable=\"true\"]').childNodes,\n\t\t\t\t\t\t\t\tprops.active\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tprops.setSelection(null);\n\t\t\t\t\t\t\tprops.setStateChange(!props.stateChange);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span role=\"img\">@{item.name}</span>\n\t\t\t\t\t</button>\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tif (entities) {\n\t\treturn (\n\t\t\t<div id=\"dropdown-modal\" className={`dropdown ${props.modal && 'dropdown--active'}`} ref={modalRef}>\n\t\t\t\t<div className=\"dropdown__search-wrap\">\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tComponent=\"input\"\n\t\t\t\t\t\ttrigger=\"\"\n\t\t\t\t\t\toptions={entitiesNames}\n\t\t\t\t\t\tspaceRemovers={[]}\n\t\t\t\t\t\tmatchAny={true}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tfilterEntities(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tref={input}\n\t\t\t\t\t\tclassName=\"dropdown__search editor-input\"\n\t\t\t\t\t\tplaceholder=\"Filter entities\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"dropdown__inner\">{entities && makeEntities(entities)}</div>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\treturn null;\n\t}\n}\n\nexport { Modal };\n","import { times } from 'lodash';\nimport React from 'react';\nimport ContentEditable from 'react-contenteditable';\nimport reactHtmlParser from 'react-html-parser';\n\nclass Input extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tmodel: this.props.model\n\t\t};\n\n\t\tthis.text = React.createRef('');\n\t\tthis.handleSelection = this.handleSelection.bind(this);\n\t\tthis.handleModal = this.handleModal.bind(this);\n\t}\n\n\tshouldComponentUpdate(nextProps) {\n\t\tif (\n\t\t\tnextProps.utterances.length !== this.props.utterances.length ||\n\t\t\tthis.props.stateChange !== nextProps.stateChange ||\n\t\t\tnextProps.active !== this.props.active\n\t\t) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn this.props.model.length === 0;\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tconsole.log(this.props.active, prevProps.active);\n\t\tif (this.props.active !== prevProps.active || (this.props.active && !this.text.current.length)) {\n\t\t\tthis.text.current && this.text.current.focus();\n\t\t}\n\t}\n\n\thandleModal(selection, relativePos) {\n\t\tdocument.querySelector('#dropdown-modal').style.left = `${relativePos.left + 24}px`;\n\t\tdocument.querySelector('#dropdown-modal').style.top = `${relativePos.top + 2 * 24}px`;\n\t\tthis.props.setModal(true);\n\t\tthis.props.setSelection({ item: selection, index: this.props.index });\n\t}\n\n\thandleSelection(e) {\n\t\tfunction unwrap(node) {\n\t\t\tnode.replaceWith(...node.childNodes);\n\t\t}\n\n\t\tlet selection = window.getSelection().getRangeAt(0);\n\t\tif (selection.toString()) {\n\t\t\tlet textNode = document.createTextNode(selection.toString());\n\t\t\tlet selectedText = selection.extractContents();\n\t\t\tlet span = document.createElement('span');\n\t\t\tlet nested = span.querySelectorAll('*');\n\n\t\t\tspan.appendChild(textNode);\n\t\t\tspan.setAttribute('class', 'highlight');\n\t\t\tspan.textContent = span.textContent.trim();\n\t\t\tselection.insertNode(span);\n\n\t\t\te.target.childNodes.forEach((child) => {\n\t\t\t\tif (child.dataset && !child.dataset.type && child !== span) {\n\t\t\t\t\tchild.replaceWith(child.textContent);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t/* nested.forEach((item) => {\n\t\t\t\tunwrap(item);\n\t\t\t}); */\n\n\t\t\tif (span.parentNode.tagName === 'SPAN') {\n\t\t\t\tspan.parentNode.outerHTML = span.parentNode.innerHTML;\n\t\t\t}\n\n\t\t\tlet parentPos = document.querySelector('.convo-details').getBoundingClientRect();\n\t\t\tlet childPos = span.getBoundingClientRect();\n\n\t\t\tlet relativePos = {\n\t\t\t\ttop: childPos.top - parentPos.top,\n\t\t\t\tleft: childPos.left - parentPos.left\n\t\t\t};\n\n\t\t\tthis.handleModal(span, relativePos);\n\t\t}\n\t}\n\n\trender() {\n\t\tif (this.props.model) {\n\t\t\tlet mappedModel = this.props.model.filter((item) => item.text.trim().length);\n\n\t\t\tmappedModel = this.props.model.map((item, index) => {\n\t\t\t\tif (item.type) {\n\t\t\t\t\treturn `<span data-token=\"true\" style=\"background:${item.color}\" data-slot-value=\"${item.slot_value}\" data-type=\"${item.type}\" class=\"highlight\">${item.text.trim()}</span>`;\n\t\t\t\t} else {\n\t\t\t\t\treturn item.text;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst disableNewlines = (evt) => {\n\t\t\t\tconst keyCode = evt.keyCode || evt.which;\n\n\t\t\t\tif (keyCode === 13) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tthis.props.focusOnExpressionInput();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (this.props.active) {\n\t\t\t\treturn (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<div className=\"item__input\">\n\t\t\t\t\t\t\t<ContentEditable\n\t\t\t\t\t\t\t\tinnerRef={this.text}\n\t\t\t\t\t\t\t\thtml={`${mappedModel.join(' ')} `}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\tif (e.target.getAttribute('data-token')) {\n\t\t\t\t\t\t\t\t\t\tthis.handleModal(e.target, e);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonKeyPress={(e) => {\n\t\t\t\t\t\t\t\t\tdisableNewlines(e);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonMouseUp={(e) => {\n\t\t\t\t\t\t\t\t\tthis.handleSelection(e);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tlet nodes = e.currentTarget.childNodes;\n\t\t\t\t\t\t\t\t\tnodes = nodes.forEach((item) => {\n\t\t\t\t\t\t\t\t\t\tif (!item.textContent.trim().length && item.tagName === 'SPAN') {\n\t\t\t\t\t\t\t\t\t\t\titem.remove();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tthis.props.mapNodesToModel(e.currentTarget.childNodes, this.props.index);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"item__input item__input--readonly\">\n\t\t\t\t\t\t<div style={{ opacity: mappedModel.join(' ').trim().length ? '1' : '0.5' }}>\n\t\t\t\t\t\t\t{mappedModel.join(' ').trim().length ? (\n\t\t\t\t\t\t\t\treactHtmlParser(mappedModel.join(' '))\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t'Input text'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\treturn <div />;\n\t\t}\n\t}\n}\n\nexport default Input;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { IconTrash } from '../../../assets/icon_trash.jsx';\nimport Input from './input.jsx';\nimport { Component } from 'react';\nimport _ from 'lodash';\n\nconst Utterance = (props) => {\n\tconst [remove, setRemove] = useState(false);\n\tconst [valid, setValid] = useState(true);\n\n\tconst wrapper = useRef(null);\n\tconst removeBtn = useRef(null);\n\n\tlet data = props.data;\n\n\tuseEffect(() => {\n\t\tlet slotValues = props.data.model.map(item => item.slot_value).filter(item => item);\n\t\tlet invalidValues = slotValues.filter(item => !item.match(/^[A-Za-z](_*[A-Za-z])*_*$/));\n\n\t\tlet term = props.data.model.map(item => item.text).join(' ');\n\t\tlet reg = /^[a-zA-Z][a-zA-Z\\s]*$/;\n\n\t\tif (reg.test(term) && !invalidValues.length) {\n\t\t\tsetValid(true);\n\t\t} else {\n\t\t\tsetValid(false);\n\t\t}\n\t}, [props.data.model]);\n\n\treturn (\n\t\t<li\n\t\t\tdata-valid={`${valid}`}\n\t\t\tref={wrapper}\n\t\t\tkey={data.index}\n\t\t\tclassName={`item item--intent ${data.active ? 'item--active' : ''} ${remove\n\t\t\t\t? 'item--remove'\n\t\t\t\t: ''} ${valid ? 'item--valid' : 'item--error'}`}\n\t\t\tonClick={() => {\n\t\t\t\tdata.handleActive(data.index);\n\t\t\t}}\n\t\t>\n\t\t\t{!valid && <legend class=\"item__error\">Utterances shall begin with alphabetic characters from a to Z. The untterance may not contain other characters then alphabetic characters. The utterance shall not contain any numbers at all.</legend>}\n\t\t\t<div className=\"item__main\">\n\t\t\t\t<Input\n\t\t\t\t\tmodel={data.model}\n\t\t\t\t\tindex={data.index}\n\t\t\t\t\tutterances={data.utterances}\n\t\t\t\t\tsetUtterances={data.setUtterances}\n\t\t\t\t\tmodal={data.modal}\n\t\t\t\t\tsetModal={data.setModal}\n\t\t\t\t\tsetSelection={data.setSelection}\n\t\t\t\t\tselection={data.selection}\n\t\t\t\t\tmapNodesToModel={data.mapNodesToModel}\n\t\t\t\t\tactive={data.active}\n\t\t\t\t\taddNewValue={data.addNewValue}\n\t\t\t\t\tstateChange={data.stateChange}\n\t\t\t\t\tfocusOnExpressionInput={data.focusOnExpressionInput}\n\t\t\t\t\twrapper={wrapper}\n\t\t\t\t/>\n\t\t\t\t<div className=\"item__buttons\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn--remove btn--remove--main\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tref={removeBtn}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tsetRemove(true)\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tdata.removeFromUtterances(data.index);\n\t\t\t\t\t\t\t\tsetRemove(false);\n\t\t\t\t\t\t\t}, 220);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconTrash />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{data.model && data.model.filter((item) => item.type).length ? (\n\t\t\t\t<ul className=\"model\" style={{display: `${data.active ? 'block' : 'none'}`}}>\n\t\t\t\t\t<header>\n\t\t\t\t\t\t<div>Parameter Name</div>\n\t\t\t\t\t\t<div>Entity</div>\n\t\t\t\t\t\t<div>Resolved Value</div>\n\t\t\t\t\t</header>\n\t\t\t\t\t{data.model.map((item, i) => {\n\t\t\t\t\t\tif (item.type) {\n\t\t\t\t\t\t\tlet slotValue = item.slot_value;\n\t\t\t\t\t\t\tlet type = item.type;\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li key={i}>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclassName=\"editor-input\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tdefaultValue={slotValue}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\tlet arr = [...data.utterances];\n\t\t\t\t\t\t\t\t\t\t\tarr[data.index].model[i].slot_value = e.target.value;\n\t\t\t\t\t\t\t\t\t\t\tdata.setUtterances(arr);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Set parameter name\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<span className=\"highlight\" style={{ background: item.color }}>\n\t\t\t\t\t\t\t\t\t\t\t{type}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div>{item.text}</div>\n\t\t\t\t\t\t\t\t\t<div className=\"item__buttons\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn--remove\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault(e);\n\t\t\t\t\t\t\t\t\t\t\t\tdata.removeFromModel(data.index, i);\n\t\t\t\t\t\t\t\t\t\t\t\tdata.setStateChange(!data.stateChange);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<IconTrash />\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t) : (\n\t\t\t\t\t<React.Fragment />\n\t\t\t\t)}\n\t\t</li>\n\t);\n}\n\nexport default Utterance;\n","import React, { useState, useEffect } from 'react';\nimport { getColor } from '../../helpers/common_constants.jsx';\nimport { Modal } from './intent_modal.jsx';\nimport Utterance from './utterance/utterance.jsx';\n\nconst List = React.memo(function List(props) {\n\tconst [ modal, setModal ] = useState(false);\n\tconst [ modalPosition, setModalPosition ] = useState(null);\n\tconst [ selection, setSelection ] = useState(null);\n\tconst [ update, setUpdate ] = useState(false);\n\tconst [ stateChange, setStateChange ] = useState(false);\n\tconst [ paramValues, setParamValues ] = useState(null);\n\tconst intents = props.intents;\n\n\tuseEffect(\n\t\t() => {\n\t\t\t// get every item type & slot value pair from utterances array\n\t\t\tlet arr = props.utterances\n\t\t\t\t.map((item) => item.model)\n\t\t\t\t.flat()\n\t\t\t\t.filter((item) => item.slot_value)\n\t\t\t\t.map((item) => ({ type: item.type, slot_value: item.slot_value }));\n\n\n\t\t\t// remove duplicate pairs \n\t\t\tlet uniq = arr.filter((v, i, a) => a.findIndex((t) => t.slot_value === v.slot_value) === i);\n\t\t\tsetParamValues(uniq);\n\t\t},\n\t\t[ props.utterances ]\n\t);\n\n\tconst handleActive = (index) => {\n\t\tprops.setActive(index);\n\t};\n\n\tconst mapNodesToModel = (items, index) => {\n\t\tlet arr = Array.from(items).filter((item) => item.textContent.trim().length);\n\n\t\tlet i = 0;\n\t\tarr = arr.map((item) => {\n\t\t\tif (item.tagName === 'SPAN' || (item.nodeName === '#text' && item.textContent.trim().length)) {\n\t\t\t\tlet type = item.dataset && item.dataset.type && item.dataset.type.length ? item.dataset.type : null;\n\t\t\t\tif (type) {\n\t\t\t\t\ti++;\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttext: item.textContent.trim(),\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\tslot_value: item.dataset.slotValue\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn { text: item.textContent.trim() };\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\n\t\tarr = arr.filter((item) => item);\n\n\t\tconsole.log('arr', arr);\n\n\t\tlet values = [ ...props.utterances ];\n\t\tvalues[index] = { raw: arr.map((item) => item.text).join(' '), model: arr };\n\t\tprops.setUtterances(values);\n\t};\n\n\tconst makeItems = (items) => {\n\t\treturn items.map((item, index) => {\n\t\t\tlet model = item.model.map((val) => {\n\t\t\t\treturn { ...val, color: getColor(val.text.length) };\n\t\t\t});\n\n\t\t\tlet data = {\n\t\t\t\tindex: index,\n\t\t\t\tactive: index === props.active,\n\t\t\t\tmodel: model,\n\t\t\t\tutterances: props.utterances,\n\t\t\t\tsetUtterances: props.setUtterances,\n\t\t\t\thandleActive: handleActive,\n\t\t\t\tmodal: modal,\n\t\t\t\tsetModal: setModal,\n\t\t\t\tsetModalPosition: setModalPosition,\n\t\t\t\tselection: selection,\n\t\t\t\tsetSelection: setSelection,\n\t\t\t\taddNewValue: props.addNewValue,\n\t\t\t\tstateChange: stateChange,\n\t\t\t\tsetStateChange: setStateChange,\n\t\t\t\tremoveFromUtterances: removeFromUtterances,\n\t\t\t\tremoveFromModel: props.removeFromModel,\n\t\t\t\tmapNodesToModel: mapNodesToModel,\n\t\t\t\tfocusOnExpressionInput: props.focusOnExpressionInput,\n\t\t\t};\n\n\t\t\treturn <Utterance key={index} data={data} errors={props.errors} />;\n\t\t});\n\t};\n\n\tconst removeFromUtterances = (index) => {\n\t\tlet arr = [ ...props.utterances ];\n\t\tif (index !== -1) {\n\t\t\tarr.splice(index, 1);\n\t\t\tconsole.log('new arr after delete', arr);\n\t\t\tprops.setUtterances(arr);\n\t\t\tprops.setActive(null);\n\t\t}\n\t};\n\n\tconsole.log(selection);\n\n\tif (props.utterances) {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<ul>{makeItems(props.utterances)}</ul>\n\t\t\t\t<Modal\n\t\t\t\t\tsetModal={setModal}\n\t\t\t\t\tmodal={modal}\n\t\t\t\t\tmodalPosition={modalPosition}\n\t\t\t\t\tselection={selection}\n\t\t\t\t\tsetSelection={setSelection}\n\t\t\t\t\tactive={props.active}\n\t\t\t\t\tutterances={props.utterances}\n\t\t\t\t\tsetUtterances={props.setUtterances}\n\t\t\t\t\tsetUpdate={setUpdate}\n\t\t\t\t\tupdate={update}\n\t\t\t\t\tmapNodesToModel={mapNodesToModel}\n\t\t\t\t\tstateChange={stateChange}\n\t\t\t\t\tsetStateChange={setStateChange}\n\t\t\t\t\tentities={props.entities.flat()}\n\t\t\t\t\tparamValues={paramValues}\n\t\t\t\t\tsetParamValues={setParamValues}\n\t\t\t\t/>\n\t\t\t</React.Fragment>\n\t\t);\n\t} else {\n\t\treturn null;\n\t}\n});\n\nexport { List };\n","import React, { useState, useEffect } from 'react';\nimport { List as Utterances } from './intent_utterances.jsx';\nimport { useRef } from 'react';\nimport { validateInput } from '../../helpers/validations.jsx';\n\nfunction IntentDetails(props) {\n  const [intent, setIntent] = useState(props.intent);\n  const entities = props.entities;\n  const systemEntities = props.systemEntities;\n\n  const [name, setName] = useState('');\n  const [utterances, setUtterances] = useState([]);\n  const [active, setActive] = useState(null);\n  const [newExpression, setNewExpression] = useState(null);\n  const [nameValid, setNameValid] = useState(true);\n\n  const newExpressionInput = useRef(null);\n\n  let errors = Array.from(document.querySelectorAll('[data-valid=\"false\"]'));\n\n\n  const focusOnExpressionInput = () => {\n    newExpressionInput.current.focus();\n    newExpressionInput.current.value = '';\n    setActive(null);\n  };\n\n  // add new value to value array\n  function addNewValue() {\n    let arr = [...utterances];\n    let newUtterance = {\n      raw: newExpression ? newExpression : '',\n      model: [{ text: newExpression ? newExpression : '' }],\n    };\n    arr = [newUtterance, ...arr];\n    setUtterances(arr);\n    setActive(0);\n  }\n\n  const removeFromModel = (utteranceIndex, index) => {\n    let arr = [...utterances];\n    let model = arr[utteranceIndex].model;\n    model[index] = {\n      text: model[index].text,\n    };\n\n    setUtterances(arr);\n  };\n\n  // check if data is passed in props\n  useEffect(() => {\n    if (intent) {\n      setName(intent.name);\n      setUtterances(intent.utterances);\n    }\n  }, [intent]);\n\n  useEffect(() => {\n\n    console.log('errors --->', errors.length < 1)\n    if (name && utterances) {\n      props.onUpdate({\n        ...intent,\n        name: name,\n        utterances: utterances,\n      }, errors.length < 1);\n    }\n  }, [name, utterances]);\n\n  if (intent) {\n    return (\n      <div className=\"convo-details\">\n        <section className=\"layout--editor-content\">\n          <div>\n            {/* Entity name value */}\n            <div className=\"margin--30--large\">\n              <h3 className=\"margin--10--large\">Intent name</h3>\n              <form\n                onSubmit={e => {\n                  e.preventDefault();\n                }}\n              >\n                <input\n                  data-valid={`${nameValid}`}\n                  type=\"text\"\n                  defaultValue={name ? name : ''}\n                  placeholder=\"Intent name\"\n                  className=\"editor-input input--item-name\"\n                  onChange={e => {\n                    let message =\n                      'Intent names shall begin with alphabetic characters from a to Z. The intent name may contain 1 underscore per word. Intent names shall not contain any numbers at all.';\n                    let valid = validateInput(\n                      e.target,\n                      e.target.value,\n                      '^[A-Za-z](_?[A-Za-z])*_?$',\n                      message\n                    );\n\n                    setNameValid(valid);\n                    setName(e.target.value);\n                  }}\n                  required\n                />\n              </form>\n            </div>\n            {/* Entity words */}\n            <div className=\"margin--50--large\">\n              <h3 className=\"margin--10--large\">Utterances</h3>\n              <div className=\"margin--24--large\">\n                <form\n                  onSubmit={e => {\n                    e.preventDefault();\n                    if (newExpression) {\n                      addNewValue();\n                      setNewExpression(null);\n                      newExpressionInput.current.value = '';\n                    }\n                  }}\n                >\n                  <input\n                    type=\"text\"\n                    className=\"editor-input input--add-field\"\n                    placeholder=\"Enter reference value\"\n                    onChange={e => setNewExpression(e.target.value)}\n                    ref={newExpressionInput}\n                    onFocus={() => {\n                      setActive(null);\n                    }}\n                  />\n                </form>\n                <Utterances\n                  addNewValue={addNewValue}\n                  active={active}\n                  setActive={setActive}\n                  utterances={utterances}\n                  setUtterances={setUtterances}\n                  removeFromModel={removeFromModel}\n                  entities={[entities, ...systemEntities]}\n                  focusOnExpressionInput={focusOnExpressionInput}\n                  errors={errors}\n                />\n              </div>\n            </div>\n          </div>\n        </section>\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nexport default IntentDetails;\n","import React from 'react'\nimport EntityDetails from './components/EntityComponent/entity_details'\nimport IntentDetails from './components/IntentComponent/intent_details'\nimport './styles.scss'\n\nexport const IntentEditor = (props) => {\n  return <IntentDetails intent={props.intent} entities={props.entities} systemEntities={props.systemEntities} onUpdate={props.onUpdate} />\n}\n\nexport const EntitiyEditor = (props) => {\n  return <EntityDetails entity={props.entity} onUpdate={props.onUpdate} />\n}"],"names":["IconTrash","EntityValue","props","value","setValue","useState","item","synonyms","setSynonyms","newSynonym","setNewSynonym","remove","setRemove","synonymInput","useRef","useEffect","handleUpdate","values","index","handleNewSynonym","target","current","length","removeSynonym","arr","indexOf","splice","makeSynonyms","items","active","map","i","handleRemove","e","stopPropagation","setTimeout","removeValue","activeValue","setActiveValue","preventDefault","marginLeft","EntityValues","setValues","makeItems","validateInput","elem","term","regex","message","reg","RegExp","test","setCustomValidity","reportValidity","EntityDetails","entity","setEntity","name","setName","newValue","setNewValue","valid","setValid","valueInput","onUpdate","addNewValue","val","validate","getColor","Modal","entities","setEntities","allEntities","setAllEntities","entitiesNames","setEntitiesNames","input","modalRef","useOnclickOutside","setModal","setSelection","filterEntities","filteredArr","filter","toLowerCase","includes","trim","makeEntities","handleDefaultParam","param","split","pop","type","slotValue","getParamValues","found","paramValues","find","obj","slot_value","selection","setAttribute","mapNodesToModel","document","querySelector","childNodes","setStateChange","stateChange","modal","Input","React","Component","constructor","state","model","text","createRef","handleSelection","bind","handleModal","shouldComponentUpdate","nextProps","utterances","componentDidUpdate","prevProps","console","log","focus","relativePos","style","left","top","window","getSelection","getRangeAt","toString","textNode","createTextNode","selectedText","extractContents","span","createElement","nested","querySelectorAll","appendChild","textContent","insertNode","forEach","child","dataset","replaceWith","parentNode","tagName","outerHTML","innerHTML","parentPos","getBoundingClientRect","childPos","render","mappedModel","color","disableNewlines","evt","keyCode","which","focusOnExpressionInput","join","getAttribute","nodes","currentTarget","opacity","reactHtmlParser","Utterance","wrapper","removeBtn","data","slotValues","invalidValues","match","handleActive","setUtterances","removeFromUtterances","display","background","removeFromModel","List","memo","modalPosition","setModalPosition","update","setUpdate","setParamValues","flat","uniq","v","a","findIndex","t","setActive","Array","from","nodeName","raw","errors","IntentDetails","intent","setIntent","systemEntities","newExpression","setNewExpression","nameValid","setNameValid","newExpressionInput","newUtterance","utteranceIndex","Utterances","IntentEditor","EntitiyEditor"],"mappings":"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"}