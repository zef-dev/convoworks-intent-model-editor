{"version":3,"file":"index.modern.js","sources":["../src/helpers/common_constants.jsx","../src/components/IntentComponent/intent_modal.jsx","../src/assets/icon_trash.jsx","../src/components/IntentComponent/utterance/input.jsx","../src/components/IntentComponent/utterance/utterance.jsx","../src/components/IntentComponent/intent_utterances.jsx","../src/helpers/validations.jsx","../src/components/IntentComponent/intent_details.jsx","../src/index.js"],"sourcesContent":["export const getRandomColor = () => {\n\tvar letters = \"0123456789ABCDEF\";\n\tvar color = \"#\";\n\n\tfor (var i = 0; i < 6; i++) {\n\t\tcolor += letters[Math.floor(Math.random() * 16)];\n\t}\n\treturn color;\n};\n\nexport const getColor = (index) => {\n\tlet arr = [\n\t\t\"#56ebd3\",\n\t\t\"#fbacf6\",\n\t\t\"#9ee786\",\n\t\t\"#e4b5ff\",\n\t\t\"#c2e979\",\n\t\t\"#20d8fd\",\n\t\t\"#e8d25c\",\n\t\t\"#42edec\",\n\t\t\"#f3c46f\",\n\t\t\"#5cefba\",\n\t\t\"#e8de7a\",\n\t\t\"#7ee8c0\",\n\t\t\"#e8d98c\",\n\t\t\"#88e99a\",\n\t\t\"#cfdd73\",\n\t\t\"#8be8ad\",\n\t\t\"#dff799\",\n\t\t\"#b5eaa1\",\n\t\t\"#c2d681\",\n\t\t\"#b5e287\",\n\t];\n\n\treturn arr[index % arr.length]\n};\n","import React, { useState, useEffect, useRef } from 'react';\nimport useOnclickOutside from 'react-cool-onclickoutside';\nimport TextInput from 'react-autocomplete-input';\nimport 'react-autocomplete-input/dist/bundle.css';\n\nfunction Modal(props) {\n\tconst [ entities, setEntities ] = useState(props.entities);\n\tconst [ allEntities, setAllEntities ] = useState(props.entities);\n\tconst [ entitiesNames, setEntitiesNames ] = useState([]);\n\tconst input = useRef();\n\n\tconst modalRef = useOnclickOutside(() => {\n\t\tprops.setModal(false);\n\t\tprops.setSelection(null);\n\t});\n\n\tconst filterEntities = (term) => {\n\t\tlet arr = [ ...allEntities ];\n\t\tlet filteredArr = arr.filter(\n\t\t\t(item) => item.name && item.name.toLowerCase().includes(term.trim().toLowerCase())\n\t\t);\n\n\t\tsetEntities(filteredArr);\n\t};\n\n\tuseEffect(\n\t\t() => {\n\t\t\tlet arr = entities\n\t\t\t\t.map((item) => {\n\t\t\t\t\treturn item.name;\n\t\t\t\t})\n\t\t\t\t.filter((item) => item);\n\t\t\t//console.log(arr)\n\t\t\tsetEntitiesNames(arr);\n\t\t},\n\t\t[ entities ]\n\t);\n\n\tconst makeEntities = (items) => {\n\t\tconst handleDefaultParam = (param) => {\n\t\t\tif (param.includes('.')) {\n\t\t\t\treturn param.split('.').pop();\n\t\t\t} else {\n\t\t\t\treturn param.split('@').pop();\n\t\t\t}\n\t\t};\n\t\tif (items) {\n\t\t\treturn items.map((item, i) => {\n\t\t\t\treturn (\n\t\t\t\t\t<button\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t\tlet type = '@' + item.name;\n\t\t\t\t\t\t\tlet slotValue = item.name;\n\n\t\t\t\t\t\t\tconst getParamValues = () => {\n\t\t\t\t\t\t\t\tlet found = props.paramValues.find(obj => obj.type === type);\n\t\t\t\t\t\t\t\tif (found) {\n\t\t\t\t\t\t\t\t\treturn found.slot_value\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn handleDefaultParam(slotValue)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tprops.setModal(false);\n\t\t\t\t\t\t\tprops.selection.item.setAttribute('data-type', type);\n\t\t\t\t\t\t\tprops.selection.item.setAttribute('data-slot-value', getParamValues());\n\t\t\t\t\t\t\tprops.mapNodesToModel(\n\t\t\t\t\t\t\t\tdocument.querySelector('.item--active [contenteditable=\"true\"]').childNodes,\n\t\t\t\t\t\t\t\tprops.active\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tprops.setSelection(null);\n\t\t\t\t\t\t\tprops.setStateChange(!props.stateChange);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span role=\"img\">@{item.name}</span>\n\t\t\t\t\t</button>\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tif (entities) {\n\t\treturn (\n\t\t\t<div id=\"dropdown-modal\" className={`dropdown ${props.modal && 'dropdown--active'}`} ref={modalRef}>\n\t\t\t\t<div className=\"dropdown__search-wrap\">\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tComponent=\"input\"\n\t\t\t\t\t\ttrigger=\"\"\n\t\t\t\t\t\toptions={entitiesNames}\n\t\t\t\t\t\tspaceRemovers={[]}\n\t\t\t\t\t\tmatchAny={true}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tfilterEntities(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tref={input}\n\t\t\t\t\t\tclassName=\"dropdown__search editor-input\"\n\t\t\t\t\t\tplaceholder=\"Filter entities\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"dropdown__inner\">{entities && makeEntities(entities)}</div>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\treturn null;\n\t}\n}\n\nexport { Modal };\n","import React from 'react';\n\nfunction IconTrash() {\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n\t\t\t<g fill=\"none\" fill-rule=\"evenodd\" stroke=\"#1A1A1A\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n\t\t\t\t<path d=\"M2.4 6.5v7c0 1.105.835 2 1.867 2h7.466c1.032 0 1.867-.895 1.867-2v-7M1.467 3.5h13.066M6.133 3.5v-3h3.734v3M8 7.5v5M10.8 7.5v5M5.2 7.5v5\" />\n\t\t\t</g>\n\t\t</svg>\n\t);\n}\n\nexport { IconTrash };\n","import { times } from 'lodash';\nimport React from 'react';\nimport ContentEditable from 'react-contenteditable';\nimport reactHtmlParser from 'react-html-parser';\n\nclass Input extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tmodel: this.props.model\n\t\t};\n\n\t\tthis.text = React.createRef('');\n\t\tthis.handleSelection = this.handleSelection.bind(this);\n\t\tthis.handleModal = this.handleModal.bind(this);\n\t}\n\n\tshouldComponentUpdate(nextProps) {\n\t\tif (\n\t\t\tnextProps.utterances.length !== this.props.utterances.length ||\n\t\t\tthis.props.stateChange !== nextProps.stateChange ||\n\t\t\tnextProps.active !== this.props.active\n\t\t) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn this.props.model.length === 0;\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tconsole.log(this.props.active, prevProps.active);\n\t\tif (this.props.active !== prevProps.active || (this.props.active && !this.text.current.length)) {\n\t\t\tthis.text.current && this.text.current.focus();\n\t\t}\n\t}\n\n\thandleModal(selection, relativePos) {\n\t\tdocument.querySelector('#dropdown-modal').style.left = `${relativePos.left + 24}px`;\n\t\tdocument.querySelector('#dropdown-modal').style.top = `${relativePos.top + 2 * 24}px`;\n\t\tthis.props.setModal(true);\n\t\tthis.props.setSelection({ item: selection, index: this.props.index });\n\t}\n\n\thandleSelection(e) {\n\t\tfunction unwrap(node) {\n\t\t\tnode.replaceWith(...node.childNodes);\n\t\t}\n\n\t\tlet selection = window.getSelection().getRangeAt(0);\n\t\tif (selection.toString()) {\n\t\t\tlet textNode = document.createTextNode(selection.toString());\n\t\t\tlet selectedText = selection.extractContents();\n\t\t\tlet span = document.createElement('span');\n\t\t\tlet nested = span.querySelectorAll('*');\n\n\t\t\tspan.appendChild(textNode);\n\t\t\tspan.setAttribute('class', 'highlight');\n\t\t\tspan.textContent = span.textContent.trim();\n\t\t\tselection.insertNode(span);\n\n\t\t\te.target.childNodes.forEach((child) => {\n\t\t\t\tif (child.dataset && !child.dataset.type && child !== span) {\n\t\t\t\t\tchild.replaceWith(child.textContent);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t/* nested.forEach((item) => {\n\t\t\t\tunwrap(item);\n\t\t\t}); */\n\n\t\t\tif (span.parentNode.tagName === 'SPAN') {\n\t\t\t\tspan.parentNode.outerHTML = span.parentNode.innerHTML;\n\t\t\t}\n\n\t\t\tlet parentPos = document.querySelector('.convo-details').getBoundingClientRect();\n\t\t\tlet childPos = span.getBoundingClientRect();\n\n\t\t\tlet relativePos = {\n\t\t\t\ttop: childPos.top - parentPos.top,\n\t\t\t\tleft: childPos.left - parentPos.left\n\t\t\t};\n\n\t\t\tthis.handleModal(span, relativePos);\n\t\t}\n\t}\n\n\trender() {\n\t\tif (this.props.model) {\n\t\t\tlet mappedModel = this.props.model.filter((item) => item.text.trim().length);\n\n\t\t\tmappedModel = this.props.model.map((item, index) => {\n\t\t\t\tif (item.type) {\n\t\t\t\t\treturn `<span data-token=\"true\" style=\"background:${item.color}\" data-slot-value=\"${item.slot_value}\" data-type=\"${item.type}\" class=\"highlight\">${item.text.trim()}</span>`;\n\t\t\t\t} else {\n\t\t\t\t\treturn item.text;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst disableNewlines = (evt) => {\n\t\t\t\tconst keyCode = evt.keyCode || evt.which;\n\n\t\t\t\tif (keyCode === 13) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tthis.props.focusOnExpressionInput();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (this.props.active) {\n\t\t\t\treturn (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<div className=\"item__input\">\n\t\t\t\t\t\t\t<ContentEditable\n\t\t\t\t\t\t\t\tinnerRef={this.text}\n\t\t\t\t\t\t\t\thtml={`${mappedModel.join(' ')} `}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\tif (e.target.getAttribute('data-token')) {\n\t\t\t\t\t\t\t\t\t\tthis.handleModal(e.target, e);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonKeyPress={(e) => {\n\t\t\t\t\t\t\t\t\tdisableNewlines(e);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonMouseUp={(e) => {\n\t\t\t\t\t\t\t\t\tthis.handleSelection(e);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tlet nodes = e.currentTarget.childNodes;\n\t\t\t\t\t\t\t\t\tnodes = nodes.forEach((item) => {\n\t\t\t\t\t\t\t\t\t\tif (!item.textContent.trim().length && item.tagName === 'SPAN') {\n\t\t\t\t\t\t\t\t\t\t\titem.remove();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tthis.props.mapNodesToModel(e.currentTarget.childNodes, this.props.index);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"item__input item__input--readonly\">\n\t\t\t\t\t\t<div style={{ opacity: mappedModel.join(' ').trim().length ? '1' : '0.5' }}>\n\t\t\t\t\t\t\t{mappedModel.join(' ').trim().length ? (\n\t\t\t\t\t\t\t\treactHtmlParser(mappedModel.join(' '))\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t'Input text'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\treturn <div />;\n\t\t}\n\t}\n}\n\nexport default Input;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { IconTrash } from '../../../assets/icon_trash.jsx';\nimport Input from './input.jsx';\nimport { Component } from 'react';\nimport _ from 'lodash';\n\nconst Utterance = (props) => {\n\tconst [remove, setRemove] = useState(false);\n\tconst [valid, setValid] = useState(true);\n\n\tconst wrapper = useRef(null);\n\tconst removeBtn = useRef(null);\n\n\tlet data = props.data;\n\n\tuseEffect(() => {\n\t\tlet slotValues = props.data.model.map(item => item.slot_value).filter(item => item);\n\t\tlet invalidValues = slotValues.filter(item => !item.match(/^[A-Za-z](_*[A-Za-z])*_*$/));\n\n\t\tlet term = props.data.model.map(item => item.text).join(' ');\n\t\tlet reg = /^[a-zA-Z][a-zA-Z\\s]*$/;\n\n\t\tif (reg.test(term) && !invalidValues.length) {\n\t\t\tsetValid(true);\n\t\t} else {\n\t\t\tsetValid(false);\n\t\t}\n\t}, [props.data.model]);\n\n\treturn (\n\t\t<li\n\t\t\tdata-valid={`${valid}`}\n\t\t\tref={wrapper}\n\t\t\tkey={data.index}\n\t\t\tclassName={`item item--intent ${data.active ? 'item--active' : ''} ${remove\n\t\t\t\t? 'item--remove'\n\t\t\t\t: ''} ${valid ? 'item--valid' : 'item--error'}`}\n\t\t\tonClick={() => {\n\t\t\t\tdata.handleActive(data.index);\n\t\t\t}}\n\t\t>\n\t\t\t{!valid && <legend class=\"item__error\">Utterances shall begin with alphabetic characters from a to Z. The untterance may not contain other characters then alphabetic characters. The utterance shall not contain any numbers at all.</legend>}\n\t\t\t<div className=\"item__main\">\n\t\t\t\t<Input\n\t\t\t\t\tmodel={data.model}\n\t\t\t\t\tindex={data.index}\n\t\t\t\t\tutterances={data.utterances}\n\t\t\t\t\tsetUtterances={data.setUtterances}\n\t\t\t\t\tmodal={data.modal}\n\t\t\t\t\tsetModal={data.setModal}\n\t\t\t\t\tsetSelection={data.setSelection}\n\t\t\t\t\tselection={data.selection}\n\t\t\t\t\tmapNodesToModel={data.mapNodesToModel}\n\t\t\t\t\tactive={data.active}\n\t\t\t\t\taddNewValue={data.addNewValue}\n\t\t\t\t\tstateChange={data.stateChange}\n\t\t\t\t\tfocusOnExpressionInput={data.focusOnExpressionInput}\n\t\t\t\t\twrapper={wrapper}\n\t\t\t\t/>\n\t\t\t\t<div className=\"item__buttons\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn--remove btn--remove--main\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tref={removeBtn}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tsetRemove(true)\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tdata.removeFromUtterances(data.index);\n\t\t\t\t\t\t\t\tsetRemove(false);\n\t\t\t\t\t\t\t}, 220);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconTrash />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{data.model && data.model.filter((item) => item.type).length ? (\n\t\t\t\t<ul className=\"model\" style={{display: `${data.active ? 'block' : 'none'}`}}>\n\t\t\t\t\t<header>\n\t\t\t\t\t\t<div>Parameter Name</div>\n\t\t\t\t\t\t<div>Entity</div>\n\t\t\t\t\t\t<div>Resolved Value</div>\n\t\t\t\t\t</header>\n\t\t\t\t\t{data.model.map((item, i) => {\n\t\t\t\t\t\tif (item.type) {\n\t\t\t\t\t\t\tlet slotValue = item.slot_value;\n\t\t\t\t\t\t\tlet type = item.type;\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li key={i}>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclassName=\"editor-input\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tdefaultValue={slotValue}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\tlet arr = [...data.utterances];\n\t\t\t\t\t\t\t\t\t\t\tarr[data.index].model[i].slot_value = e.target.value;\n\t\t\t\t\t\t\t\t\t\t\tdata.setUtterances(arr);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Set parameter name\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<span className=\"highlight\" style={{ background: item.color }}>\n\t\t\t\t\t\t\t\t\t\t\t{type}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div>{item.text}</div>\n\t\t\t\t\t\t\t\t\t<div className=\"item__buttons\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn--remove\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault(e);\n\t\t\t\t\t\t\t\t\t\t\t\tdata.removeFromModel(data.index, i);\n\t\t\t\t\t\t\t\t\t\t\t\tdata.setStateChange(!data.stateChange);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<IconTrash />\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t) : (\n\t\t\t\t\t<React.Fragment />\n\t\t\t\t)}\n\t\t</li>\n\t);\n}\n\nexport default Utterance;\n","import React, { useState, useEffect } from 'react';\nimport { getColor } from '../../helpers/common_constants.jsx';\nimport { Modal } from './intent_modal.jsx';\nimport Utterance from './utterance/utterance.jsx';\n\nconst List = React.memo(function List(props) {\n\tconst [ modal, setModal ] = useState(false);\n\tconst [ modalPosition, setModalPosition ] = useState(null);\n\tconst [ selection, setSelection ] = useState(null);\n\tconst [ update, setUpdate ] = useState(false);\n\tconst [ stateChange, setStateChange ] = useState(false);\n\tconst [ paramValues, setParamValues ] = useState(null);\n\tconst intents = props.intents;\n\n\tuseEffect(\n\t\t() => {\n\t\t\t// get every item type & slot value pair from utterances array\n\t\t\tlet arr = props.utterances\n\t\t\t\t.map((item) => item.model)\n\t\t\t\t.flat()\n\t\t\t\t.filter((item) => item.slot_value)\n\t\t\t\t.map((item) => ({ type: item.type, slot_value: item.slot_value }));\n\n\n\t\t\t// remove duplicate pairs \n\t\t\tlet uniq = arr.filter((v, i, a) => a.findIndex((t) => t.slot_value === v.slot_value) === i);\n\t\t\tsetParamValues(uniq);\n\t\t},\n\t\t[ props.utterances ]\n\t);\n\n\tconst handleActive = (index) => {\n\t\tprops.setActive(index);\n\t};\n\n\tconst mapNodesToModel = (items, index) => {\n\t\tlet arr = Array.from(items).filter((item) => item.textContent.trim().length);\n\n\t\tlet i = 0;\n\t\tarr = arr.map((item) => {\n\t\t\tif (item.tagName === 'SPAN' || (item.nodeName === '#text' && item.textContent.trim().length)) {\n\t\t\t\tlet type = item.dataset && item.dataset.type && item.dataset.type.length ? item.dataset.type : null;\n\t\t\t\tif (type) {\n\t\t\t\t\ti++;\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttext: item.textContent.trim(),\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\tslot_value: item.dataset.slotValue\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn { text: item.textContent.trim() };\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\n\t\tarr = arr.filter((item) => item);\n\n\t\tconsole.log('arr', arr);\n\n\t\tlet values = [ ...props.utterances ];\n\t\tvalues[index] = { raw: arr.map((item) => item.text).join(' '), model: arr };\n\t\tprops.setUtterances(values);\n\t};\n\n\tconst makeItems = (items) => {\n\t\treturn items.map((item, index) => {\n\t\t\tlet model = item.model.map((val) => {\n\t\t\t\treturn { ...val, color: getColor(val.text.length) };\n\t\t\t});\n\n\t\t\tlet data = {\n\t\t\t\tindex: index,\n\t\t\t\tactive: index === props.active,\n\t\t\t\tmodel: model,\n\t\t\t\tutterances: props.utterances,\n\t\t\t\tsetUtterances: props.setUtterances,\n\t\t\t\thandleActive: handleActive,\n\t\t\t\tmodal: modal,\n\t\t\t\tsetModal: setModal,\n\t\t\t\tsetModalPosition: setModalPosition,\n\t\t\t\tselection: selection,\n\t\t\t\tsetSelection: setSelection,\n\t\t\t\taddNewValue: props.addNewValue,\n\t\t\t\tstateChange: stateChange,\n\t\t\t\tsetStateChange: setStateChange,\n\t\t\t\tremoveFromUtterances: removeFromUtterances,\n\t\t\t\tremoveFromModel: props.removeFromModel,\n\t\t\t\tmapNodesToModel: mapNodesToModel,\n\t\t\t\tfocusOnExpressionInput: props.focusOnExpressionInput,\n\t\t\t};\n\n\t\t\treturn <Utterance key={index} data={data} errors={props.errors} />;\n\t\t});\n\t};\n\n\tconst removeFromUtterances = (index) => {\n\t\tlet arr = [ ...props.utterances ];\n\t\tif (index !== -1) {\n\t\t\tarr.splice(index, 1);\n\t\t\tconsole.log('new arr after delete', arr);\n\t\t\tprops.setUtterances(arr);\n\t\t\tprops.setActive(null);\n\t\t}\n\t};\n\n\tconsole.log(selection);\n\n\tif (props.utterances) {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<ul>{makeItems(props.utterances)}</ul>\n\t\t\t\t<Modal\n\t\t\t\t\tsetModal={setModal}\n\t\t\t\t\tmodal={modal}\n\t\t\t\t\tmodalPosition={modalPosition}\n\t\t\t\t\tselection={selection}\n\t\t\t\t\tsetSelection={setSelection}\n\t\t\t\t\tactive={props.active}\n\t\t\t\t\tutterances={props.utterances}\n\t\t\t\t\tsetUtterances={props.setUtterances}\n\t\t\t\t\tsetUpdate={setUpdate}\n\t\t\t\t\tupdate={update}\n\t\t\t\t\tmapNodesToModel={mapNodesToModel}\n\t\t\t\t\tstateChange={stateChange}\n\t\t\t\t\tsetStateChange={setStateChange}\n\t\t\t\t\tentities={props.entities.flat()}\n\t\t\t\t\tparamValues={paramValues}\n\t\t\t\t\tsetParamValues={setParamValues}\n\t\t\t\t/>\n\t\t\t</React.Fragment>\n\t\t);\n\t} else {\n\t\treturn null;\n\t}\n});\n\nexport { List };\n","export const validateInput = (elem, term, regex, message) => {\n  let reg = new RegExp(regex);\n  if (reg.test(term)) {\n    elem.setCustomValidity('');\n  } else {\n    elem.setCustomValidity(message);\n  }\n  elem.reportValidity();\n\n  return reg.test(term);\n};\n","import React, { useState, useEffect } from 'react';\nimport { List as Utterances } from './intent_utterances.jsx';\nimport '../../App.scss';\nimport { useRef } from 'react';\nimport { validateInput } from '../../helpers/validations.jsx';\n\nfunction IntentDetails(props) {\n  const [intent, setIntent] = useState(props.intent);\n  const entities = props.entities;\n  const systemEntities = props.systemEntities;\n\n  const [name, setName] = useState('');\n  const [utterances, setUtterances] = useState([]);\n  const [active, setActive] = useState(null);\n  const [newExpression, setNewExpression] = useState(null);\n  const [nameValid, setNameValid] = useState(true);\n\n  const newExpressionInput = useRef(null);\n\n  let errors = Array.from(document.querySelectorAll('[data-valid=\"false\"]'));\n\n\n  const focusOnExpressionInput = () => {\n    newExpressionInput.current.focus();\n    newExpressionInput.current.value = '';\n    setActive(null);\n  };\n\n  // add new value to value array\n  function addNewValue() {\n    let arr = [...utterances];\n    let newUtterance = {\n      raw: newExpression ? newExpression : '',\n      model: [{ text: newExpression ? newExpression : '' }],\n    };\n    arr = [newUtterance, ...arr];\n    setUtterances(arr);\n    setActive(0);\n  }\n\n  const removeFromModel = (utteranceIndex, index) => {\n    let arr = [...utterances];\n    let model = arr[utteranceIndex].model;\n    model[index] = {\n      text: model[index].text,\n    };\n\n    setUtterances(arr);\n  };\n\n  // check if data is passed in props\n  useEffect(() => {\n    if (intent) {\n      setName(intent.name);\n      setUtterances(intent.utterances);\n    }\n  }, [intent]);\n\n  useEffect(() => {\n\n    console.log('errors --->', errors.length < 1)\n    if (name && utterances) {\n      props.onUpdate({\n        ...intent,\n        name: name,\n        utterances: utterances,\n      }, errors.length < 1);\n    }\n  }, [name, utterances]);\n\n  if (intent) {\n    return (\n      <div className=\"convo-details\">\n        <section className=\"layout--editor-content\">\n          <div>\n            {/* Entity name value */}\n            <div className=\"margin--30--large\">\n              <h3 className=\"margin--10--large\">Intent name</h3>\n              <form\n                onSubmit={e => {\n                  e.preventDefault();\n                }}\n              >\n                <input\n                  data-valid={`${nameValid}`}\n                  type=\"text\"\n                  defaultValue={name ? name : ''}\n                  placeholder=\"Intent name\"\n                  className=\"editor-input input--item-name\"\n                  onChange={e => {\n                    let message =\n                      'Intent names shall begin with alphabetic characters from a to Z. The intent name may contain 1 underscore per word. Intent names shall not contain any numbers at all.';\n                    let valid = validateInput(\n                      e.target,\n                      e.target.value,\n                      '^[A-Za-z](_?[A-Za-z])*_?$',\n                      message\n                    );\n\n                    setNameValid(valid);\n                    setName(e.target.value);\n                  }}\n                  required\n                />\n              </form>\n            </div>\n            {/* Entity words */}\n            <div className=\"margin--50--large\">\n              <h3 className=\"margin--10--large\">Utterances</h3>\n              <div className=\"margin--24--large\">\n                <form\n                  onSubmit={e => {\n                    e.preventDefault();\n                    if (newExpression) {\n                      addNewValue();\n                      setNewExpression(null);\n                      newExpressionInput.current.value = '';\n                    }\n                  }}\n                >\n                  <input\n                    type=\"text\"\n                    className=\"editor-input input--add-field\"\n                    placeholder=\"Enter reference value\"\n                    onChange={e => setNewExpression(e.target.value)}\n                    ref={newExpressionInput}\n                    onFocus={() => {\n                      setActive(null);\n                    }}\n                  />\n                </form>\n                <Utterances\n                  addNewValue={addNewValue}\n                  active={active}\n                  setActive={setActive}\n                  utterances={utterances}\n                  setUtterances={setUtterances}\n                  removeFromModel={removeFromModel}\n                  entities={[entities, ...systemEntities]}\n                  focusOnExpressionInput={focusOnExpressionInput}\n                  errors={errors}\n                />\n              </div>\n            </div>\n          </div>\n        </section>\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nexport default IntentDetails;\n","import React from 'react'\nimport IntentDetails from './components/IntentComponent/intent_details'\nimport styles from './styles.module.css'\n\nexport const ExampleComponent = ({ text }) => {\n  return <div className={styles.test}>Example Component: {text}</div>\n}\n\nexport const IntentEditor = (props) => {\n  return <IntentDetails intent={''} entities={[]} systemEntities={[]} onUpdate={() => {console.log('update')}} />\n}"],"names":["getColor","index","arr","length","Modal","props","entities","setEntities","useState","allEntities","setAllEntities","entitiesNames","setEntitiesNames","input","useRef","modalRef","useOnclickOutside","setModal","setSelection","filterEntities","term","filteredArr","filter","item","name","toLowerCase","includes","trim","useEffect","map","makeEntities","items","handleDefaultParam","param","split","pop","i","e","preventDefault","type","slotValue","getParamValues","found","paramValues","find","obj","slot_value","selection","setAttribute","mapNodesToModel","document","querySelector","childNodes","active","setStateChange","stateChange","modal","IconTrash","Input","React","Component","constructor","state","model","text","createRef","handleSelection","bind","handleModal","shouldComponentUpdate","nextProps","utterances","componentDidUpdate","prevProps","console","log","current","focus","relativePos","style","left","top","window","getSelection","getRangeAt","toString","textNode","createTextNode","selectedText","extractContents","span","createElement","nested","querySelectorAll","appendChild","textContent","insertNode","target","forEach","child","dataset","replaceWith","parentNode","tagName","outerHTML","innerHTML","parentPos","getBoundingClientRect","childPos","render","mappedModel","color","disableNewlines","evt","keyCode","which","focusOnExpressionInput","join","getAttribute","nodes","currentTarget","remove","opacity","reactHtmlParser","Utterance","setRemove","valid","setValid","wrapper","removeBtn","data","slotValues","invalidValues","match","reg","test","handleActive","setUtterances","addNewValue","stopPropagation","setTimeout","removeFromUtterances","display","value","background","removeFromModel","List","memo","modalPosition","setModalPosition","update","setUpdate","setParamValues","flat","uniq","v","a","findIndex","t","setActive","Array","from","nodeName","values","raw","makeItems","val","errors","splice","validateInput","elem","regex","message","RegExp","setCustomValidity","reportValidity","IntentDetails","intent","setIntent","systemEntities","setName","newExpression","setNewExpression","nameValid","setNameValid","newExpressionInput","newUtterance","utteranceIndex","onUpdate","Utterances","ExampleComponent","styles","IntentEditor"],"mappings":"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"}